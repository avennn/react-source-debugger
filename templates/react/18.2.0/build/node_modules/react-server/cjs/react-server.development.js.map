{"version":3,"file":"react-server.development.js","sources":["../../../../packages/shared/ReactSharedInternals.js","../../../../packages/shared/consoleWithStackDev.js","../../../../packages/react-server/src/forks/ReactServerStreamConfig.custom.js","../../../../packages/react-server/src/forks/ReactServerFormatConfig.custom.js","../../../../packages/shared/assign.js","../../../../packages/shared/ReactSymbols.js","../../../../packages/shared/getComponentNameFromType.js","../../../../packages/shared/ConsolePatchingDev.js","../../../../packages/shared/ReactComponentStackFrame.js","../../../../packages/shared/hasOwnProperty.js","../../../../packages/shared/checkPropTypes.js","../../../../packages/react-server/src/ReactFizzContext.js","../../../../packages/react-server/src/ReactFizzNewContext.js","../../../../packages/shared/ReactInstanceMap.js","../../../../packages/shared/isArray.js","../../../../packages/react-server/src/ReactFizzClassComponent.js","../../../../packages/react-server/src/ReactFizzTreeContext.js","../../../../packages/shared/objectIs.js","../../../../packages/react-server/src/ReactFizzHooks.js","../../../../packages/react-server/src/ReactFizzComponentStack.js","../../../../packages/react-server/src/ReactFizzServer.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\n\nlet suppressWarning = false;\nexport function setSuppressWarning(newSuppressWarning) {\n  if (__DEV__) {\n    suppressWarning = newSuppressWarning;\n  }\n}\n\n// In DEV, calls to console.warn and console.error get replaced\n// by calls to these methods by a Babel plugin.\n//\n// In PROD (or in packages without access to React internals),\n// they are left as they are instead.\n\nexport function warn(format, ...args) {\n  if (__DEV__) {\n    if (!suppressWarning) {\n      printWarning('warn', format, args);\n    }\n  }\n}\n\nexport function error(format, ...args) {\n  if (__DEV__) {\n    if (!suppressWarning) {\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  if (__DEV__) {\n    const ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    const stack = ReactDebugCurrentFrame.getStackAddendum();\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    }\n\n    // eslint-disable-next-line react-internal/safe-string-coercion\n    const argsWithFormat = args.map(item => String(item));\n    // Careful: RN currently depends on this prefix\n    argsWithFormat.unshift('Warning: ' + format);\n    // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// This is a host config that's used for the `react-server` package on npm.\n// It is only used by third-party renderers.\n//\n// Its API lets you pass the host config as an argument.\n// However, inside the `react-server` we treat host config as a module.\n// This file is a shim between two worlds.\n//\n// It works because the `react-server` bundle is wrapped in something like:\n//\n// module.exports = function ($$$config) {\n//   /* renderer code */\n// }\n//\n// So `$$$config` looks like a global variable, but it's\n// really an argument to a top-level wrapping function.\n\ndeclare var $$$hostConfig: any;\nexport opaque type Destination = mixed; // eslint-disable-line no-undef\n\nexport opaque type PrecomputedChunk = mixed; // eslint-disable-line no-undef\nexport opaque type Chunk = mixed; // eslint-disable-line no-undef\n\nexport const scheduleWork = $$$hostConfig.scheduleWork;\nexport const beginWriting = $$$hostConfig.beginWriting;\nexport const writeChunk = $$$hostConfig.writeChunk;\nexport const writeChunkAndReturn = $$$hostConfig.writeChunkAndReturn;\nexport const completeWriting = $$$hostConfig.completeWriting;\nexport const flushBuffered = $$$hostConfig.flushBuffered;\nexport const close = $$$hostConfig.close;\nexport const closeWithError = $$$hostConfig.closeWithError;\nexport const stringToChunk = $$$hostConfig.stringToChunk;\nexport const stringToPrecomputedChunk = $$$hostConfig.stringToPrecomputedChunk;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// This is a host config that's used for the `react-server` package on npm.\n// It is only used by third-party renderers.\n//\n// Its API lets you pass the host config as an argument.\n// However, inside the `react-server` we treat host config as a module.\n// This file is a shim between two worlds.\n//\n// It works because the `react-server` bundle is wrapped in something like:\n//\n// module.exports = function ($$$config) {\n//   /* renderer code */\n// }\n//\n// So `$$$config` looks like a global variable, but it's\n// really an argument to a top-level wrapping function.\n\ndeclare var $$$hostConfig: any;\nexport opaque type Destination = mixed; // eslint-disable-line no-undef\nexport opaque type ResponseState = mixed;\nexport opaque type FormatContext = mixed;\nexport opaque type SuspenseBoundaryID = mixed;\n\nexport const isPrimaryRenderer = false;\n\nexport const getChildFormatContext = $$$hostConfig.getChildFormatContext;\nexport const UNINITIALIZED_SUSPENSE_BOUNDARY_ID =\n  $$$hostConfig.UNINITIALIZED_SUSPENSE_BOUNDARY_ID;\nexport const assignSuspenseBoundaryID = $$$hostConfig.assignSuspenseBoundaryID;\nexport const makeId = $$$hostConfig.makeId;\nexport const pushTextInstance = $$$hostConfig.pushTextInstance;\nexport const pushStartInstance = $$$hostConfig.pushStartInstance;\nexport const pushEndInstance = $$$hostConfig.pushEndInstance;\nexport const pushStartCompletedSuspenseBoundary =\n  $$$hostConfig.pushStartCompletedSuspenseBoundary;\nexport const pushEndCompletedSuspenseBoundary =\n  $$$hostConfig.pushEndCompletedSuspenseBoundary;\nexport const pushSegmentFinale = $$$hostConfig.pushSegmentFinale;\nexport const writeCompletedRoot = $$$hostConfig.writeCompletedRoot;\nexport const writePlaceholder = $$$hostConfig.writePlaceholder;\nexport const writeStartCompletedSuspenseBoundary =\n  $$$hostConfig.writeStartCompletedSuspenseBoundary;\nexport const writeStartPendingSuspenseBoundary =\n  $$$hostConfig.writeStartPendingSuspenseBoundary;\nexport const writeStartClientRenderedSuspenseBoundary =\n  $$$hostConfig.writeStartClientRenderedSuspenseBoundary;\nexport const writeEndCompletedSuspenseBoundary =\n  $$$hostConfig.writeEndCompletedSuspenseBoundary;\nexport const writeEndPendingSuspenseBoundary =\n  $$$hostConfig.writeEndPendingSuspenseBoundary;\nexport const writeEndClientRenderedSuspenseBoundary =\n  $$$hostConfig.writeEndClientRenderedSuspenseBoundary;\nexport const writeStartSegment = $$$hostConfig.writeStartSegment;\nexport const writeEndSegment = $$$hostConfig.writeEndSegment;\nexport const writeCompletedSegmentInstruction =\n  $$$hostConfig.writeCompletedSegmentInstruction;\nexport const writeCompletedBoundaryInstruction =\n  $$$hostConfig.writeCompletedBoundaryInstruction;\nexport const writeClientRenderBoundaryInstruction =\n  $$$hostConfig.writeClientRenderBoundaryInstruction;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst assign = Object.assign;\n\nexport default assign;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_ELEMENT_TYPE = Symbol.for('react.element');\nexport const REACT_PORTAL_TYPE = Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nexport const REACT_CONTEXT_TYPE = Symbol.for('react.context');\nexport const REACT_SERVER_CONTEXT_TYPE = Symbol.for('react.server_context');\nexport const REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nexport const REACT_MEMO_TYPE = Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE = Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE = Symbol.for('react.scope');\nexport const REACT_DEBUG_TRACING_MODE_TYPE = Symbol.for(\n  'react.debug_trace_mode',\n);\nexport const REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE = Symbol.for('react.legacy_hidden');\nexport const REACT_CACHE_TYPE = Symbol.for('react.cache');\nexport const REACT_TRACING_MARKER_TYPE = Symbol.for('react.tracing_marker');\nexport const REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED = Symbol.for(\n  'react.default_value',\n);\n\nconst MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {LazyComponent} from 'react/src/ReactLazy';\nimport type {ReactContext, ReactProviderType} from 'shared/ReactTypes';\n\nimport {\n  REACT_CONTEXT_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_PORTAL_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_PROFILER_TYPE,\n  REACT_PROVIDER_TYPE,\n  REACT_STRICT_MODE_TYPE,\n  REACT_SUSPENSE_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_CACHE_TYPE,\n  REACT_TRACING_MARKER_TYPE,\n  REACT_SERVER_CONTEXT_TYPE,\n} from 'shared/ReactSymbols';\n\nimport {\n  enableServerContext,\n  enableTransitionTracing,\n  enableCache,\n} from './ReactFeatureFlags';\n\n// Keep in sync with react-reconciler/getComponentNameFromFiber\nfunction getWrappedName(\n  outerType: mixed,\n  innerType: any,\n  wrapperName: string,\n): string {\n  const displayName = (outerType: any).displayName;\n  if (displayName) {\n    return displayName;\n  }\n  const functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? `${wrapperName}(${functionName})` : wrapperName;\n}\n\n// Keep in sync with react-reconciler/getComponentNameFromFiber\nfunction getContextName(type: ReactContext<any>) {\n  return type.displayName || 'Context';\n}\n\n// Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\nexport default function getComponentNameFromType(type: mixed): string | null {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n  if (__DEV__) {\n    if (typeof (type: any).tag === 'number') {\n      console.error(\n        'Received an unexpected object in getComponentNameFromType(). ' +\n          'This is likely a bug in React. Please file an issue.',\n      );\n    }\n  }\n  if (typeof type === 'function') {\n    return (type: any).displayName || type.name || null;\n  }\n  if (typeof type === 'string') {\n    return type;\n  }\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n    case REACT_CACHE_TYPE:\n      if (enableCache) {\n        return 'Cache';\n      }\n    // eslint-disable-next-line no-fallthrough\n    case REACT_TRACING_MARKER_TYPE:\n      if (enableTransitionTracing) {\n        return 'TracingMarker';\n      }\n  }\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        const context: ReactContext<any> = (type: any);\n        return getContextName(context) + '.Consumer';\n      case REACT_PROVIDER_TYPE:\n        const provider: ReactProviderType<any> = (type: any);\n        return getContextName(provider._context) + '.Provider';\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n      case REACT_MEMO_TYPE:\n        const outerName = (type: any).displayName || null;\n        if (outerName !== null) {\n          return outerName;\n        }\n        return getComponentNameFromType(type.type) || 'Memo';\n      case REACT_LAZY_TYPE: {\n        const lazyComponent: LazyComponent<any, any> = (type: any);\n        const payload = lazyComponent._payload;\n        const init = lazyComponent._init;\n        try {\n          return getComponentNameFromType(init(payload));\n        } catch (x) {\n          return null;\n        }\n      }\n      case REACT_SERVER_CONTEXT_TYPE:\n        if (enableServerContext) {\n          const context2 = ((type: any): ReactContext<any>);\n          return (context2.displayName || context2._globalName) + '.Provider';\n        }\n      // eslint-disable-next-line no-fallthrough\n    }\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\n\nlet disabledDepth = 0;\nlet prevLog;\nlet prevInfo;\nlet prevWarn;\nlet prevError;\nlet prevGroup;\nlet prevGroupCollapsed;\nlet prevGroupEnd;\n\nfunction disabledLog() {}\ndisabledLog.__reactDisabledLog = true;\n\nexport function disableLogs(): void {\n  if (__DEV__) {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd;\n      // https://github.com/facebook/react/issues/19099\n      const props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true,\n      };\n      // $FlowFixMe Flow thinks console is immutable.\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props,\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n    disabledDepth++;\n  }\n}\n\nexport function reenableLogs(): void {\n  if (__DEV__) {\n    disabledDepth--;\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      const props = {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n      };\n      // $FlowFixMe Flow thinks console is immutable.\n      Object.defineProperties(console, {\n        log: {...props, value: prevLog},\n        info: {...props, value: prevInfo},\n        warn: {...props, value: prevWarn},\n        error: {...props, value: prevError},\n        group: {...props, value: prevGroup},\n        groupCollapsed: {...props, value: prevGroupCollapsed},\n        groupEnd: {...props, value: prevGroupEnd},\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n    if (disabledDepth < 0) {\n      console.error(\n        'disabledDepth fell below zero. ' +\n          'This is a bug in React. Please file an issue.',\n      );\n    }\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Source} from 'shared/ReactElementType';\nimport type {LazyComponent} from 'react/src/ReactLazy';\n\nimport {\n  enableComponentStackLocations,\n  disableNativeComponentFrames,\n} from 'shared/ReactFeatureFlags';\n\nimport {\n  REACT_SUSPENSE_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_LAZY_TYPE,\n} from 'shared/ReactSymbols';\n\nimport {disableLogs, reenableLogs} from 'shared/ConsolePatchingDev';\n\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\n\nconst {ReactCurrentDispatcher} = ReactSharedInternals;\n\nlet prefix;\nexport function describeBuiltInComponentFrame(\n  name: string,\n  source: void | null | Source,\n  ownerFn: void | null | Function,\n): string {\n  if (enableComponentStackLocations) {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        const match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = (match && match[1]) || '';\n      }\n    }\n    // We use the prefix to ensure our stacks line up with native stack frames.\n    return '\\n' + prefix + name;\n  } else {\n    let ownerName = null;\n    if (__DEV__ && ownerFn) {\n      ownerName = ownerFn.displayName || ownerFn.name || null;\n    }\n    return describeComponentFrame(name, source, ownerName);\n  }\n}\n\nlet reentry = false;\nlet componentFrameCache;\nif (__DEV__) {\n  const PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nexport function describeNativeComponentFrame(\n  fn: Function,\n  construct: boolean,\n): string {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if (disableNativeComponentFrames || !fn || reentry) {\n    return '';\n  }\n\n  if (__DEV__) {\n    const frame = componentFrameCache.get(fn);\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  let control;\n\n  reentry = true;\n  const previousPrepareStackTrace = Error.prepareStackTrace;\n  // $FlowFixMe It does accept undefined.\n  Error.prepareStackTrace = undefined;\n  let previousDispatcher;\n  if (__DEV__) {\n    previousDispatcher = ReactCurrentDispatcher.current;\n    // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      const Fake = function() {\n        throw Error();\n      };\n      // $FlowFixMe\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function() {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        },\n      });\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      const sampleLines = sample.stack.split('\\n');\n      const controlLines = control.stack.split('\\n');\n      let s = sampleLines.length - 1;\n      let c = controlLines.length - 1;\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--;\n              // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                let frame = '\\n' + sampleLines[s].replace(' at new ', ' at ');\n\n                // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n                if (fn.displayName && frame.includes('<anonymous>')) {\n                  frame = frame.replace('<anonymous>', fn.displayName);\n                }\n\n                if (__DEV__) {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, frame);\n                  }\n                }\n                // Return the line we found.\n                return frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n    if (__DEV__) {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  }\n  // Fallback to just using the name if we couldn't make it throw.\n  const name = fn ? fn.displayName || fn.name : '';\n  const syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n  if (__DEV__) {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n  return syntheticFrame;\n}\n\nconst BEFORE_SLASH_RE = /^(.*)[\\\\\\/]/;\n\nfunction describeComponentFrame(\n  name: null | string,\n  source: void | null | Source,\n  ownerName: null | string,\n) {\n  let sourceInfo = '';\n  if (__DEV__ && source) {\n    const path = source.fileName;\n    let fileName = path.replace(BEFORE_SLASH_RE, '');\n    // In DEV, include code for a common special case:\n    // prefer \"folder/index.js\" instead of just \"index.js\".\n    if (/^index\\./.test(fileName)) {\n      const match = path.match(BEFORE_SLASH_RE);\n      if (match) {\n        const pathBeforeSlash = match[1];\n        if (pathBeforeSlash) {\n          const folderName = pathBeforeSlash.replace(BEFORE_SLASH_RE, '');\n          fileName = folderName + '/' + fileName;\n        }\n      }\n    }\n    sourceInfo = ' (at ' + fileName + ':' + source.lineNumber + ')';\n  } else if (ownerName) {\n    sourceInfo = ' (created by ' + ownerName + ')';\n  }\n  return '\\n    in ' + (name || 'Unknown') + sourceInfo;\n}\n\nexport function describeClassComponentFrame(\n  ctor: Function,\n  source: void | null | Source,\n  ownerFn: void | null | Function,\n): string {\n  if (enableComponentStackLocations) {\n    return describeNativeComponentFrame(ctor, true);\n  } else {\n    return describeFunctionComponentFrame(ctor, source, ownerFn);\n  }\n}\n\nexport function describeFunctionComponentFrame(\n  fn: Function,\n  source: void | null | Source,\n  ownerFn: void | null | Function,\n): string {\n  if (enableComponentStackLocations) {\n    return describeNativeComponentFrame(fn, false);\n  } else {\n    if (!fn) {\n      return '';\n    }\n    const name = fn.displayName || fn.name || null;\n    let ownerName = null;\n    if (__DEV__ && ownerFn) {\n      ownerName = ownerFn.displayName || ownerFn.name || null;\n    }\n    return describeComponentFrame(name, source, ownerName);\n  }\n}\n\nfunction shouldConstruct(Component: Function) {\n  const prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nexport function describeUnknownElementTypeFrameInDEV(\n  type: any,\n  source: void | null | Source,\n  ownerFn: void | null | Function,\n): string {\n  if (!__DEV__) {\n    return '';\n  }\n  if (type == null) {\n    return '';\n  }\n  if (typeof type === 'function') {\n    if (enableComponentStackLocations) {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    } else {\n      return describeFunctionComponentFrame(type, source, ownerFn);\n    }\n  }\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type, source, ownerFn);\n  }\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense', source, ownerFn);\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList', source, ownerFn);\n  }\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render, source, ownerFn);\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n      case REACT_LAZY_TYPE: {\n        const lazyComponent: LazyComponent<any, any> = (type: any);\n        const payload = lazyComponent._payload;\n        const init = lazyComponent._init;\n        try {\n          // Lazy may contain any component type so we recursively resolve it.\n          return describeUnknownElementTypeFrameInDEV(\n            init(payload),\n            source,\n            ownerFn,\n          );\n        } catch (x) {}\n      }\n    }\n  }\n  return '';\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport default hasOwnProperty;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst loggedTypeFailures = {};\n\nimport {describeUnknownElementTypeFrameInDEV} from 'shared/ReactComponentStackFrame';\n\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport hasOwnProperty from 'shared/hasOwnProperty';\n\nconst ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  if (__DEV__) {\n    if (element) {\n      const owner = element._owner;\n      const stack = describeUnknownElementTypeFrameInDEV(\n        element.type,\n        element._source,\n        owner ? owner.type : null,\n      );\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nexport default function checkPropTypes(\n  typeSpecs: Object,\n  values: Object,\n  location: string,\n  componentName: ?string,\n  element?: any,\n): void {\n  if (__DEV__) {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    const has = Function.call.bind(hasOwnProperty);\n    for (const typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        let error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            // eslint-disable-next-line react-internal/prod-error-codes\n            const err = Error(\n              (componentName || 'React class') +\n                ': ' +\n                location +\n                ' type `' +\n                typeSpecName +\n                '` is invalid; ' +\n                'it must be a function, usually from the `prop-types` package, but received `' +\n                typeof typeSpecs[typeSpecName] +\n                '`.' +\n                'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.',\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](\n            values,\n            typeSpecName,\n            componentName,\n            location,\n            null,\n            'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED',\n          );\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n          console.error(\n            '%s: type specification of %s' +\n              ' `%s` is invalid; the type checker ' +\n              'function must return `null` or an `Error` but returned a %s. ' +\n              'You may have forgotten to pass an argument to the type checker ' +\n              'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n              'shape all require an argument).',\n            componentName || 'React class',\n            location,\n            typeSpecName,\n            typeof error,\n          );\n          setCurrentlyValidatingElement(null);\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n          setCurrentlyValidatingElement(element);\n          console.error('Failed %s type: %s', location, error.message);\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {disableLegacyContext} from 'shared/ReactFeatureFlags';\nimport getComponentNameFromType from 'shared/getComponentNameFromType';\nimport checkPropTypes from 'shared/checkPropTypes';\n\nlet warnedAboutMissingGetChildContext;\n\nif (__DEV__) {\n  warnedAboutMissingGetChildContext = {};\n}\n\nexport const emptyContextObject = {};\nif (__DEV__) {\n  Object.freeze(emptyContextObject);\n}\n\nexport function getMaskedContext(type: any, unmaskedContext: Object): Object {\n  if (disableLegacyContext) {\n    return emptyContextObject;\n  } else {\n    const contextTypes = type.contextTypes;\n    if (!contextTypes) {\n      return emptyContextObject;\n    }\n\n    const context = {};\n    for (const key in contextTypes) {\n      context[key] = unmaskedContext[key];\n    }\n\n    if (__DEV__) {\n      const name = getComponentNameFromType(type) || 'Unknown';\n      checkPropTypes(contextTypes, context, 'context', name);\n    }\n\n    return context;\n  }\n}\n\nexport function processChildContext(\n  instance: any,\n  type: any,\n  parentContext: Object,\n  childContextTypes: Object,\n): Object {\n  if (disableLegacyContext) {\n    return parentContext;\n  } else {\n    // TODO (bvaughn) Replace this behavior with an invariant() in the future.\n    // It has only been added in Fiber to match the (unintentional) behavior in Stack.\n    if (typeof instance.getChildContext !== 'function') {\n      if (__DEV__) {\n        const componentName = getComponentNameFromType(type) || 'Unknown';\n\n        if (!warnedAboutMissingGetChildContext[componentName]) {\n          warnedAboutMissingGetChildContext[componentName] = true;\n          console.error(\n            '%s.childContextTypes is specified but there is no getChildContext() method ' +\n              'on the instance. You can either define getChildContext() on %s or remove ' +\n              'childContextTypes from it.',\n            componentName,\n            componentName,\n          );\n        }\n      }\n      return parentContext;\n    }\n\n    const childContext = instance.getChildContext();\n    for (const contextKey in childContext) {\n      if (!(contextKey in childContextTypes)) {\n        throw new Error(\n          `${getComponentNameFromType(type) ||\n            'Unknown'}.getChildContext(): key \"${contextKey}\" is not defined in childContextTypes.`,\n        );\n      }\n    }\n    if (__DEV__) {\n      const name = getComponentNameFromType(type) || 'Unknown';\n      checkPropTypes(childContextTypes, childContext, 'child context', name);\n    }\n\n    return {...parentContext, ...childContext};\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {ReactContext} from 'shared/ReactTypes';\n\nimport {REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED} from 'shared/ReactSymbols';\nimport {isPrimaryRenderer} from './ReactServerFormatConfig';\n\nlet rendererSigil;\nif (__DEV__) {\n  // Use this to detect multiple renderers using the same context\n  rendererSigil = {};\n}\n\n// Used to store the parent path of all context overrides in a shared linked list.\n// Forming a reverse tree.\ntype ContextNode<T> = {\n  parent: null | ContextNode<any>,\n  depth: number, // Short hand to compute the depth of the tree at this node.\n  context: ReactContext<T>,\n  parentValue: T,\n  value: T,\n};\n\n// The structure of a context snapshot is an implementation of this file.\n// Currently, it's implemented as tracking the current active node.\nexport opaque type ContextSnapshot = null | ContextNode<any>;\n\nexport const rootContextSnapshot: ContextSnapshot = null;\n\n// We assume that this runtime owns the \"current\" field on all ReactContext instances.\n// This global (actually thread local) state represents what state all those \"current\",\n// fields are currently in.\nlet currentActiveSnapshot: ContextSnapshot = null;\n\nfunction popNode(prev: ContextNode<any>): void {\n  if (isPrimaryRenderer) {\n    prev.context._currentValue = prev.parentValue;\n  } else {\n    prev.context._currentValue2 = prev.parentValue;\n  }\n}\n\nfunction pushNode(next: ContextNode<any>): void {\n  if (isPrimaryRenderer) {\n    next.context._currentValue = next.value;\n  } else {\n    next.context._currentValue2 = next.value;\n  }\n}\n\nfunction popToNearestCommonAncestor(\n  prev: ContextNode<any>,\n  next: ContextNode<any>,\n): void {\n  if (prev === next) {\n    // We've found a shared ancestor. We don't need to pop nor reapply this one or anything above.\n  } else {\n    popNode(prev);\n    const parentPrev = prev.parent;\n    const parentNext = next.parent;\n    if (parentPrev === null) {\n      if (parentNext !== null) {\n        throw new Error(\n          'The stacks must reach the root at the same time. This is a bug in React.',\n        );\n      }\n    } else {\n      if (parentNext === null) {\n        throw new Error(\n          'The stacks must reach the root at the same time. This is a bug in React.',\n        );\n      }\n\n      popToNearestCommonAncestor(parentPrev, parentNext);\n    }\n\n    // On the way back, we push the new ones that weren't common.\n    pushNode(next);\n  }\n}\n\nfunction popAllPrevious(prev: ContextNode<any>): void {\n  popNode(prev);\n  const parentPrev = prev.parent;\n  if (parentPrev !== null) {\n    popAllPrevious(parentPrev);\n  }\n}\n\nfunction pushAllNext(next: ContextNode<any>): void {\n  const parentNext = next.parent;\n  if (parentNext !== null) {\n    pushAllNext(parentNext);\n  }\n  pushNode(next);\n}\n\nfunction popPreviousToCommonLevel(\n  prev: ContextNode<any>,\n  next: ContextNode<any>,\n): void {\n  popNode(prev);\n  const parentPrev = prev.parent;\n\n  if (parentPrev === null) {\n    throw new Error(\n      'The depth must equal at least at zero before reaching the root. This is a bug in React.',\n    );\n  }\n\n  if (parentPrev.depth === next.depth) {\n    // We found the same level. Now we just need to find a shared ancestor.\n    popToNearestCommonAncestor(parentPrev, next);\n  } else {\n    // We must still be deeper.\n    popPreviousToCommonLevel(parentPrev, next);\n  }\n}\n\nfunction popNextToCommonLevel(\n  prev: ContextNode<any>,\n  next: ContextNode<any>,\n): void {\n  const parentNext = next.parent;\n\n  if (parentNext === null) {\n    throw new Error(\n      'The depth must equal at least at zero before reaching the root. This is a bug in React.',\n    );\n  }\n\n  if (prev.depth === parentNext.depth) {\n    // We found the same level. Now we just need to find a shared ancestor.\n    popToNearestCommonAncestor(prev, parentNext);\n  } else {\n    // We must still be deeper.\n    popNextToCommonLevel(prev, parentNext);\n  }\n  pushNode(next);\n}\n\n// Perform context switching to the new snapshot.\n// To make it cheap to read many contexts, while not suspending, we make the switch eagerly by\n// updating all the context's current values. That way reads, always just read the current value.\n// At the cost of updating contexts even if they're never read by this subtree.\nexport function switchContext(newSnapshot: ContextSnapshot): void {\n  // The basic algorithm we need to do is to pop back any contexts that are no longer on the stack.\n  // We also need to update any new contexts that are now on the stack with the deepest value.\n  // The easiest way to update new contexts is to just reapply them in reverse order from the\n  // perspective of the backpointers. To avoid allocating a lot when switching, we use the stack\n  // for that. Therefore this algorithm is recursive.\n  // 1) First we pop which ever snapshot tree was deepest. Popping old contexts as we go.\n  // 2) Then we find the nearest common ancestor from there. Popping old contexts as we go.\n  // 3) Then we reapply new contexts on the way back up the stack.\n  const prev = currentActiveSnapshot;\n  const next = newSnapshot;\n  if (prev !== next) {\n    if (prev === null) {\n      // $FlowFixMe: This has to be non-null since it's not equal to prev.\n      pushAllNext(next);\n    } else if (next === null) {\n      popAllPrevious(prev);\n    } else if (prev.depth === next.depth) {\n      popToNearestCommonAncestor(prev, next);\n    } else if (prev.depth > next.depth) {\n      popPreviousToCommonLevel(prev, next);\n    } else {\n      popNextToCommonLevel(prev, next);\n    }\n    currentActiveSnapshot = next;\n  }\n}\n\nexport function pushProvider<T>(\n  context: ReactContext<T>,\n  nextValue: T,\n): ContextSnapshot {\n  let prevValue;\n  if (isPrimaryRenderer) {\n    prevValue = context._currentValue;\n    context._currentValue = nextValue;\n    if (__DEV__) {\n      if (\n        context._currentRenderer !== undefined &&\n        context._currentRenderer !== null &&\n        context._currentRenderer !== rendererSigil\n      ) {\n        console.error(\n          'Detected multiple renderers concurrently rendering the ' +\n            'same context provider. This is currently unsupported.',\n        );\n      }\n      context._currentRenderer = rendererSigil;\n    }\n  } else {\n    prevValue = context._currentValue2;\n    context._currentValue2 = nextValue;\n    if (__DEV__) {\n      if (\n        context._currentRenderer2 !== undefined &&\n        context._currentRenderer2 !== null &&\n        context._currentRenderer2 !== rendererSigil\n      ) {\n        console.error(\n          'Detected multiple renderers concurrently rendering the ' +\n            'same context provider. This is currently unsupported.',\n        );\n      }\n      context._currentRenderer2 = rendererSigil;\n    }\n  }\n  const prevNode = currentActiveSnapshot;\n  const newNode: ContextNode<T> = {\n    parent: prevNode,\n    depth: prevNode === null ? 0 : prevNode.depth + 1,\n    context: context,\n    parentValue: prevValue,\n    value: nextValue,\n  };\n  currentActiveSnapshot = newNode;\n  return newNode;\n}\n\nexport function popProvider<T>(context: ReactContext<T>): ContextSnapshot {\n  const prevSnapshot = currentActiveSnapshot;\n\n  if (prevSnapshot === null) {\n    throw new Error(\n      'Tried to pop a Context at the root of the app. This is a bug in React.',\n    );\n  }\n\n  if (__DEV__) {\n    if (prevSnapshot.context !== context) {\n      console.error(\n        'The parent context is not the expected context. This is probably a bug in React.',\n      );\n    }\n  }\n  if (isPrimaryRenderer) {\n    const value = prevSnapshot.parentValue;\n    if (value === REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED) {\n      prevSnapshot.context._currentValue = prevSnapshot.context._defaultValue;\n    } else {\n      prevSnapshot.context._currentValue = value;\n    }\n    if (__DEV__) {\n      if (\n        context._currentRenderer !== undefined &&\n        context._currentRenderer !== null &&\n        context._currentRenderer !== rendererSigil\n      ) {\n        console.error(\n          'Detected multiple renderers concurrently rendering the ' +\n            'same context provider. This is currently unsupported.',\n        );\n      }\n      context._currentRenderer = rendererSigil;\n    }\n  } else {\n    const value = prevSnapshot.parentValue;\n    if (value === REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED) {\n      prevSnapshot.context._currentValue2 = prevSnapshot.context._defaultValue;\n    } else {\n      prevSnapshot.context._currentValue2 = value;\n    }\n    if (__DEV__) {\n      if (\n        context._currentRenderer2 !== undefined &&\n        context._currentRenderer2 !== null &&\n        context._currentRenderer2 !== rendererSigil\n      ) {\n        console.error(\n          'Detected multiple renderers concurrently rendering the ' +\n            'same context provider. This is currently unsupported.',\n        );\n      }\n      context._currentRenderer2 = rendererSigil;\n    }\n  }\n  return (currentActiveSnapshot = prevSnapshot.parent);\n}\n\nexport function getActiveContext(): ContextSnapshot {\n  return currentActiveSnapshot;\n}\n\nexport function readContext<T>(context: ReactContext<T>): T {\n  const value = isPrimaryRenderer\n    ? context._currentValue\n    : context._currentValue2;\n  return value;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * `ReactInstanceMap` maintains a mapping from a public facing stateful\n * instance (key) and the internal representation (value). This allows public\n * methods to accept the user facing instance as an argument and map them back\n * to internal methods.\n *\n * Note that this module is currently shared and assumed to be stateless.\n * If this becomes an actual Map, that will break.\n */\n\n/**\n * This API should be called `delete` but we'd have to make sure to always\n * transform these to strings for IE support. When this transform is fully\n * supported we can rename it.\n */\nexport function remove(key) {\n  key._reactInternals = undefined;\n}\n\nexport function get(key) {\n  return key._reactInternals;\n}\n\nexport function has(key) {\n  return key._reactInternals !== undefined;\n}\n\nexport function set(key, value) {\n  key._reactInternals = value;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\n\nconst isArrayImpl = Array.isArray;\n\n// eslint-disable-next-line no-redeclare\nfunction isArray(a: mixed): boolean {\n  return isArrayImpl(a);\n}\n\nexport default isArray;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {emptyContextObject} from './ReactFizzContext';\nimport {readContext} from './ReactFizzNewContext';\n\nimport {\n  disableLegacyContext,\n  warnAboutDeprecatedLifecycles,\n} from 'shared/ReactFeatureFlags';\nimport {get as getInstance, set as setInstance} from 'shared/ReactInstanceMap';\nimport getComponentNameFromType from 'shared/getComponentNameFromType';\nimport {REACT_CONTEXT_TYPE, REACT_PROVIDER_TYPE} from 'shared/ReactSymbols';\nimport assign from 'shared/assign';\nimport isArray from 'shared/isArray';\n\nconst didWarnAboutNoopUpdateForComponent = {};\nconst didWarnAboutDeprecatedWillMount = {};\n\nlet didWarnAboutUninitializedState;\nlet didWarnAboutGetSnapshotBeforeUpdateWithoutDidUpdate;\nlet didWarnAboutLegacyLifecyclesAndDerivedState;\nlet didWarnAboutUndefinedDerivedState;\nlet warnOnUndefinedDerivedState;\nlet warnOnInvalidCallback;\nlet didWarnAboutDirectlyAssigningPropsToState;\nlet didWarnAboutContextTypeAndContextTypes;\nlet didWarnAboutInvalidateContextType;\n\nif (__DEV__) {\n  didWarnAboutUninitializedState = new Set();\n  didWarnAboutGetSnapshotBeforeUpdateWithoutDidUpdate = new Set();\n  didWarnAboutLegacyLifecyclesAndDerivedState = new Set();\n  didWarnAboutDirectlyAssigningPropsToState = new Set();\n  didWarnAboutUndefinedDerivedState = new Set();\n  didWarnAboutContextTypeAndContextTypes = new Set();\n  didWarnAboutInvalidateContextType = new Set();\n\n  const didWarnOnInvalidCallback = new Set();\n\n  warnOnInvalidCallback = function(callback: mixed, callerName: string) {\n    if (callback === null || typeof callback === 'function') {\n      return;\n    }\n    const key = callerName + '_' + (callback: any);\n    if (!didWarnOnInvalidCallback.has(key)) {\n      didWarnOnInvalidCallback.add(key);\n      console.error(\n        '%s(...): Expected the last optional `callback` argument to be a ' +\n          'function. Instead received: %s.',\n        callerName,\n        callback,\n      );\n    }\n  };\n\n  warnOnUndefinedDerivedState = function(type, partialState) {\n    if (partialState === undefined) {\n      const componentName = getComponentNameFromType(type) || 'Component';\n      if (!didWarnAboutUndefinedDerivedState.has(componentName)) {\n        didWarnAboutUndefinedDerivedState.add(componentName);\n        console.error(\n          '%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. ' +\n            'You have returned undefined.',\n          componentName,\n        );\n      }\n    }\n  };\n}\n\nfunction warnNoop(\n  publicInstance: React$Component<any, any>,\n  callerName: string,\n) {\n  if (__DEV__) {\n    const constructor = publicInstance.constructor;\n    const componentName =\n      (constructor && getComponentNameFromType(constructor)) || 'ReactClass';\n    const warningKey = componentName + '.' + callerName;\n    if (didWarnAboutNoopUpdateForComponent[warningKey]) {\n      return;\n    }\n\n    console.error(\n      '%s(...): Can only update a mounting component. ' +\n        'This usually means you called %s() outside componentWillMount() on the server. ' +\n        'This is a no-op.\\n\\nPlease check the code for the %s component.',\n      callerName,\n      callerName,\n      componentName,\n    );\n    didWarnAboutNoopUpdateForComponent[warningKey] = true;\n  }\n}\n\ntype InternalInstance = {\n  queue: null | Array<Object>,\n  replace: boolean,\n};\n\nconst classComponentUpdater = {\n  isMounted(inst) {\n    return false;\n  },\n  enqueueSetState(inst, payload, callback) {\n    const internals: InternalInstance = getInstance(inst);\n    if (internals.queue === null) {\n      warnNoop(inst, 'setState');\n    } else {\n      internals.queue.push(payload);\n      if (__DEV__) {\n        if (callback !== undefined && callback !== null) {\n          warnOnInvalidCallback(callback, 'setState');\n        }\n      }\n    }\n  },\n  enqueueReplaceState(inst, payload, callback) {\n    const internals: InternalInstance = getInstance(inst);\n    internals.replace = true;\n    internals.queue = [payload];\n    if (__DEV__) {\n      if (callback !== undefined && callback !== null) {\n        warnOnInvalidCallback(callback, 'setState');\n      }\n    }\n  },\n  enqueueForceUpdate(inst, callback) {\n    const internals: InternalInstance = getInstance(inst);\n    if (internals.queue === null) {\n      warnNoop(inst, 'forceUpdate');\n    } else {\n      if (__DEV__) {\n        if (callback !== undefined && callback !== null) {\n          warnOnInvalidCallback(callback, 'setState');\n        }\n      }\n    }\n  },\n};\n\nfunction applyDerivedStateFromProps(\n  instance: any,\n  ctor: any,\n  getDerivedStateFromProps: (props: any, state: any) => any,\n  prevState: any,\n  nextProps: any,\n) {\n  const partialState = getDerivedStateFromProps(nextProps, prevState);\n\n  if (__DEV__) {\n    warnOnUndefinedDerivedState(ctor, partialState);\n  }\n  // Merge the partial state and the previous state.\n  const newState =\n    partialState === null || partialState === undefined\n      ? prevState\n      : assign({}, prevState, partialState);\n  return newState;\n}\n\nexport function constructClassInstance(\n  ctor: any,\n  props: any,\n  maskedLegacyContext: any,\n): any {\n  let context = emptyContextObject;\n  const contextType = ctor.contextType;\n\n  if (__DEV__) {\n    if ('contextType' in ctor) {\n      const isValid =\n        // Allow null for conditional declaration\n        contextType === null ||\n        (contextType !== undefined &&\n          contextType.$$typeof === REACT_CONTEXT_TYPE &&\n          contextType._context === undefined); // Not a <Context.Consumer>\n\n      if (!isValid && !didWarnAboutInvalidateContextType.has(ctor)) {\n        didWarnAboutInvalidateContextType.add(ctor);\n\n        let addendum = '';\n        if (contextType === undefined) {\n          addendum =\n            ' However, it is set to undefined. ' +\n            'This can be caused by a typo or by mixing up named and default imports. ' +\n            'This can also happen due to a circular dependency, so ' +\n            'try moving the createContext() call to a separate file.';\n        } else if (typeof contextType !== 'object') {\n          addendum = ' However, it is set to a ' + typeof contextType + '.';\n        } else if (contextType.$$typeof === REACT_PROVIDER_TYPE) {\n          addendum = ' Did you accidentally pass the Context.Provider instead?';\n        } else if (contextType._context !== undefined) {\n          // <Context.Consumer>\n          addendum = ' Did you accidentally pass the Context.Consumer instead?';\n        } else {\n          addendum =\n            ' However, it is set to an object with keys {' +\n            Object.keys(contextType).join(', ') +\n            '}.';\n        }\n        console.error(\n          '%s defines an invalid contextType. ' +\n            'contextType should point to the Context object returned by React.createContext().%s',\n          getComponentNameFromType(ctor) || 'Component',\n          addendum,\n        );\n      }\n    }\n  }\n\n  if (typeof contextType === 'object' && contextType !== null) {\n    context = readContext((contextType: any));\n  } else if (!disableLegacyContext) {\n    context = maskedLegacyContext;\n  }\n\n  const instance = new ctor(props, context);\n\n  if (__DEV__) {\n    if (\n      typeof ctor.getDerivedStateFromProps === 'function' &&\n      (instance.state === null || instance.state === undefined)\n    ) {\n      const componentName = getComponentNameFromType(ctor) || 'Component';\n      if (!didWarnAboutUninitializedState.has(componentName)) {\n        didWarnAboutUninitializedState.add(componentName);\n        console.error(\n          '`%s` uses `getDerivedStateFromProps` but its initial state is ' +\n            '%s. This is not recommended. Instead, define the initial state by ' +\n            'assigning an object to `this.state` in the constructor of `%s`. ' +\n            'This ensures that `getDerivedStateFromProps` arguments have a consistent shape.',\n          componentName,\n          instance.state === null ? 'null' : 'undefined',\n          componentName,\n        );\n      }\n    }\n\n    // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n    // Warn about these lifecycles if they are present.\n    // Don't warn about react-lifecycles-compat polyfilled methods though.\n    if (\n      typeof ctor.getDerivedStateFromProps === 'function' ||\n      typeof instance.getSnapshotBeforeUpdate === 'function'\n    ) {\n      let foundWillMountName = null;\n      let foundWillReceivePropsName = null;\n      let foundWillUpdateName = null;\n      if (\n        typeof instance.componentWillMount === 'function' &&\n        instance.componentWillMount.__suppressDeprecationWarning !== true\n      ) {\n        foundWillMountName = 'componentWillMount';\n      } else if (typeof instance.UNSAFE_componentWillMount === 'function') {\n        foundWillMountName = 'UNSAFE_componentWillMount';\n      }\n      if (\n        typeof instance.componentWillReceiveProps === 'function' &&\n        instance.componentWillReceiveProps.__suppressDeprecationWarning !== true\n      ) {\n        foundWillReceivePropsName = 'componentWillReceiveProps';\n      } else if (\n        typeof instance.UNSAFE_componentWillReceiveProps === 'function'\n      ) {\n        foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n      }\n      if (\n        typeof instance.componentWillUpdate === 'function' &&\n        instance.componentWillUpdate.__suppressDeprecationWarning !== true\n      ) {\n        foundWillUpdateName = 'componentWillUpdate';\n      } else if (typeof instance.UNSAFE_componentWillUpdate === 'function') {\n        foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n      }\n      if (\n        foundWillMountName !== null ||\n        foundWillReceivePropsName !== null ||\n        foundWillUpdateName !== null\n      ) {\n        const componentName = getComponentNameFromType(ctor) || 'Component';\n        const newApiName =\n          typeof ctor.getDerivedStateFromProps === 'function'\n            ? 'getDerivedStateFromProps()'\n            : 'getSnapshotBeforeUpdate()';\n        if (!didWarnAboutLegacyLifecyclesAndDerivedState.has(componentName)) {\n          didWarnAboutLegacyLifecyclesAndDerivedState.add(componentName);\n          console.error(\n            'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n              '%s uses %s but also contains the following legacy lifecycles:%s%s%s\\n\\n' +\n              'The above lifecycles should be removed. Learn more about this warning here:\\n' +\n              'https://reactjs.org/link/unsafe-component-lifecycles',\n            componentName,\n            newApiName,\n            foundWillMountName !== null ? `\\n  ${foundWillMountName}` : '',\n            foundWillReceivePropsName !== null\n              ? `\\n  ${foundWillReceivePropsName}`\n              : '',\n            foundWillUpdateName !== null ? `\\n  ${foundWillUpdateName}` : '',\n          );\n        }\n      }\n    }\n  }\n\n  return instance;\n}\n\nfunction checkClassInstance(instance: any, ctor: any, newProps: any) {\n  if (__DEV__) {\n    const name = getComponentNameFromType(ctor) || 'Component';\n    const renderPresent = instance.render;\n\n    if (!renderPresent) {\n      if (ctor.prototype && typeof ctor.prototype.render === 'function') {\n        console.error(\n          '%s(...): No `render` method found on the returned component ' +\n            'instance: did you accidentally return an object from the constructor?',\n          name,\n        );\n      } else {\n        console.error(\n          '%s(...): No `render` method found on the returned component ' +\n            'instance: you may have forgotten to define `render`.',\n          name,\n        );\n      }\n    }\n\n    if (\n      instance.getInitialState &&\n      !instance.getInitialState.isReactClassApproved &&\n      !instance.state\n    ) {\n      console.error(\n        'getInitialState was defined on %s, a plain JavaScript class. ' +\n          'This is only supported for classes created using React.createClass. ' +\n          'Did you mean to define a state property instead?',\n        name,\n      );\n    }\n    if (\n      instance.getDefaultProps &&\n      !instance.getDefaultProps.isReactClassApproved\n    ) {\n      console.error(\n        'getDefaultProps was defined on %s, a plain JavaScript class. ' +\n          'This is only supported for classes created using React.createClass. ' +\n          'Use a static property to define defaultProps instead.',\n        name,\n      );\n    }\n    if (instance.propTypes) {\n      console.error(\n        'propTypes was defined as an instance property on %s. Use a static ' +\n          'property to define propTypes instead.',\n        name,\n      );\n    }\n    if (instance.contextType) {\n      console.error(\n        'contextType was defined as an instance property on %s. Use a static ' +\n          'property to define contextType instead.',\n        name,\n      );\n    }\n\n    if (disableLegacyContext) {\n      if (ctor.childContextTypes) {\n        console.error(\n          '%s uses the legacy childContextTypes API which is no longer supported. ' +\n            'Use React.createContext() instead.',\n          name,\n        );\n      }\n      if (ctor.contextTypes) {\n        console.error(\n          '%s uses the legacy contextTypes API which is no longer supported. ' +\n            'Use React.createContext() with static contextType instead.',\n          name,\n        );\n      }\n    } else {\n      if (instance.contextTypes) {\n        console.error(\n          'contextTypes was defined as an instance property on %s. Use a static ' +\n            'property to define contextTypes instead.',\n          name,\n        );\n      }\n\n      if (\n        ctor.contextType &&\n        ctor.contextTypes &&\n        !didWarnAboutContextTypeAndContextTypes.has(ctor)\n      ) {\n        didWarnAboutContextTypeAndContextTypes.add(ctor);\n        console.error(\n          '%s declares both contextTypes and contextType static properties. ' +\n            'The legacy contextTypes property will be ignored.',\n          name,\n        );\n      }\n    }\n\n    if (typeof instance.componentShouldUpdate === 'function') {\n      console.error(\n        '%s has a method called ' +\n          'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' +\n          'The name is phrased as a question because the function is ' +\n          'expected to return a value.',\n        name,\n      );\n    }\n    if (\n      ctor.prototype &&\n      ctor.prototype.isPureReactComponent &&\n      typeof instance.shouldComponentUpdate !== 'undefined'\n    ) {\n      console.error(\n        '%s has a method called shouldComponentUpdate(). ' +\n          'shouldComponentUpdate should not be used when extending React.PureComponent. ' +\n          'Please extend React.Component if shouldComponentUpdate is used.',\n        getComponentNameFromType(ctor) || 'A pure component',\n      );\n    }\n    if (typeof instance.componentDidUnmount === 'function') {\n      console.error(\n        '%s has a method called ' +\n          'componentDidUnmount(). But there is no such lifecycle method. ' +\n          'Did you mean componentWillUnmount()?',\n        name,\n      );\n    }\n    if (typeof instance.componentDidReceiveProps === 'function') {\n      console.error(\n        '%s has a method called ' +\n          'componentDidReceiveProps(). But there is no such lifecycle method. ' +\n          'If you meant to update the state in response to changing props, ' +\n          'use componentWillReceiveProps(). If you meant to fetch data or ' +\n          'run side-effects or mutations after React has updated the UI, use componentDidUpdate().',\n        name,\n      );\n    }\n    if (typeof instance.componentWillRecieveProps === 'function') {\n      console.error(\n        '%s has a method called ' +\n          'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?',\n        name,\n      );\n    }\n    if (typeof instance.UNSAFE_componentWillRecieveProps === 'function') {\n      console.error(\n        '%s has a method called ' +\n          'UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?',\n        name,\n      );\n    }\n    const hasMutatedProps = instance.props !== newProps;\n    if (instance.props !== undefined && hasMutatedProps) {\n      console.error(\n        '%s(...): When calling super() in `%s`, make sure to pass ' +\n          \"up the same props that your component's constructor was passed.\",\n        name,\n        name,\n      );\n    }\n    if (instance.defaultProps) {\n      console.error(\n        'Setting defaultProps as an instance property on %s is not supported and will be ignored.' +\n          ' Instead, define defaultProps as a static property on %s.',\n        name,\n        name,\n      );\n    }\n\n    if (\n      typeof instance.getSnapshotBeforeUpdate === 'function' &&\n      typeof instance.componentDidUpdate !== 'function' &&\n      !didWarnAboutGetSnapshotBeforeUpdateWithoutDidUpdate.has(ctor)\n    ) {\n      didWarnAboutGetSnapshotBeforeUpdateWithoutDidUpdate.add(ctor);\n      console.error(\n        '%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). ' +\n          'This component defines getSnapshotBeforeUpdate() only.',\n        getComponentNameFromType(ctor),\n      );\n    }\n\n    if (typeof instance.getDerivedStateFromProps === 'function') {\n      console.error(\n        '%s: getDerivedStateFromProps() is defined as an instance method ' +\n          'and will be ignored. Instead, declare it as a static method.',\n        name,\n      );\n    }\n    if (typeof instance.getDerivedStateFromError === 'function') {\n      console.error(\n        '%s: getDerivedStateFromError() is defined as an instance method ' +\n          'and will be ignored. Instead, declare it as a static method.',\n        name,\n      );\n    }\n    if (typeof ctor.getSnapshotBeforeUpdate === 'function') {\n      console.error(\n        '%s: getSnapshotBeforeUpdate() is defined as a static method ' +\n          'and will be ignored. Instead, declare it as an instance method.',\n        name,\n      );\n    }\n    const state = instance.state;\n    if (state && (typeof state !== 'object' || isArray(state))) {\n      console.error('%s.state: must be set to an object or null', name);\n    }\n    if (\n      typeof instance.getChildContext === 'function' &&\n      typeof ctor.childContextTypes !== 'object'\n    ) {\n      console.error(\n        '%s.getChildContext(): childContextTypes must be defined in order to ' +\n          'use getChildContext().',\n        name,\n      );\n    }\n  }\n}\n\nfunction callComponentWillMount(type, instance) {\n  const oldState = instance.state;\n\n  if (typeof instance.componentWillMount === 'function') {\n    if (__DEV__) {\n      if (\n        warnAboutDeprecatedLifecycles &&\n        instance.componentWillMount.__suppressDeprecationWarning !== true\n      ) {\n        const componentName = getComponentNameFromType(type) || 'Unknown';\n\n        if (!didWarnAboutDeprecatedWillMount[componentName]) {\n          console.warn(\n            // keep this warning in sync with ReactStrictModeWarning.js\n            'componentWillMount has been renamed, and is not recommended for use. ' +\n              'See https://reactjs.org/link/unsafe-component-lifecycles for details.\\n\\n' +\n              '* Move code from componentWillMount to componentDidMount (preferred in most cases) ' +\n              'or the constructor.\\n' +\n              '\\nPlease update the following components: %s',\n            componentName,\n          );\n          didWarnAboutDeprecatedWillMount[componentName] = true;\n        }\n      }\n    }\n\n    instance.componentWillMount();\n  }\n  if (typeof instance.UNSAFE_componentWillMount === 'function') {\n    instance.UNSAFE_componentWillMount();\n  }\n\n  if (oldState !== instance.state) {\n    if (__DEV__) {\n      console.error(\n        '%s.componentWillMount(): Assigning directly to this.state is ' +\n          \"deprecated (except inside a component's \" +\n          'constructor). Use setState instead.',\n        getComponentNameFromType(type) || 'Component',\n      );\n    }\n    classComponentUpdater.enqueueReplaceState(instance, instance.state, null);\n  }\n}\n\nfunction processUpdateQueue(\n  internalInstance: InternalInstance,\n  inst: any,\n  props: any,\n  maskedLegacyContext: any,\n): void {\n  if (internalInstance.queue !== null && internalInstance.queue.length > 0) {\n    const oldQueue = internalInstance.queue;\n    const oldReplace = internalInstance.replace;\n    internalInstance.queue = null;\n    internalInstance.replace = false;\n\n    if (oldReplace && oldQueue.length === 1) {\n      inst.state = oldQueue[0];\n    } else {\n      let nextState = oldReplace ? oldQueue[0] : inst.state;\n      let dontMutate = true;\n      for (let i = oldReplace ? 1 : 0; i < oldQueue.length; i++) {\n        const partial = oldQueue[i];\n        const partialState =\n          typeof partial === 'function'\n            ? partial.call(inst, nextState, props, maskedLegacyContext)\n            : partial;\n        if (partialState != null) {\n          if (dontMutate) {\n            dontMutate = false;\n            nextState = assign({}, nextState, partialState);\n          } else {\n            assign(nextState, partialState);\n          }\n        }\n      }\n      inst.state = nextState;\n    }\n  } else {\n    internalInstance.queue = null;\n  }\n}\n\n// Invokes the mount life-cycles on a previously never rendered instance.\nexport function mountClassInstance(\n  instance: any,\n  ctor: any,\n  newProps: any,\n  maskedLegacyContext: any,\n): void {\n  if (__DEV__) {\n    checkClassInstance(instance, ctor, newProps);\n  }\n\n  const initialState = instance.state !== undefined ? instance.state : null;\n\n  instance.updater = classComponentUpdater;\n  instance.props = newProps;\n  instance.state = initialState;\n  // We don't bother initializing the refs object on the server, since we're not going to resolve them anyway.\n\n  // The internal instance will be used to manage updates that happen during this mount.\n  const internalInstance: InternalInstance = {\n    queue: [],\n    replace: false,\n  };\n  setInstance(instance, internalInstance);\n\n  const contextType = ctor.contextType;\n  if (typeof contextType === 'object' && contextType !== null) {\n    instance.context = readContext(contextType);\n  } else if (disableLegacyContext) {\n    instance.context = emptyContextObject;\n  } else {\n    instance.context = maskedLegacyContext;\n  }\n\n  if (__DEV__) {\n    if (instance.state === newProps) {\n      const componentName = getComponentNameFromType(ctor) || 'Component';\n      if (!didWarnAboutDirectlyAssigningPropsToState.has(componentName)) {\n        didWarnAboutDirectlyAssigningPropsToState.add(componentName);\n        console.error(\n          '%s: It is not recommended to assign props directly to state ' +\n            \"because updates to props won't be reflected in state. \" +\n            'In most cases, it is better to use props directly.',\n          componentName,\n        );\n      }\n    }\n  }\n\n  const getDerivedStateFromProps = ctor.getDerivedStateFromProps;\n  if (typeof getDerivedStateFromProps === 'function') {\n    instance.state = applyDerivedStateFromProps(\n      instance,\n      ctor,\n      getDerivedStateFromProps,\n      initialState,\n      newProps,\n    );\n  }\n\n  // In order to support react-lifecycles-compat polyfilled components,\n  // Unsafe lifecycles should not be invoked for components using the new APIs.\n  if (\n    typeof ctor.getDerivedStateFromProps !== 'function' &&\n    typeof instance.getSnapshotBeforeUpdate !== 'function' &&\n    (typeof instance.UNSAFE_componentWillMount === 'function' ||\n      typeof instance.componentWillMount === 'function')\n  ) {\n    callComponentWillMount(ctor, instance);\n    // If we had additional state updates during this life-cycle, let's\n    // process them now.\n    processUpdateQueue(\n      internalInstance,\n      instance,\n      newProps,\n      maskedLegacyContext,\n    );\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// Ids are base 32 strings whose binary representation corresponds to the\n// position of a node in a tree.\n\n// Every time the tree forks into multiple children, we add additional bits to\n// the left of the sequence that represent the position of the child within the\n// current level of children.\n//\n//      00101       00010001011010101\n//             \n//   Fork 5 of 20       Parent id\n//\n// The leading 0s are important. In the above example, you only need 3 bits to\n// represent slot 5. However, you need 5 bits to represent all the forks at\n// the current level, so we must account for the empty bits at the end.\n//\n// For this same reason, slots are 1-indexed instead of 0-indexed. Otherwise,\n// the zeroth id at a level would be indistinguishable from its parent.\n//\n// If a node has only one child, and does not materialize an id (i.e. does not\n// contain a useId hook), then we don't need to allocate any space in the\n// sequence. It's treated as a transparent indirection. For example, these two\n// trees produce the same ids:\n//\n// <>                          <>\n//   <Indirection>               <A />\n//     <A />                     <B />\n//   </Indirection>            </>\n//   <B />\n// </>\n//\n// However, we cannot skip any node that materializes an id. Otherwise, a parent\n// id that does not fork would be indistinguishable from its child id. For\n// example, this tree does not fork, but the parent and child must have\n// different ids.\n//\n// <Parent>\n//   <Child />\n// </Parent>\n//\n// To handle this scenario, every time we materialize an id, we allocate a\n// new level with a single slot. You can think of this as a fork with only one\n// prong, or an array of children with length 1.\n//\n// It's possible for the size of the sequence to exceed 32 bits, the max\n// size for bitwise operations. When this happens, we make more room by\n// converting the right part of the id to a string and storing it in an overflow\n// variable. We use a base 32 string representation, because 32 is the largest\n// power of 2 that is supported by toString(). We want the base to be large so\n// that the resulting ids are compact, and we want the base to be a power of 2\n// because every log2(base) bits corresponds to a single character, i.e. every\n// log2(32) = 5 bits. That means we can lop bits off the end 5 at a time without\n// affecting the final result.\n\nexport type TreeContext = {\n  +id: number,\n  +overflow: string,\n};\n\nexport const emptyTreeContext = {\n  id: 1,\n  overflow: '',\n};\n\nexport function getTreeId(context: TreeContext): string {\n  const overflow = context.overflow;\n  const idWithLeadingBit = context.id;\n  const id = idWithLeadingBit & ~getLeadingBit(idWithLeadingBit);\n  return id.toString(32) + overflow;\n}\n\nexport function pushTreeContext(\n  baseContext: TreeContext,\n  totalChildren: number,\n  index: number,\n): TreeContext {\n  const baseIdWithLeadingBit = baseContext.id;\n  const baseOverflow = baseContext.overflow;\n\n  // The leftmost 1 marks the end of the sequence, non-inclusive. It's not part\n  // of the id; we use it to account for leading 0s.\n  const baseLength = getBitLength(baseIdWithLeadingBit) - 1;\n  const baseId = baseIdWithLeadingBit & ~(1 << baseLength);\n\n  const slot = index + 1;\n  const length = getBitLength(totalChildren) + baseLength;\n\n  // 30 is the max length we can store without overflowing, taking into\n  // consideration the leading 1 we use to mark the end of the sequence.\n  if (length > 30) {\n    // We overflowed the bitwise-safe range. Fall back to slower algorithm.\n    // This branch assumes the length of the base id is greater than 5; it won't\n    // work for smaller ids, because you need 5 bits per character.\n    //\n    // We encode the id in multiple steps: first the base id, then the\n    // remaining digits.\n    //\n    // Each 5 bit sequence corresponds to a single base 32 character. So for\n    // example, if the current id is 23 bits long, we can convert 20 of those\n    // bits into a string of 4 characters, with 3 bits left over.\n    //\n    // First calculate how many bits in the base id represent a complete\n    // sequence of characters.\n    const numberOfOverflowBits = baseLength - (baseLength % 5);\n\n    // Then create a bitmask that selects only those bits.\n    const newOverflowBits = (1 << numberOfOverflowBits) - 1;\n\n    // Select the bits, and convert them to a base 32 string.\n    const newOverflow = (baseId & newOverflowBits).toString(32);\n\n    // Now we can remove those bits from the base id.\n    const restOfBaseId = baseId >> numberOfOverflowBits;\n    const restOfBaseLength = baseLength - numberOfOverflowBits;\n\n    // Finally, encode the rest of the bits using the normal algorithm. Because\n    // we made more room, this time it won't overflow.\n    const restOfLength = getBitLength(totalChildren) + restOfBaseLength;\n    const restOfNewBits = slot << restOfBaseLength;\n    const id = restOfNewBits | restOfBaseId;\n    const overflow = newOverflow + baseOverflow;\n    return {\n      id: (1 << restOfLength) | id,\n      overflow,\n    };\n  } else {\n    // Normal path\n    const newBits = slot << baseLength;\n    const id = newBits | baseId;\n    const overflow = baseOverflow;\n    return {\n      id: (1 << length) | id,\n      overflow,\n    };\n  }\n}\n\nfunction getBitLength(number: number): number {\n  return 32 - clz32(number);\n}\n\nfunction getLeadingBit(id: number) {\n  return 1 << (getBitLength(id) - 1);\n}\n\n// TODO: Math.clz32 is supported in Node 12+. Maybe we can drop the fallback.\nconst clz32 = Math.clz32 ? Math.clz32 : clz32Fallback;\n\n// Count leading zeros.\n// Based on:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32\nconst log = Math.log;\nconst LN2 = Math.LN2;\nfunction clz32Fallback(x: number): number {\n  const asUint = x >>> 0;\n  if (asUint === 0) {\n    return 32;\n  }\n  return (31 - ((log(asUint) / LN2) | 0)) | 0;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x: any, y: any) {\n  return (\n    (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y) // eslint-disable-line no-self-compare\n  );\n}\n\nconst objectIs: (x: any, y: any) => boolean =\n  typeof Object.is === 'function' ? Object.is : is;\n\nexport default objectIs;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Dispatcher as DispatcherType} from 'react-reconciler/src/ReactInternalTypes';\n\nimport type {\n  MutableSource,\n  MutableSourceGetSnapshotFn,\n  MutableSourceSubscribeFn,\n  ReactContext,\n  StartTransitionOptions,\n} from 'shared/ReactTypes';\n\nimport type {ResponseState} from './ReactServerFormatConfig';\nimport type {Task} from './ReactFizzServer';\n\nimport {readContext as readContextImpl} from './ReactFizzNewContext';\nimport {getTreeId} from './ReactFizzTreeContext';\n\nimport {makeId} from './ReactServerFormatConfig';\n\nimport {enableCache} from 'shared/ReactFeatureFlags';\nimport is from 'shared/objectIs';\n\ntype BasicStateAction<S> = (S => S) | S;\ntype Dispatch<A> = A => void;\n\ntype Update<A> = {|\n  action: A,\n  next: Update<A> | null,\n|};\n\ntype UpdateQueue<A> = {|\n  last: Update<A> | null,\n  dispatch: any,\n|};\n\ntype Hook = {|\n  memoizedState: any,\n  queue: UpdateQueue<any> | null,\n  next: Hook | null,\n|};\n\nlet currentlyRenderingComponent: Object | null = null;\nlet currentlyRenderingTask: Task | null = null;\nlet firstWorkInProgressHook: Hook | null = null;\nlet workInProgressHook: Hook | null = null;\n// Whether the work-in-progress hook is a re-rendered hook\nlet isReRender: boolean = false;\n// Whether an update was scheduled during the currently executing render pass.\nlet didScheduleRenderPhaseUpdate: boolean = false;\n// Counts the number of useId hooks in this component\nlet localIdCounter: number = 0;\n// Lazily created map of render-phase updates\nlet renderPhaseUpdates: Map<UpdateQueue<any>, Update<any>> | null = null;\n// Counter to prevent infinite loops.\nlet numberOfReRenders: number = 0;\nconst RE_RENDER_LIMIT = 25;\n\nlet isInHookUserCodeInDev = false;\n\n// In DEV, this is the name of the currently executing primitive hook\nlet currentHookNameInDev: ?string;\n\nfunction resolveCurrentlyRenderingComponent(): Object {\n  if (currentlyRenderingComponent === null) {\n    throw new Error(\n      'Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for' +\n        ' one of the following reasons:\\n' +\n        '1. You might have mismatching versions of React and the renderer (such as React DOM)\\n' +\n        '2. You might be breaking the Rules of Hooks\\n' +\n        '3. You might have more than one copy of React in the same app\\n' +\n        'See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.',\n    );\n  }\n\n  if (__DEV__) {\n    if (isInHookUserCodeInDev) {\n      console.error(\n        'Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. ' +\n          'You can only call Hooks at the top level of your React function. ' +\n          'For more information, see ' +\n          'https://reactjs.org/link/rules-of-hooks',\n      );\n    }\n  }\n  return currentlyRenderingComponent;\n}\n\nfunction areHookInputsEqual(\n  nextDeps: Array<mixed>,\n  prevDeps: Array<mixed> | null,\n) {\n  if (prevDeps === null) {\n    if (__DEV__) {\n      console.error(\n        '%s received a final argument during this render, but not during ' +\n          'the previous render. Even though the final argument is optional, ' +\n          'its type cannot change between renders.',\n        currentHookNameInDev,\n      );\n    }\n    return false;\n  }\n\n  if (__DEV__) {\n    // Don't bother comparing lengths in prod because these arrays should be\n    // passed inline.\n    if (nextDeps.length !== prevDeps.length) {\n      console.error(\n        'The final argument passed to %s changed size between renders. The ' +\n          'order and size of this array must remain constant.\\n\\n' +\n          'Previous: %s\\n' +\n          'Incoming: %s',\n        currentHookNameInDev,\n        `[${nextDeps.join(', ')}]`,\n        `[${prevDeps.join(', ')}]`,\n      );\n    }\n  }\n  for (let i = 0; i < prevDeps.length && i < nextDeps.length; i++) {\n    if (is(nextDeps[i], prevDeps[i])) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\n\nfunction createHook(): Hook {\n  if (numberOfReRenders > 0) {\n    throw new Error('Rendered more hooks than during the previous render');\n  }\n  return {\n    memoizedState: null,\n    queue: null,\n    next: null,\n  };\n}\n\nfunction createWorkInProgressHook(): Hook {\n  if (workInProgressHook === null) {\n    // This is the first hook in the list\n    if (firstWorkInProgressHook === null) {\n      isReRender = false;\n      firstWorkInProgressHook = workInProgressHook = createHook();\n    } else {\n      // There's already a work-in-progress. Reuse it.\n      isReRender = true;\n      workInProgressHook = firstWorkInProgressHook;\n    }\n  } else {\n    if (workInProgressHook.next === null) {\n      isReRender = false;\n      // Append to the end of the list\n      workInProgressHook = workInProgressHook.next = createHook();\n    } else {\n      // There's already a work-in-progress. Reuse it.\n      isReRender = true;\n      workInProgressHook = workInProgressHook.next;\n    }\n  }\n  return workInProgressHook;\n}\n\nexport function prepareToUseHooks(task: Task, componentIdentity: Object): void {\n  currentlyRenderingComponent = componentIdentity;\n  currentlyRenderingTask = task;\n  if (__DEV__) {\n    isInHookUserCodeInDev = false;\n  }\n\n  // The following should have already been reset\n  // didScheduleRenderPhaseUpdate = false;\n  // localIdCounter = 0;\n  // firstWorkInProgressHook = null;\n  // numberOfReRenders = 0;\n  // renderPhaseUpdates = null;\n  // workInProgressHook = null;\n\n  localIdCounter = 0;\n}\n\nexport function finishHooks(\n  Component: any,\n  props: any,\n  children: any,\n  refOrContext: any,\n): any {\n  // This must be called after every function component to prevent hooks from\n  // being used in classes.\n\n  while (didScheduleRenderPhaseUpdate) {\n    // Updates were scheduled during the render phase. They are stored in\n    // the `renderPhaseUpdates` map. Call the component again, reusing the\n    // work-in-progress hooks and applying the additional updates on top. Keep\n    // restarting until no more updates are scheduled.\n    didScheduleRenderPhaseUpdate = false;\n    localIdCounter = 0;\n    numberOfReRenders += 1;\n\n    // Start over from the beginning of the list\n    workInProgressHook = null;\n\n    children = Component(props, refOrContext);\n  }\n  resetHooksState();\n  return children;\n}\n\nexport function checkDidRenderIdHook() {\n  // This should be called immediately after every finishHooks call.\n  // Conceptually, it's part of the return value of finishHooks; it's only a\n  // separate function to avoid using an array tuple.\n  const didRenderIdHook = localIdCounter !== 0;\n  return didRenderIdHook;\n}\n\n// Reset the internal hooks state if an error occurs while rendering a component\nexport function resetHooksState(): void {\n  if (__DEV__) {\n    isInHookUserCodeInDev = false;\n  }\n\n  currentlyRenderingComponent = null;\n  currentlyRenderingTask = null;\n  didScheduleRenderPhaseUpdate = false;\n  firstWorkInProgressHook = null;\n  numberOfReRenders = 0;\n  renderPhaseUpdates = null;\n  workInProgressHook = null;\n}\n\nfunction getCacheForType<T>(resourceType: () => T): T {\n  // TODO: This should silently mark this as client rendered since it's not necessarily\n  // considered an error. It needs to work for things like Flight though.\n  throw new Error('Not implemented.');\n}\n\nfunction readContext<T>(context: ReactContext<T>): T {\n  if (__DEV__) {\n    if (isInHookUserCodeInDev) {\n      console.error(\n        'Context can only be read while React is rendering. ' +\n          'In classes, you can read it in the render method or getDerivedStateFromProps. ' +\n          'In function components, you can read it directly in the function body, but not ' +\n          'inside Hooks like useReducer() or useMemo().',\n      );\n    }\n  }\n  return readContextImpl(context);\n}\n\nfunction useContext<T>(context: ReactContext<T>): T {\n  if (__DEV__) {\n    currentHookNameInDev = 'useContext';\n  }\n  resolveCurrentlyRenderingComponent();\n  return readContextImpl(context);\n}\n\nfunction basicStateReducer<S>(state: S, action: BasicStateAction<S>): S {\n  // $FlowFixMe: Flow doesn't like mixed types\n  return typeof action === 'function' ? action(state) : action;\n}\n\nexport function useState<S>(\n  initialState: (() => S) | S,\n): [S, Dispatch<BasicStateAction<S>>] {\n  if (__DEV__) {\n    currentHookNameInDev = 'useState';\n  }\n  return useReducer(\n    basicStateReducer,\n    // useReducer has a special case to support lazy useState initializers\n    (initialState: any),\n  );\n}\n\nexport function useReducer<S, I, A>(\n  reducer: (S, A) => S,\n  initialArg: I,\n  init?: I => S,\n): [S, Dispatch<A>] {\n  if (__DEV__) {\n    if (reducer !== basicStateReducer) {\n      currentHookNameInDev = 'useReducer';\n    }\n  }\n  currentlyRenderingComponent = resolveCurrentlyRenderingComponent();\n  workInProgressHook = createWorkInProgressHook();\n  if (isReRender) {\n    // This is a re-render. Apply the new render phase updates to the previous\n    // current hook.\n    const queue: UpdateQueue<A> = (workInProgressHook.queue: any);\n    const dispatch: Dispatch<A> = (queue.dispatch: any);\n    if (renderPhaseUpdates !== null) {\n      // Render phase updates are stored in a map of queue -> linked list\n      const firstRenderPhaseUpdate = renderPhaseUpdates.get(queue);\n      if (firstRenderPhaseUpdate !== undefined) {\n        renderPhaseUpdates.delete(queue);\n        let newState = workInProgressHook.memoizedState;\n        let update = firstRenderPhaseUpdate;\n        do {\n          // Process this render phase update. We don't have to check the\n          // priority because it will always be the same as the current\n          // render's.\n          const action = update.action;\n          if (__DEV__) {\n            isInHookUserCodeInDev = true;\n          }\n          newState = reducer(newState, action);\n          if (__DEV__) {\n            isInHookUserCodeInDev = false;\n          }\n          update = update.next;\n        } while (update !== null);\n\n        workInProgressHook.memoizedState = newState;\n\n        return [newState, dispatch];\n      }\n    }\n    return [workInProgressHook.memoizedState, dispatch];\n  } else {\n    if (__DEV__) {\n      isInHookUserCodeInDev = true;\n    }\n    let initialState;\n    if (reducer === basicStateReducer) {\n      // Special case for `useState`.\n      initialState =\n        typeof initialArg === 'function'\n          ? ((initialArg: any): () => S)()\n          : ((initialArg: any): S);\n    } else {\n      initialState =\n        init !== undefined ? init(initialArg) : ((initialArg: any): S);\n    }\n    if (__DEV__) {\n      isInHookUserCodeInDev = false;\n    }\n    workInProgressHook.memoizedState = initialState;\n    const queue: UpdateQueue<A> = (workInProgressHook.queue = {\n      last: null,\n      dispatch: null,\n    });\n    const dispatch: Dispatch<A> = (queue.dispatch = (dispatchAction.bind(\n      null,\n      currentlyRenderingComponent,\n      queue,\n    ): any));\n    return [workInProgressHook.memoizedState, dispatch];\n  }\n}\n\nfunction useMemo<T>(nextCreate: () => T, deps: Array<mixed> | void | null): T {\n  currentlyRenderingComponent = resolveCurrentlyRenderingComponent();\n  workInProgressHook = createWorkInProgressHook();\n\n  const nextDeps = deps === undefined ? null : deps;\n\n  if (workInProgressHook !== null) {\n    const prevState = workInProgressHook.memoizedState;\n    if (prevState !== null) {\n      if (nextDeps !== null) {\n        const prevDeps = prevState[1];\n        if (areHookInputsEqual(nextDeps, prevDeps)) {\n          return prevState[0];\n        }\n      }\n    }\n  }\n\n  if (__DEV__) {\n    isInHookUserCodeInDev = true;\n  }\n  const nextValue = nextCreate();\n  if (__DEV__) {\n    isInHookUserCodeInDev = false;\n  }\n  workInProgressHook.memoizedState = [nextValue, nextDeps];\n  return nextValue;\n}\n\nfunction useRef<T>(initialValue: T): {|current: T|} {\n  currentlyRenderingComponent = resolveCurrentlyRenderingComponent();\n  workInProgressHook = createWorkInProgressHook();\n  const previousRef = workInProgressHook.memoizedState;\n  if (previousRef === null) {\n    const ref = {current: initialValue};\n    if (__DEV__) {\n      Object.seal(ref);\n    }\n    workInProgressHook.memoizedState = ref;\n    return ref;\n  } else {\n    return previousRef;\n  }\n}\n\nexport function useLayoutEffect(\n  create: () => (() => void) | void,\n  inputs: Array<mixed> | void | null,\n) {\n  if (__DEV__) {\n    currentHookNameInDev = 'useLayoutEffect';\n    console.error(\n      'useLayoutEffect does nothing on the server, because its effect cannot ' +\n        \"be encoded into the server renderer's output format. This will lead \" +\n        'to a mismatch between the initial, non-hydrated UI and the intended ' +\n        'UI. To avoid this, useLayoutEffect should only be used in ' +\n        'components that render exclusively on the client. ' +\n        'See https://reactjs.org/link/uselayouteffect-ssr for common fixes.',\n    );\n  }\n}\n\nfunction dispatchAction<A>(\n  componentIdentity: Object,\n  queue: UpdateQueue<A>,\n  action: A,\n) {\n  if (numberOfReRenders >= RE_RENDER_LIMIT) {\n    throw new Error(\n      'Too many re-renders. React limits the number of renders to prevent ' +\n        'an infinite loop.',\n    );\n  }\n\n  if (componentIdentity === currentlyRenderingComponent) {\n    // This is a render phase update. Stash it in a lazily-created map of\n    // queue -> linked list of updates. After this render pass, we'll restart\n    // and apply the stashed updates on top of the work-in-progress hook.\n    didScheduleRenderPhaseUpdate = true;\n    const update: Update<A> = {\n      action,\n      next: null,\n    };\n    if (renderPhaseUpdates === null) {\n      renderPhaseUpdates = new Map();\n    }\n    const firstRenderPhaseUpdate = renderPhaseUpdates.get(queue);\n    if (firstRenderPhaseUpdate === undefined) {\n      renderPhaseUpdates.set(queue, update);\n    } else {\n      // Append the update to the end of the list.\n      let lastRenderPhaseUpdate = firstRenderPhaseUpdate;\n      while (lastRenderPhaseUpdate.next !== null) {\n        lastRenderPhaseUpdate = lastRenderPhaseUpdate.next;\n      }\n      lastRenderPhaseUpdate.next = update;\n    }\n  } else {\n    // This means an update has happened after the function component has\n    // returned. On the server this is a no-op. In React Fiber, the update\n    // would be scheduled for a future render.\n  }\n}\n\nexport function useCallback<T>(\n  callback: T,\n  deps: Array<mixed> | void | null,\n): T {\n  return useMemo(() => callback, deps);\n}\n\n// TODO Decide on how to implement this hook for server rendering.\n// If a mutation occurs during render, consider triggering a Suspense boundary\n// and falling back to client rendering.\nfunction useMutableSource<Source, Snapshot>(\n  source: MutableSource<Source>,\n  getSnapshot: MutableSourceGetSnapshotFn<Source, Snapshot>,\n  subscribe: MutableSourceSubscribeFn<Source, Snapshot>,\n): Snapshot {\n  resolveCurrentlyRenderingComponent();\n  return getSnapshot(source._source);\n}\n\nfunction useSyncExternalStore<T>(\n  subscribe: (() => void) => () => void,\n  getSnapshot: () => T,\n  getServerSnapshot?: () => T,\n): T {\n  if (getServerSnapshot === undefined) {\n    throw new Error(\n      'Missing getServerSnapshot, which is required for ' +\n        'server-rendered content. Will revert to client rendering.',\n    );\n  }\n  return getServerSnapshot();\n}\n\nfunction useDeferredValue<T>(value: T): T {\n  resolveCurrentlyRenderingComponent();\n  return value;\n}\n\nfunction unsupportedStartTransition() {\n  throw new Error('startTransition cannot be called during server rendering.');\n}\n\nfunction useTransition(): [\n  boolean,\n  (callback: () => void, options?: StartTransitionOptions) => void,\n] {\n  resolveCurrentlyRenderingComponent();\n  return [false, unsupportedStartTransition];\n}\n\nfunction useId(): string {\n  const task: Task = (currentlyRenderingTask: any);\n  const treeId = getTreeId(task.treeContext);\n\n  const responseState = currentResponseState;\n  if (responseState === null) {\n    throw new Error(\n      'Invalid hook call. Hooks can only be called inside of the body of a function component.',\n    );\n  }\n\n  const localId = localIdCounter++;\n  return makeId(responseState, treeId, localId);\n}\n\nfunction unsupportedRefresh() {\n  throw new Error('Cache cannot be refreshed during server rendering.');\n}\n\nfunction useCacheRefresh(): <T>(?() => T, ?T) => void {\n  return unsupportedRefresh;\n}\n\nfunction noop(): void {}\n\nexport const Dispatcher: DispatcherType = {\n  readContext,\n  useContext,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n  useInsertionEffect: noop,\n  useLayoutEffect,\n  useCallback,\n  // useImperativeHandle is not run in the server environment\n  useImperativeHandle: noop,\n  // Effects are not run in the server environment.\n  useEffect: noop,\n  // Debugging effect\n  useDebugValue: noop,\n  useDeferredValue,\n  useTransition,\n  useId,\n  // Subscriptions are not setup in a server environment.\n  useMutableSource,\n  useSyncExternalStore,\n};\n\nif (enableCache) {\n  Dispatcher.getCacheForType = getCacheForType;\n  Dispatcher.useCacheRefresh = useCacheRefresh;\n}\n\nexport let currentResponseState: null | ResponseState = (null: any);\nexport function setCurrentResponseState(\n  responseState: null | ResponseState,\n): void {\n  currentResponseState = responseState;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  describeBuiltInComponentFrame,\n  describeFunctionComponentFrame,\n  describeClassComponentFrame,\n} from 'shared/ReactComponentStackFrame';\n\n// DEV-only reverse linked list representing the current component stack\ntype BuiltInComponentStackNode = {\n  tag: 0,\n  parent: null | ComponentStackNode,\n  type: string,\n};\ntype FunctionComponentStackNode = {\n  tag: 1,\n  parent: null | ComponentStackNode,\n  type: Function,\n};\ntype ClassComponentStackNode = {\n  tag: 2,\n  parent: null | ComponentStackNode,\n  type: Function,\n};\nexport type ComponentStackNode =\n  | BuiltInComponentStackNode\n  | FunctionComponentStackNode\n  | ClassComponentStackNode;\n\nexport function getStackByComponentStackNode(\n  componentStack: ComponentStackNode,\n): string {\n  try {\n    let info = '';\n    let node = componentStack;\n    do {\n      switch (node.tag) {\n        case 0:\n          info += describeBuiltInComponentFrame(node.type, null, null);\n          break;\n        case 1:\n          info += describeFunctionComponentFrame(node.type, null, null);\n          break;\n        case 2:\n          info += describeClassComponentFrame(node.type, null, null);\n          break;\n      }\n      node = node.parent;\n    } while (node);\n    return info;\n  } catch (x) {\n    return '\\nError generating stack: ' + x.message + '\\n' + x.stack;\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {\n  Destination,\n  Chunk,\n  PrecomputedChunk,\n} from './ReactServerStreamConfig';\nimport type {\n  ReactNodeList,\n  ReactContext,\n  ReactProviderType,\n} from 'shared/ReactTypes';\nimport type {LazyComponent as LazyComponentType} from 'react/src/ReactLazy';\nimport type {\n  SuspenseBoundaryID,\n  ResponseState,\n  FormatContext,\n} from './ReactServerFormatConfig';\nimport type {ContextSnapshot} from './ReactFizzNewContext';\nimport type {ComponentStackNode} from './ReactFizzComponentStack';\nimport type {TreeContext} from './ReactFizzTreeContext';\n\nimport {\n  scheduleWork,\n  beginWriting,\n  writeChunk,\n  writeChunkAndReturn,\n  completeWriting,\n  flushBuffered,\n  close,\n  closeWithError,\n} from './ReactServerStreamConfig';\nimport {\n  writeCompletedRoot,\n  writePlaceholder,\n  writeStartCompletedSuspenseBoundary,\n  writeStartPendingSuspenseBoundary,\n  writeStartClientRenderedSuspenseBoundary,\n  writeEndCompletedSuspenseBoundary,\n  writeEndPendingSuspenseBoundary,\n  writeEndClientRenderedSuspenseBoundary,\n  writeStartSegment,\n  writeEndSegment,\n  writeClientRenderBoundaryInstruction,\n  writeCompletedBoundaryInstruction,\n  writeCompletedSegmentInstruction,\n  pushTextInstance,\n  pushStartInstance,\n  pushEndInstance,\n  pushStartCompletedSuspenseBoundary,\n  pushEndCompletedSuspenseBoundary,\n  pushSegmentFinale,\n  UNINITIALIZED_SUSPENSE_BOUNDARY_ID,\n  assignSuspenseBoundaryID,\n  getChildFormatContext,\n} from './ReactServerFormatConfig';\nimport {\n  constructClassInstance,\n  mountClassInstance,\n} from './ReactFizzClassComponent';\nimport {\n  getMaskedContext,\n  processChildContext,\n  emptyContextObject,\n} from './ReactFizzContext';\nimport {\n  readContext,\n  rootContextSnapshot,\n  switchContext,\n  getActiveContext,\n  pushProvider,\n  popProvider,\n} from './ReactFizzNewContext';\nimport {\n  prepareToUseHooks,\n  finishHooks,\n  checkDidRenderIdHook,\n  resetHooksState,\n  Dispatcher,\n  currentResponseState,\n  setCurrentResponseState,\n} from './ReactFizzHooks';\nimport {getStackByComponentStackNode} from './ReactFizzComponentStack';\nimport {emptyTreeContext, pushTreeContext} from './ReactFizzTreeContext';\n\nimport {\n  getIteratorFn,\n  REACT_ELEMENT_TYPE,\n  REACT_PORTAL_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_SUSPENSE_TYPE,\n  REACT_LEGACY_HIDDEN_TYPE,\n  REACT_DEBUG_TRACING_MODE_TYPE,\n  REACT_STRICT_MODE_TYPE,\n  REACT_PROFILER_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_PROVIDER_TYPE,\n  REACT_CONTEXT_TYPE,\n  REACT_SCOPE_TYPE,\n} from 'shared/ReactSymbols';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport {\n  disableLegacyContext,\n  disableModulePatternComponents,\n  warnAboutDefaultPropsOnFunctionComponents,\n  enableScopeAPI,\n  enableSuspenseAvoidThisFallbackFizz,\n} from 'shared/ReactFeatureFlags';\n\nimport assign from 'shared/assign';\nimport getComponentNameFromType from 'shared/getComponentNameFromType';\nimport isArray from 'shared/isArray';\n\nconst ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nconst ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\ntype LegacyContext = {\n  [key: string]: any,\n};\n\ntype SuspenseBoundary = {\n  id: SuspenseBoundaryID,\n  rootSegmentID: number,\n  errorDigest: ?string, // the error hash if it errors\n  errorMessage?: string, // the error string if it errors\n  errorComponentStack?: string, // the error component stack if it errors\n  forceClientRender: boolean, // if it errors or infinitely suspends\n  parentFlushed: boolean,\n  pendingTasks: number, // when it reaches zero we can show this boundary's content\n  completedSegments: Array<Segment>, // completed but not yet flushed segments.\n  byteSize: number, // used to determine whether to inline children boundaries.\n  fallbackAbortableTasks: Set<Task>, // used to cancel task on the fallback if the boundary completes or gets canceled.\n};\n\nexport type Task = {\n  node: ReactNodeList,\n  ping: () => void,\n  blockedBoundary: Root | SuspenseBoundary,\n  blockedSegment: Segment, // the segment we'll write to\n  abortSet: Set<Task>, // the abortable set that this task belongs to\n  legacyContext: LegacyContext, // the current legacy context that this task is executing in\n  context: ContextSnapshot, // the current new context that this task is executing in\n  treeContext: TreeContext, // the current tree context that this task is executing in\n  componentStack: null | ComponentStackNode, // DEV-only component stack\n};\n\nconst PENDING = 0;\nconst COMPLETED = 1;\nconst FLUSHED = 2;\nconst ABORTED = 3;\nconst ERRORED = 4;\n\ntype Root = null;\n\ntype Segment = {\n  status: 0 | 1 | 2 | 3 | 4,\n  parentFlushed: boolean, // typically a segment will be flushed by its parent, except if its parent was already flushed\n  id: number, // starts as 0 and is lazily assigned if the parent flushes early\n  +index: number, // the index within the parent's chunks or 0 at the root\n  +chunks: Array<Chunk | PrecomputedChunk>,\n  +children: Array<Segment>,\n  // The context that this segment was created in.\n  formatContext: FormatContext,\n  // If this segment represents a fallback, this is the content that will replace that fallback.\n  +boundary: null | SuspenseBoundary,\n  // used to discern when text separator boundaries are needed\n  lastPushedText: boolean,\n  textEmbedded: boolean,\n};\n\nconst OPEN = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\nexport opaque type Request = {\n  destination: null | Destination,\n  +responseState: ResponseState,\n  +progressiveChunkSize: number,\n  status: 0 | 1 | 2,\n  fatalError: mixed,\n  nextSegmentId: number,\n  allPendingTasks: number, // when it reaches zero, we can close the connection.\n  pendingRootTasks: number, // when this reaches zero, we've finished at least the root boundary.\n  completedRootSegment: null | Segment, // Completed but not yet flushed root segments.\n  abortableTasks: Set<Task>,\n  pingedTasks: Array<Task>,\n  // Queues to flush in order of priority\n  clientRenderedBoundaries: Array<SuspenseBoundary>, // Errored or client rendered but not yet flushed.\n  completedBoundaries: Array<SuspenseBoundary>, // Completed but not yet fully flushed boundaries to show.\n  partialBoundaries: Array<SuspenseBoundary>, // Partially completed boundaries that can flush its segments early.\n  // onError is called when an error happens anywhere in the tree. It might recover.\n  // The return string is used in production  primarily to avoid leaking internals, secondarily to save bytes.\n  // Returning null/undefined will cause a defualt error message in production\n  onError: (error: mixed) => ?string,\n  // onAllReady is called when all pending task is done but it may not have flushed yet.\n  // This is a good time to start writing if you want only HTML and no intermediate steps.\n  onAllReady: () => void,\n  // onShellReady is called when there is at least a root fallback ready to show.\n  // Typically you don't need this callback because it's best practice to always have a\n  // root fallback ready so there's no need to wait.\n  onShellReady: () => void,\n  // onShellError is called when the shell didn't complete. That means you probably want to\n  // emit a different response to the stream instead.\n  onShellError: (error: mixed) => void,\n  onFatalError: (error: mixed) => void,\n};\n\n// This is a default heuristic for how to split up the HTML content into progressive\n// loading. Our goal is to be able to display additional new content about every 500ms.\n// Faster than that is unnecessary and should be throttled on the client. It also\n// adds unnecessary overhead to do more splits. We don't know if it's a higher or lower\n// end device but higher end suffer less from the overhead than lower end does from\n// not getting small enough pieces. We error on the side of low end.\n// We base this on low end 3G speeds which is about 500kbits per second. We assume\n// that there can be a reasonable drop off from max bandwidth which leaves you with\n// as little as 80%. We can receive half of that each 500ms - at best. In practice,\n// a little bandwidth is lost to processing and contention - e.g. CSS and images that\n// are downloaded along with the main content. So we estimate about half of that to be\n// the lower end throughput. In other words, we expect that you can at least show\n// about 12.5kb of content per 500ms. Not counting starting latency for the first\n// paint.\n// 500 * 1024 / 8 * .8 * 0.5 / 2\nconst DEFAULT_PROGRESSIVE_CHUNK_SIZE = 12800;\n\nfunction defaultErrorHandler(error: mixed) {\n  console['error'](error); // Don't transform to our wrapper\n  return null;\n}\n\nfunction noop(): void {}\n\nexport function createRequest(\n  children: ReactNodeList,\n  responseState: ResponseState,\n  rootFormatContext: FormatContext,\n  progressiveChunkSize: void | number,\n  onError: void | ((error: mixed) => ?string),\n  onAllReady: void | (() => void),\n  onShellReady: void | (() => void),\n  onShellError: void | ((error: mixed) => void),\n  onFatalError: void | ((error: mixed) => void),\n): Request {\n  const pingedTasks = [];\n  const abortSet: Set<Task> = new Set();\n  const request = {\n    destination: null,\n    responseState,\n    progressiveChunkSize:\n      progressiveChunkSize === undefined\n        ? DEFAULT_PROGRESSIVE_CHUNK_SIZE\n        : progressiveChunkSize,\n    status: OPEN,\n    fatalError: null,\n    nextSegmentId: 0,\n    allPendingTasks: 0,\n    pendingRootTasks: 0,\n    completedRootSegment: null,\n    abortableTasks: abortSet,\n    pingedTasks: pingedTasks,\n    clientRenderedBoundaries: [],\n    completedBoundaries: [],\n    partialBoundaries: [],\n    onError: onError === undefined ? defaultErrorHandler : onError,\n    onAllReady: onAllReady === undefined ? noop : onAllReady,\n    onShellReady: onShellReady === undefined ? noop : onShellReady,\n    onShellError: onShellError === undefined ? noop : onShellError,\n    onFatalError: onFatalError === undefined ? noop : onFatalError,\n  };\n  // This segment represents the root fallback.\n  const rootSegment = createPendingSegment(\n    request,\n    0,\n    null,\n    rootFormatContext,\n    // Root segments are never embedded in Text on either edge\n    false,\n    false,\n  );\n  // There is no parent so conceptually, we're unblocked to flush this segment.\n  rootSegment.parentFlushed = true;\n  const rootTask = createTask(\n    request,\n    children,\n    null,\n    rootSegment,\n    abortSet,\n    emptyContextObject,\n    rootContextSnapshot,\n    emptyTreeContext,\n  );\n  pingedTasks.push(rootTask);\n  return request;\n}\n\nfunction pingTask(request: Request, task: Task): void {\n  const pingedTasks = request.pingedTasks;\n  pingedTasks.push(task);\n  if (pingedTasks.length === 1) {\n    scheduleWork(() => performWork(request));\n  }\n}\n\nfunction createSuspenseBoundary(\n  request: Request,\n  fallbackAbortableTasks: Set<Task>,\n): SuspenseBoundary {\n  return {\n    id: UNINITIALIZED_SUSPENSE_BOUNDARY_ID,\n    rootSegmentID: -1,\n    parentFlushed: false,\n    pendingTasks: 0,\n    forceClientRender: false,\n    completedSegments: [],\n    byteSize: 0,\n    fallbackAbortableTasks,\n    errorDigest: null,\n  };\n}\n\nfunction createTask(\n  request: Request,\n  node: ReactNodeList,\n  blockedBoundary: Root | SuspenseBoundary,\n  blockedSegment: Segment,\n  abortSet: Set<Task>,\n  legacyContext: LegacyContext,\n  context: ContextSnapshot,\n  treeContext: TreeContext,\n): Task {\n  request.allPendingTasks++;\n  if (blockedBoundary === null) {\n    request.pendingRootTasks++;\n  } else {\n    blockedBoundary.pendingTasks++;\n  }\n  const task: Task = ({\n    node,\n    ping: () => pingTask(request, task),\n    blockedBoundary,\n    blockedSegment,\n    abortSet,\n    legacyContext,\n    context,\n    treeContext,\n  }: any);\n  if (__DEV__) {\n    task.componentStack = null;\n  }\n  abortSet.add(task);\n  return task;\n}\n\nfunction createPendingSegment(\n  request: Request,\n  index: number,\n  boundary: null | SuspenseBoundary,\n  formatContext: FormatContext,\n  lastPushedText: boolean,\n  textEmbedded: boolean,\n): Segment {\n  return {\n    status: PENDING,\n    id: -1, // lazily assigned later\n    index,\n    parentFlushed: false,\n    chunks: [],\n    children: [],\n    formatContext,\n    boundary,\n    lastPushedText,\n    textEmbedded,\n  };\n}\n\n// DEV-only global reference to the currently executing task\nlet currentTaskInDEV: null | Task = null;\nfunction getCurrentStackInDEV(): string {\n  if (__DEV__) {\n    if (currentTaskInDEV === null || currentTaskInDEV.componentStack === null) {\n      return '';\n    }\n    return getStackByComponentStackNode(currentTaskInDEV.componentStack);\n  }\n  return '';\n}\n\nfunction pushBuiltInComponentStackInDEV(task: Task, type: string): void {\n  if (__DEV__) {\n    task.componentStack = {\n      tag: 0,\n      parent: task.componentStack,\n      type,\n    };\n  }\n}\nfunction pushFunctionComponentStackInDEV(task: Task, type: Function): void {\n  if (__DEV__) {\n    task.componentStack = {\n      tag: 1,\n      parent: task.componentStack,\n      type,\n    };\n  }\n}\nfunction pushClassComponentStackInDEV(task: Task, type: Function): void {\n  if (__DEV__) {\n    task.componentStack = {\n      tag: 2,\n      parent: task.componentStack,\n      type,\n    };\n  }\n}\nfunction popComponentStackInDEV(task: Task): void {\n  if (__DEV__) {\n    if (task.componentStack === null) {\n      console.error(\n        'Unexpectedly popped too many stack frames. This is a bug in React.',\n      );\n    } else {\n      task.componentStack = task.componentStack.parent;\n    }\n  }\n}\n\n// stash the component stack of an unwinding error until it is processed\nlet lastBoundaryErrorComponentStackDev: ?string = null;\n\nfunction captureBoundaryErrorDetailsDev(\n  boundary: SuspenseBoundary,\n  error: mixed,\n) {\n  if (__DEV__) {\n    let errorMessage;\n    if (typeof error === 'string') {\n      errorMessage = error;\n    } else if (error && typeof error.message === 'string') {\n      errorMessage = error.message;\n    } else {\n      // eslint-disable-next-line react-internal/safe-string-coercion\n      errorMessage = String(error);\n    }\n\n    const errorComponentStack =\n      lastBoundaryErrorComponentStackDev || getCurrentStackInDEV();\n    lastBoundaryErrorComponentStackDev = null;\n\n    boundary.errorMessage = errorMessage;\n    boundary.errorComponentStack = errorComponentStack;\n  }\n}\n\nfunction logRecoverableError(request: Request, error: any): ?string {\n  // If this callback errors, we intentionally let that error bubble up to become a fatal error\n  // so that someone fixes the error reporting instead of hiding it.\n  const errorDigest = request.onError(error);\n  if (errorDigest != null && typeof errorDigest !== 'string') {\n    // eslint-disable-next-line react-internal/prod-error-codes\n    throw new Error(\n      `onError returned something with a type other than \"string\". onError should return a string and may return null or undefined but must not return anything else. It received something of type \"${typeof errorDigest}\" instead`,\n    );\n  }\n  return errorDigest;\n}\n\nfunction fatalError(request: Request, error: mixed): void {\n  // This is called outside error handling code such as if the root errors outside\n  // a suspense boundary or if the root suspense boundary's fallback errors.\n  // It's also called if React itself or its host configs errors.\n  const onShellError = request.onShellError;\n  onShellError(error);\n  const onFatalError = request.onFatalError;\n  onFatalError(error);\n  if (request.destination !== null) {\n    request.status = CLOSED;\n    closeWithError(request.destination, error);\n  } else {\n    request.status = CLOSING;\n    request.fatalError = error;\n  }\n}\n\nfunction renderSuspenseBoundary(\n  request: Request,\n  task: Task,\n  props: Object,\n): void {\n  pushBuiltInComponentStackInDEV(task, 'Suspense');\n  const parentBoundary = task.blockedBoundary;\n  const parentSegment = task.blockedSegment;\n\n  // Each time we enter a suspense boundary, we split out into a new segment for\n  // the fallback so that we can later replace that segment with the content.\n  // This also lets us split out the main content even if it doesn't suspend,\n  // in case it ends up generating a large subtree of content.\n  const fallback: ReactNodeList = props.fallback;\n  const content: ReactNodeList = props.children;\n\n  const fallbackAbortSet: Set<Task> = new Set();\n  const newBoundary = createSuspenseBoundary(request, fallbackAbortSet);\n  const insertionIndex = parentSegment.chunks.length;\n  // The children of the boundary segment is actually the fallback.\n  const boundarySegment = createPendingSegment(\n    request,\n    insertionIndex,\n    newBoundary,\n    parentSegment.formatContext,\n    // boundaries never require text embedding at their edges because comment nodes bound them\n    false,\n    false,\n  );\n  parentSegment.children.push(boundarySegment);\n  // The parentSegment has a child Segment at this index so we reset the lastPushedText marker on the parent\n  parentSegment.lastPushedText = false;\n\n  // This segment is the actual child content. We can start rendering that immediately.\n  const contentRootSegment = createPendingSegment(\n    request,\n    0,\n    null,\n    parentSegment.formatContext,\n    // boundaries never require text embedding at their edges because comment nodes bound them\n    false,\n    false,\n  );\n  // We mark the root segment as having its parent flushed. It's not really flushed but there is\n  // no parent segment so there's nothing to wait on.\n  contentRootSegment.parentFlushed = true;\n\n  // Currently this is running synchronously. We could instead schedule this to pingedTasks.\n  // I suspect that there might be some efficiency benefits from not creating the suspended task\n  // and instead just using the stack if possible.\n  // TODO: Call this directly instead of messing with saving and restoring contexts.\n\n  // We can reuse the current context and task to render the content immediately without\n  // context switching. We just need to temporarily switch which boundary and which segment\n  // we're writing to. If something suspends, it'll spawn new suspended task with that context.\n  task.blockedBoundary = newBoundary;\n  task.blockedSegment = contentRootSegment;\n  try {\n    // We use the safe form because we don't handle suspending here. Only error handling.\n    renderNode(request, task, content);\n    pushSegmentFinale(\n      contentRootSegment.chunks,\n      request.responseState,\n      contentRootSegment.lastPushedText,\n      contentRootSegment.textEmbedded,\n    );\n    contentRootSegment.status = COMPLETED;\n    queueCompletedSegment(newBoundary, contentRootSegment);\n    if (newBoundary.pendingTasks === 0) {\n      // This must have been the last segment we were waiting on. This boundary is now complete.\n      // Therefore we won't need the fallback. We early return so that we don't have to create\n      // the fallback.\n      popComponentStackInDEV(task);\n      return;\n    }\n  } catch (error) {\n    contentRootSegment.status = ERRORED;\n    newBoundary.forceClientRender = true;\n    newBoundary.errorDigest = logRecoverableError(request, error);\n    if (__DEV__) {\n      captureBoundaryErrorDetailsDev(newBoundary, error);\n    }\n\n    // We don't need to decrement any task numbers because we didn't spawn any new task.\n    // We don't need to schedule any task because we know the parent has written yet.\n    // We do need to fallthrough to create the fallback though.\n  } finally {\n    task.blockedBoundary = parentBoundary;\n    task.blockedSegment = parentSegment;\n  }\n\n  // We create suspended task for the fallback because we don't want to actually work\n  // on it yet in case we finish the main content, so we queue for later.\n  const suspendedFallbackTask = createTask(\n    request,\n    fallback,\n    parentBoundary,\n    boundarySegment,\n    fallbackAbortSet,\n    task.legacyContext,\n    task.context,\n    task.treeContext,\n  );\n  if (__DEV__) {\n    suspendedFallbackTask.componentStack = task.componentStack;\n  }\n  // TODO: This should be queued at a separate lower priority queue so that we only work\n  // on preparing fallbacks if we don't have any more main content to task on.\n  request.pingedTasks.push(suspendedFallbackTask);\n\n  popComponentStackInDEV(task);\n}\n\nfunction renderBackupSuspenseBoundary(\n  request: Request,\n  task: Task,\n  props: Object,\n) {\n  pushBuiltInComponentStackInDEV(task, 'Suspense');\n\n  const content = props.children;\n  const segment = task.blockedSegment;\n\n  pushStartCompletedSuspenseBoundary(segment.chunks);\n  renderNode(request, task, content);\n  pushEndCompletedSuspenseBoundary(segment.chunks);\n\n  popComponentStackInDEV(task);\n}\n\nfunction renderHostElement(\n  request: Request,\n  task: Task,\n  type: string,\n  props: Object,\n): void {\n  pushBuiltInComponentStackInDEV(task, type);\n  const segment = task.blockedSegment;\n  const children = pushStartInstance(\n    segment.chunks,\n    type,\n    props,\n    request.responseState,\n    segment.formatContext,\n  );\n  segment.lastPushedText = false;\n  const prevContext = segment.formatContext;\n  segment.formatContext = getChildFormatContext(prevContext, type, props);\n  // We use the non-destructive form because if something suspends, we still\n  // need to pop back up and finish this subtree of HTML.\n  renderNode(request, task, children);\n\n  // We expect that errors will fatal the whole task and that we don't need\n  // the correct context. Therefore this is not in a finally.\n  segment.formatContext = prevContext;\n  pushEndInstance(segment.chunks, type, props);\n  segment.lastPushedText = false;\n  popComponentStackInDEV(task);\n}\n\nfunction shouldConstruct(Component) {\n  return Component.prototype && Component.prototype.isReactComponent;\n}\n\nfunction renderWithHooks<Props, SecondArg>(\n  request: Request,\n  task: Task,\n  Component: (p: Props, arg: SecondArg) => any,\n  props: Props,\n  secondArg: SecondArg,\n): any {\n  const componentIdentity = {};\n  prepareToUseHooks(task, componentIdentity);\n  const result = Component(props, secondArg);\n  return finishHooks(Component, props, result, secondArg);\n}\n\nfunction finishClassComponent(\n  request: Request,\n  task: Task,\n  instance: any,\n  Component: any,\n  props: any,\n): ReactNodeList {\n  const nextChildren = instance.render();\n\n  if (__DEV__) {\n    if (instance.props !== props) {\n      if (!didWarnAboutReassigningProps) {\n        console.error(\n          'It looks like %s is reassigning its own `this.props` while rendering. ' +\n            'This is not supported and can lead to confusing bugs.',\n          getComponentNameFromType(Component) || 'a component',\n        );\n      }\n      didWarnAboutReassigningProps = true;\n    }\n  }\n\n  if (!disableLegacyContext) {\n    const childContextTypes = Component.childContextTypes;\n    if (childContextTypes !== null && childContextTypes !== undefined) {\n      const previousContext = task.legacyContext;\n      const mergedContext = processChildContext(\n        instance,\n        Component,\n        previousContext,\n        childContextTypes,\n      );\n      task.legacyContext = mergedContext;\n      renderNodeDestructive(request, task, nextChildren);\n      task.legacyContext = previousContext;\n      return;\n    }\n  }\n\n  renderNodeDestructive(request, task, nextChildren);\n}\n\nfunction renderClassComponent(\n  request: Request,\n  task: Task,\n  Component: any,\n  props: any,\n): void {\n  pushClassComponentStackInDEV(task, Component);\n  const maskedContext = !disableLegacyContext\n    ? getMaskedContext(Component, task.legacyContext)\n    : undefined;\n  const instance = constructClassInstance(Component, props, maskedContext);\n  mountClassInstance(instance, Component, props, maskedContext);\n  finishClassComponent(request, task, instance, Component, props);\n  popComponentStackInDEV(task);\n}\n\nconst didWarnAboutBadClass = {};\nconst didWarnAboutModulePatternComponent = {};\nconst didWarnAboutContextTypeOnFunctionComponent = {};\nconst didWarnAboutGetDerivedStateOnFunctionComponent = {};\nlet didWarnAboutReassigningProps = false;\nconst didWarnAboutDefaultPropsOnFunctionComponent = {};\nlet didWarnAboutGenerators = false;\nlet didWarnAboutMaps = false;\nlet hasWarnedAboutUsingContextAsConsumer = false;\n\n// This would typically be a function component but we still support module pattern\n// components for some reason.\nfunction renderIndeterminateComponent(\n  request: Request,\n  task: Task,\n  Component: any,\n  props: any,\n): void {\n  let legacyContext;\n  if (!disableLegacyContext) {\n    legacyContext = getMaskedContext(Component, task.legacyContext);\n  }\n  pushFunctionComponentStackInDEV(task, Component);\n\n  if (__DEV__) {\n    if (\n      Component.prototype &&\n      typeof Component.prototype.render === 'function'\n    ) {\n      const componentName = getComponentNameFromType(Component) || 'Unknown';\n\n      if (!didWarnAboutBadClass[componentName]) {\n        console.error(\n          \"The <%s /> component appears to have a render method, but doesn't extend React.Component. \" +\n            'This is likely to cause errors. Change %s to extend React.Component instead.',\n          componentName,\n          componentName,\n        );\n        didWarnAboutBadClass[componentName] = true;\n      }\n    }\n  }\n\n  const value = renderWithHooks(request, task, Component, props, legacyContext);\n  const hasId = checkDidRenderIdHook();\n\n  if (__DEV__) {\n    // Support for module components is deprecated and is removed behind a flag.\n    // Whether or not it would crash later, we want to show a good message in DEV first.\n    if (\n      typeof value === 'object' &&\n      value !== null &&\n      typeof value.render === 'function' &&\n      value.$$typeof === undefined\n    ) {\n      const componentName = getComponentNameFromType(Component) || 'Unknown';\n      if (!didWarnAboutModulePatternComponent[componentName]) {\n        console.error(\n          'The <%s /> component appears to be a function component that returns a class instance. ' +\n            'Change %s to a class that extends React.Component instead. ' +\n            \"If you can't use a class try assigning the prototype on the function as a workaround. \" +\n            \"`%s.prototype = React.Component.prototype`. Don't use an arrow function since it \" +\n            'cannot be called with `new` by React.',\n          componentName,\n          componentName,\n          componentName,\n        );\n        didWarnAboutModulePatternComponent[componentName] = true;\n      }\n    }\n  }\n\n  if (\n    // Run these checks in production only if the flag is off.\n    // Eventually we'll delete this branch altogether.\n    !disableModulePatternComponents &&\n    typeof value === 'object' &&\n    value !== null &&\n    typeof value.render === 'function' &&\n    value.$$typeof === undefined\n  ) {\n    if (__DEV__) {\n      const componentName = getComponentNameFromType(Component) || 'Unknown';\n      if (!didWarnAboutModulePatternComponent[componentName]) {\n        console.error(\n          'The <%s /> component appears to be a function component that returns a class instance. ' +\n            'Change %s to a class that extends React.Component instead. ' +\n            \"If you can't use a class try assigning the prototype on the function as a workaround. \" +\n            \"`%s.prototype = React.Component.prototype`. Don't use an arrow function since it \" +\n            'cannot be called with `new` by React.',\n          componentName,\n          componentName,\n          componentName,\n        );\n        didWarnAboutModulePatternComponent[componentName] = true;\n      }\n    }\n\n    mountClassInstance(value, Component, props, legacyContext);\n    finishClassComponent(request, task, value, Component, props);\n  } else {\n    // Proceed under the assumption that this is a function component\n    if (__DEV__) {\n      if (disableLegacyContext && Component.contextTypes) {\n        console.error(\n          '%s uses the legacy contextTypes API which is no longer supported. ' +\n            'Use React.createContext() with React.useContext() instead.',\n          getComponentNameFromType(Component) || 'Unknown',\n        );\n      }\n    }\n    if (__DEV__) {\n      validateFunctionComponentInDev(Component);\n    }\n    // We're now successfully past this task, and we don't have to pop back to\n    // the previous task every again, so we can use the destructive recursive form.\n    if (hasId) {\n      // This component materialized an id. We treat this as its own level, with\n      // a single \"child\" slot.\n      const prevTreeContext = task.treeContext;\n      const totalChildren = 1;\n      const index = 0;\n      task.treeContext = pushTreeContext(prevTreeContext, totalChildren, index);\n      try {\n        renderNodeDestructive(request, task, value);\n      } finally {\n        task.treeContext = prevTreeContext;\n      }\n    } else {\n      renderNodeDestructive(request, task, value);\n    }\n  }\n  popComponentStackInDEV(task);\n}\n\nfunction validateFunctionComponentInDev(Component: any): void {\n  if (__DEV__) {\n    if (Component) {\n      if (Component.childContextTypes) {\n        console.error(\n          '%s(...): childContextTypes cannot be defined on a function component.',\n          Component.displayName || Component.name || 'Component',\n        );\n      }\n    }\n\n    if (\n      warnAboutDefaultPropsOnFunctionComponents &&\n      Component.defaultProps !== undefined\n    ) {\n      const componentName = getComponentNameFromType(Component) || 'Unknown';\n\n      if (!didWarnAboutDefaultPropsOnFunctionComponent[componentName]) {\n        console.error(\n          '%s: Support for defaultProps will be removed from function components ' +\n            'in a future major release. Use JavaScript default parameters instead.',\n          componentName,\n        );\n        didWarnAboutDefaultPropsOnFunctionComponent[componentName] = true;\n      }\n    }\n\n    if (typeof Component.getDerivedStateFromProps === 'function') {\n      const componentName = getComponentNameFromType(Component) || 'Unknown';\n\n      if (!didWarnAboutGetDerivedStateOnFunctionComponent[componentName]) {\n        console.error(\n          '%s: Function components do not support getDerivedStateFromProps.',\n          componentName,\n        );\n        didWarnAboutGetDerivedStateOnFunctionComponent[componentName] = true;\n      }\n    }\n\n    if (\n      typeof Component.contextType === 'object' &&\n      Component.contextType !== null\n    ) {\n      const componentName = getComponentNameFromType(Component) || 'Unknown';\n\n      if (!didWarnAboutContextTypeOnFunctionComponent[componentName]) {\n        console.error(\n          '%s: Function components do not support contextType.',\n          componentName,\n        );\n        didWarnAboutContextTypeOnFunctionComponent[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction resolveDefaultProps(Component: any, baseProps: Object): Object {\n  if (Component && Component.defaultProps) {\n    // Resolve default props. Taken from ReactElement\n    const props = assign({}, baseProps);\n    const defaultProps = Component.defaultProps;\n    for (const propName in defaultProps) {\n      if (props[propName] === undefined) {\n        props[propName] = defaultProps[propName];\n      }\n    }\n    return props;\n  }\n  return baseProps;\n}\n\nfunction renderForwardRef(\n  request: Request,\n  task: Task,\n  type: any,\n  props: Object,\n  ref: any,\n): void {\n  pushFunctionComponentStackInDEV(task, type.render);\n  const children = renderWithHooks(request, task, type.render, props, ref);\n  const hasId = checkDidRenderIdHook();\n  if (hasId) {\n    // This component materialized an id. We treat this as its own level, with\n    // a single \"child\" slot.\n    const prevTreeContext = task.treeContext;\n    const totalChildren = 1;\n    const index = 0;\n    task.treeContext = pushTreeContext(prevTreeContext, totalChildren, index);\n    try {\n      renderNodeDestructive(request, task, children);\n    } finally {\n      task.treeContext = prevTreeContext;\n    }\n  } else {\n    renderNodeDestructive(request, task, children);\n  }\n  popComponentStackInDEV(task);\n}\n\nfunction renderMemo(\n  request: Request,\n  task: Task,\n  type: any,\n  props: Object,\n  ref: any,\n): void {\n  const innerType = type.type;\n  const resolvedProps = resolveDefaultProps(innerType, props);\n  renderElement(request, task, innerType, resolvedProps, ref);\n}\n\nfunction renderContextConsumer(\n  request: Request,\n  task: Task,\n  context: ReactContext<any>,\n  props: Object,\n): void {\n  // The logic below for Context differs depending on PROD or DEV mode. In\n  // DEV mode, we create a separate object for Context.Consumer that acts\n  // like a proxy to Context. This proxy object adds unnecessary code in PROD\n  // so we use the old behaviour (Context.Consumer references Context) to\n  // reduce size and overhead. The separate object references context via\n  // a property called \"_context\", which also gives us the ability to check\n  // in DEV mode if this property exists or not and warn if it does not.\n  if (__DEV__) {\n    if ((context: any)._context === undefined) {\n      // This may be because it's a Context (rather than a Consumer).\n      // Or it may be because it's older React where they're the same thing.\n      // We only want to warn if we're sure it's a new React.\n      if (context !== context.Consumer) {\n        if (!hasWarnedAboutUsingContextAsConsumer) {\n          hasWarnedAboutUsingContextAsConsumer = true;\n          console.error(\n            'Rendering <Context> directly is not supported and will be removed in ' +\n              'a future major release. Did you mean to render <Context.Consumer> instead?',\n          );\n        }\n      }\n    } else {\n      context = (context: any)._context;\n    }\n  }\n  const render = props.children;\n\n  if (__DEV__) {\n    if (typeof render !== 'function') {\n      console.error(\n        'A context consumer was rendered with multiple children, or a child ' +\n          \"that isn't a function. A context consumer expects a single child \" +\n          'that is a function. If you did pass a function, make sure there ' +\n          'is no trailing or leading whitespace around it.',\n      );\n    }\n  }\n\n  const newValue = readContext(context);\n  const newChildren = render(newValue);\n\n  renderNodeDestructive(request, task, newChildren);\n}\n\nfunction renderContextProvider(\n  request: Request,\n  task: Task,\n  type: ReactProviderType<any>,\n  props: Object,\n): void {\n  const context = type._context;\n  const value = props.value;\n  const children = props.children;\n  let prevSnapshot;\n  if (__DEV__) {\n    prevSnapshot = task.context;\n  }\n  task.context = pushProvider(context, value);\n  renderNodeDestructive(request, task, children);\n  task.context = popProvider(context);\n  if (__DEV__) {\n    if (prevSnapshot !== task.context) {\n      console.error(\n        'Popping the context provider did not return back to the original snapshot. This is a bug in React.',\n      );\n    }\n  }\n}\n\nfunction renderLazyComponent(\n  request: Request,\n  task: Task,\n  lazyComponent: LazyComponentType<any, any>,\n  props: Object,\n  ref: any,\n): void {\n  pushBuiltInComponentStackInDEV(task, 'Lazy');\n  const payload = lazyComponent._payload;\n  const init = lazyComponent._init;\n  const Component = init(payload);\n  const resolvedProps = resolveDefaultProps(Component, props);\n  renderElement(request, task, Component, resolvedProps, ref);\n  popComponentStackInDEV(task);\n}\n\nfunction renderElement(\n  request: Request,\n  task: Task,\n  type: any,\n  props: Object,\n  ref: any,\n): void {\n  if (typeof type === 'function') {\n    if (shouldConstruct(type)) {\n      renderClassComponent(request, task, type, props);\n      return;\n    } else {\n      renderIndeterminateComponent(request, task, type, props);\n      return;\n    }\n  }\n  if (typeof type === 'string') {\n    renderHostElement(request, task, type, props);\n    return;\n  }\n\n  switch (type) {\n    // TODO: LegacyHidden acts the same as a fragment. This only works\n    // because we currently assume that every instance of LegacyHidden is\n    // accompanied by a host component wrapper. In the hidden mode, the host\n    // component is given a `hidden` attribute, which ensures that the\n    // initial HTML is not visible. To support the use of LegacyHidden as a\n    // true fragment, without an extra DOM node, we would have to hide the\n    // initial HTML in some other way.\n    // TODO: Add REACT_OFFSCREEN_TYPE here too with the same capability.\n    case REACT_LEGACY_HIDDEN_TYPE:\n    case REACT_DEBUG_TRACING_MODE_TYPE:\n    case REACT_STRICT_MODE_TYPE:\n    case REACT_PROFILER_TYPE:\n    case REACT_FRAGMENT_TYPE: {\n      renderNodeDestructive(request, task, props.children);\n      return;\n    }\n    case REACT_SUSPENSE_LIST_TYPE: {\n      pushBuiltInComponentStackInDEV(task, 'SuspenseList');\n      // TODO: SuspenseList should control the boundaries.\n      renderNodeDestructive(request, task, props.children);\n      popComponentStackInDEV(task);\n      return;\n    }\n    case REACT_SCOPE_TYPE: {\n      if (enableScopeAPI) {\n        renderNodeDestructive(request, task, props.children);\n        return;\n      }\n      throw new Error('ReactDOMServer does not yet support scope components.');\n    }\n    // eslint-disable-next-line-no-fallthrough\n    case REACT_SUSPENSE_TYPE: {\n      if (\n        enableSuspenseAvoidThisFallbackFizz &&\n        props.unstable_avoidThisFallback === true\n      ) {\n        renderBackupSuspenseBoundary(request, task, props);\n      } else {\n        renderSuspenseBoundary(request, task, props);\n      }\n      return;\n    }\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE: {\n        renderForwardRef(request, task, type, props, ref);\n        return;\n      }\n      case REACT_MEMO_TYPE: {\n        renderMemo(request, task, type, props, ref);\n        return;\n      }\n      case REACT_PROVIDER_TYPE: {\n        renderContextProvider(request, task, type, props);\n        return;\n      }\n      case REACT_CONTEXT_TYPE: {\n        renderContextConsumer(request, task, type, props);\n        return;\n      }\n      case REACT_LAZY_TYPE: {\n        renderLazyComponent(request, task, type, props);\n        return;\n      }\n    }\n  }\n\n  let info = '';\n  if (__DEV__) {\n    if (\n      type === undefined ||\n      (typeof type === 'object' &&\n        type !== null &&\n        Object.keys(type).length === 0)\n    ) {\n      info +=\n        ' You likely forgot to export your component from the file ' +\n        \"it's defined in, or you might have mixed up default and \" +\n        'named imports.';\n    }\n  }\n\n  throw new Error(\n    'Element type is invalid: expected a string (for built-in ' +\n      'components) or a class/function (for composite components) ' +\n      `but got: ${type == null ? type : typeof type}.${info}`,\n  );\n}\n\nfunction validateIterable(iterable, iteratorFn: Function): void {\n  if (__DEV__) {\n    // We don't support rendering Generators because it's a mutation.\n    // See https://github.com/facebook/react/issues/12995\n    if (\n      typeof Symbol === 'function' &&\n      // $FlowFixMe Flow doesn't know about toStringTag\n      iterable[Symbol.toStringTag] === 'Generator'\n    ) {\n      if (!didWarnAboutGenerators) {\n        console.error(\n          'Using Generators as children is unsupported and will likely yield ' +\n            'unexpected results because enumerating a generator mutates it. ' +\n            'You may convert it to an array with `Array.from()` or the ' +\n            '`[...spread]` operator before rendering. Keep in mind ' +\n            'you might need to polyfill these features for older browsers.',\n        );\n      }\n      didWarnAboutGenerators = true;\n    }\n\n    // Warn about using Maps as children\n    if ((iterable: any).entries === iteratorFn) {\n      if (!didWarnAboutMaps) {\n        console.error(\n          'Using Maps as children is not supported. ' +\n            'Use an array of keyed ReactElements instead.',\n        );\n      }\n      didWarnAboutMaps = true;\n    }\n  }\n}\n\nfunction renderNodeDestructive(\n  request: Request,\n  task: Task,\n  node: ReactNodeList,\n): void {\n  if (__DEV__) {\n    // In Dev we wrap renderNodeDestructiveImpl in a try / catch so we can capture\n    // a component stack at the right place in the tree. We don't do this in renderNode\n    // becuase it is not called at every layer of the tree and we may lose frames\n    try {\n      return renderNodeDestructiveImpl(request, task, node);\n    } catch (x) {\n      if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n        // This is a Wakable, noop\n      } else {\n        // This is an error, stash the component stack if it is null.\n        lastBoundaryErrorComponentStackDev =\n          lastBoundaryErrorComponentStackDev !== null\n            ? lastBoundaryErrorComponentStackDev\n            : getCurrentStackInDEV();\n      }\n      // rethrow so normal suspense logic can handle thrown value accordingly\n      throw x;\n    }\n  } else {\n    return renderNodeDestructiveImpl(request, task, node);\n  }\n}\n\n// This function by it self renders a node and consumes the task by mutating it\n// to update the current execution state.\nfunction renderNodeDestructiveImpl(\n  request: Request,\n  task: Task,\n  node: ReactNodeList,\n): void {\n  // Stash the node we're working on. We'll pick up from this task in case\n  // something suspends.\n  task.node = node;\n\n  // Handle object types\n  if (typeof node === 'object' && node !== null) {\n    switch ((node: any).$$typeof) {\n      case REACT_ELEMENT_TYPE: {\n        const element: React$Element<any> = (node: any);\n        const type = element.type;\n        const props = element.props;\n        const ref = element.ref;\n        renderElement(request, task, type, props, ref);\n        return;\n      }\n      case REACT_PORTAL_TYPE:\n        throw new Error(\n          'Portals are not currently supported by the server renderer. ' +\n            'Render them conditionally so that they only appear on the client render.',\n        );\n      // eslint-disable-next-line-no-fallthrough\n      case REACT_LAZY_TYPE: {\n        const lazyNode: LazyComponentType<any, any> = (node: any);\n        const payload = lazyNode._payload;\n        const init = lazyNode._init;\n        let resolvedNode;\n        if (__DEV__) {\n          try {\n            resolvedNode = init(payload);\n          } catch (x) {\n            if (\n              typeof x === 'object' &&\n              x !== null &&\n              typeof x.then === 'function'\n            ) {\n              // this Lazy initializer is suspending. push a temporary frame onto the stack so it can be\n              // popped off in spawnNewSuspendedTask. This aligns stack behavior between Lazy in element position\n              // vs Component position. We do not want the frame for Errors so we exclusively do this in\n              // the wakeable branch\n              pushBuiltInComponentStackInDEV(task, 'Lazy');\n            }\n            throw x;\n          }\n        } else {\n          resolvedNode = init(payload);\n        }\n        renderNodeDestructive(request, task, resolvedNode);\n        return;\n      }\n    }\n\n    if (isArray(node)) {\n      renderChildrenArray(request, task, node);\n      return;\n    }\n\n    const iteratorFn = getIteratorFn(node);\n    if (iteratorFn) {\n      if (__DEV__) {\n        validateIterable(node, iteratorFn);\n      }\n      const iterator = iteratorFn.call(node);\n      if (iterator) {\n        // We need to know how many total children are in this set, so that we\n        // can allocate enough id slots to acommodate them. So we must exhaust\n        // the iterator before we start recursively rendering the children.\n        // TODO: This is not great but I think it's inherent to the id\n        // generation algorithm.\n        let step = iterator.next();\n        // If there are not entries, we need to push an empty so we start by checking that.\n        if (!step.done) {\n          const children = [];\n          do {\n            children.push(step.value);\n            step = iterator.next();\n          } while (!step.done);\n          renderChildrenArray(request, task, children);\n          return;\n        }\n        return;\n      }\n    }\n\n    const childString = Object.prototype.toString.call(node);\n\n    throw new Error(\n      `Objects are not valid as a React child (found: ${\n        childString === '[object Object]'\n          ? 'object with keys {' + Object.keys(node).join(', ') + '}'\n          : childString\n      }). ` +\n        'If you meant to render a collection of children, use an array ' +\n        'instead.',\n    );\n  }\n\n  if (typeof node === 'string') {\n    const segment = task.blockedSegment;\n    segment.lastPushedText = pushTextInstance(\n      task.blockedSegment.chunks,\n      node,\n      request.responseState,\n      segment.lastPushedText,\n    );\n    return;\n  }\n\n  if (typeof node === 'number') {\n    const segment = task.blockedSegment;\n    segment.lastPushedText = pushTextInstance(\n      task.blockedSegment.chunks,\n      '' + node,\n      request.responseState,\n      segment.lastPushedText,\n    );\n    return;\n  }\n\n  if (__DEV__) {\n    if (typeof node === 'function') {\n      console.error(\n        'Functions are not valid as a React child. This may happen if ' +\n          'you return a Component instead of <Component /> from render. ' +\n          'Or maybe you meant to call this function rather than return it.',\n      );\n    }\n  }\n}\n\nfunction renderChildrenArray(request, task, children) {\n  const totalChildren = children.length;\n  for (let i = 0; i < totalChildren; i++) {\n    const prevTreeContext = task.treeContext;\n    task.treeContext = pushTreeContext(prevTreeContext, totalChildren, i);\n    try {\n      // We need to use the non-destructive form so that we can safely pop back\n      // up and render the sibling if something suspends.\n      renderNode(request, task, children[i]);\n    } finally {\n      task.treeContext = prevTreeContext;\n    }\n  }\n}\n\nfunction spawnNewSuspendedTask(\n  request: Request,\n  task: Task,\n  x: Promise<any>,\n): void {\n  // Something suspended, we'll need to create a new segment and resolve it later.\n  const segment = task.blockedSegment;\n  const insertionIndex = segment.chunks.length;\n  const newSegment = createPendingSegment(\n    request,\n    insertionIndex,\n    null,\n    segment.formatContext,\n    // Adopt the parent segment's leading text embed\n    segment.lastPushedText,\n    // Assume we are text embedded at the trailing edge\n    true,\n  );\n  segment.children.push(newSegment);\n  // Reset lastPushedText for current Segment since the new Segment \"consumed\" it\n  segment.lastPushedText = false;\n  const newTask = createTask(\n    request,\n    task.node,\n    task.blockedBoundary,\n    newSegment,\n    task.abortSet,\n    task.legacyContext,\n    task.context,\n    task.treeContext,\n  );\n  if (__DEV__) {\n    if (task.componentStack !== null) {\n      // We pop one task off the stack because the node that suspended will be tried again,\n      // which will add it back onto the stack.\n      newTask.componentStack = task.componentStack.parent;\n    }\n  }\n  const ping = newTask.ping;\n  x.then(ping, ping);\n}\n\n// This is a non-destructive form of rendering a node. If it suspends it spawns\n// a new task and restores the context of this task to what it was before.\nfunction renderNode(request: Request, task: Task, node: ReactNodeList): void {\n  // TODO: Store segment.children.length here and reset it in case something\n  // suspended partially through writing something.\n\n  // Snapshot the current context in case something throws to interrupt the\n  // process.\n  const previousFormatContext = task.blockedSegment.formatContext;\n  const previousLegacyContext = task.legacyContext;\n  const previousContext = task.context;\n  let previousComponentStack = null;\n  if (__DEV__) {\n    previousComponentStack = task.componentStack;\n  }\n  try {\n    return renderNodeDestructive(request, task, node);\n  } catch (x) {\n    resetHooksState();\n    if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n      spawnNewSuspendedTask(request, task, x);\n      // Restore the context. We assume that this will be restored by the inner\n      // functions in case nothing throws so we don't use \"finally\" here.\n      task.blockedSegment.formatContext = previousFormatContext;\n      task.legacyContext = previousLegacyContext;\n      task.context = previousContext;\n      // Restore all active ReactContexts to what they were before.\n      switchContext(previousContext);\n      if (__DEV__) {\n        task.componentStack = previousComponentStack;\n      }\n      return;\n    } else {\n      // Restore the context. We assume that this will be restored by the inner\n      // functions in case nothing throws so we don't use \"finally\" here.\n      task.blockedSegment.formatContext = previousFormatContext;\n      task.legacyContext = previousLegacyContext;\n      task.context = previousContext;\n      // Restore all active ReactContexts to what they were before.\n      switchContext(previousContext);\n      if (__DEV__) {\n        task.componentStack = previousComponentStack;\n      }\n      // We assume that we don't need the correct context.\n      // Let's terminate the rest of the tree and don't render any siblings.\n      throw x;\n    }\n  }\n}\n\nfunction erroredTask(\n  request: Request,\n  boundary: Root | SuspenseBoundary,\n  segment: Segment,\n  error: mixed,\n) {\n  // Report the error to a global handler.\n  const errorDigest = logRecoverableError(request, error);\n  if (boundary === null) {\n    fatalError(request, error);\n  } else {\n    boundary.pendingTasks--;\n    if (!boundary.forceClientRender) {\n      boundary.forceClientRender = true;\n      boundary.errorDigest = errorDigest;\n      if (__DEV__) {\n        captureBoundaryErrorDetailsDev(boundary, error);\n      }\n\n      // Regardless of what happens next, this boundary won't be displayed,\n      // so we can flush it, if the parent already flushed.\n      if (boundary.parentFlushed) {\n        // We don't have a preference where in the queue this goes since it's likely\n        // to error on the client anyway. However, intentionally client-rendered\n        // boundaries should be flushed earlier so that they can start on the client.\n        // We reuse the same queue for errors.\n        request.clientRenderedBoundaries.push(boundary);\n      }\n    }\n  }\n\n  request.allPendingTasks--;\n  if (request.allPendingTasks === 0) {\n    const onAllReady = request.onAllReady;\n    onAllReady();\n  }\n}\n\nfunction abortTaskSoft(task: Task): void {\n  // This aborts task without aborting the parent boundary that it blocks.\n  // It's used for when we didn't need this task to complete the tree.\n  // If task was needed, then it should use abortTask instead.\n  const request: Request = this;\n  const boundary = task.blockedBoundary;\n  const segment = task.blockedSegment;\n  segment.status = ABORTED;\n  finishedTask(request, boundary, segment);\n}\n\nfunction abortTask(task: Task, request: Request, reason: mixed): void {\n  // This aborts the task and aborts the parent that it blocks, putting it into\n  // client rendered mode.\n  const boundary = task.blockedBoundary;\n  const segment = task.blockedSegment;\n  segment.status = ABORTED;\n\n  if (boundary === null) {\n    request.allPendingTasks--;\n    // We didn't complete the root so we have nothing to show. We can close\n    // the request;\n    if (request.status !== CLOSED) {\n      request.status = CLOSED;\n      if (request.destination !== null) {\n        close(request.destination);\n      }\n    }\n  } else {\n    boundary.pendingTasks--;\n\n    if (!boundary.forceClientRender) {\n      boundary.forceClientRender = true;\n      let error =\n        reason === undefined\n          ? new Error('The render was aborted by the server without a reason.')\n          : reason;\n      boundary.errorDigest = request.onError(error);\n      if (__DEV__) {\n        const errorPrefix =\n          'The server did not finish this Suspense boundary: ';\n        if (error && typeof error.message === 'string') {\n          error = errorPrefix + error.message;\n        } else {\n          // eslint-disable-next-line react-internal/safe-string-coercion\n          error = errorPrefix + String(error);\n        }\n        const previousTaskInDev = currentTaskInDEV;\n        currentTaskInDEV = task;\n        try {\n          captureBoundaryErrorDetailsDev(boundary, error);\n        } finally {\n          currentTaskInDEV = previousTaskInDev;\n        }\n      }\n      if (boundary.parentFlushed) {\n        request.clientRenderedBoundaries.push(boundary);\n      }\n    }\n\n    // If this boundary was still pending then we haven't already cancelled its fallbacks.\n    // We'll need to abort the fallbacks, which will also error that parent boundary.\n    boundary.fallbackAbortableTasks.forEach(fallbackTask =>\n      abortTask(fallbackTask, request, reason),\n    );\n    boundary.fallbackAbortableTasks.clear();\n\n    request.allPendingTasks--;\n    if (request.allPendingTasks === 0) {\n      const onAllReady = request.onAllReady;\n      onAllReady();\n    }\n  }\n}\n\nfunction queueCompletedSegment(\n  boundary: SuspenseBoundary,\n  segment: Segment,\n): void {\n  if (\n    segment.chunks.length === 0 &&\n    segment.children.length === 1 &&\n    segment.children[0].boundary === null\n  ) {\n    // This is an empty segment. There's nothing to write, so we can instead transfer the ID\n    // to the child. That way any existing references point to the child.\n    const childSegment = segment.children[0];\n    childSegment.id = segment.id;\n    childSegment.parentFlushed = true;\n    if (childSegment.status === COMPLETED) {\n      queueCompletedSegment(boundary, childSegment);\n    }\n  } else {\n    const completedSegments = boundary.completedSegments;\n    completedSegments.push(segment);\n  }\n}\n\nfunction finishedTask(\n  request: Request,\n  boundary: Root | SuspenseBoundary,\n  segment: Segment,\n) {\n  if (boundary === null) {\n    if (segment.parentFlushed) {\n      if (request.completedRootSegment !== null) {\n        throw new Error(\n          'There can only be one root segment. This is a bug in React.',\n        );\n      }\n\n      request.completedRootSegment = segment;\n    }\n    request.pendingRootTasks--;\n    if (request.pendingRootTasks === 0) {\n      // We have completed the shell so the shell can't error anymore.\n      request.onShellError = noop;\n      const onShellReady = request.onShellReady;\n      onShellReady();\n    }\n  } else {\n    boundary.pendingTasks--;\n    if (boundary.forceClientRender) {\n      // This already errored.\n    } else if (boundary.pendingTasks === 0) {\n      // This must have been the last segment we were waiting on. This boundary is now complete.\n      if (segment.parentFlushed) {\n        // Our parent segment already flushed, so we need to schedule this segment to be emitted.\n        // If it is a segment that was aborted, we'll write other content instead so we don't need\n        // to emit it.\n        if (segment.status === COMPLETED) {\n          queueCompletedSegment(boundary, segment);\n        }\n      }\n      if (boundary.parentFlushed) {\n        // The segment might be part of a segment that didn't flush yet, but if the boundary's\n        // parent flushed, we need to schedule the boundary to be emitted.\n        request.completedBoundaries.push(boundary);\n      }\n      // We can now cancel any pending task on the fallback since we won't need to show it anymore.\n      // This needs to happen after we read the parentFlushed flags because aborting can finish\n      // work which can trigger user code, which can start flushing, which can change those flags.\n      boundary.fallbackAbortableTasks.forEach(abortTaskSoft, request);\n      boundary.fallbackAbortableTasks.clear();\n    } else {\n      if (segment.parentFlushed) {\n        // Our parent already flushed, so we need to schedule this segment to be emitted.\n        // If it is a segment that was aborted, we'll write other content instead so we don't need\n        // to emit it.\n        if (segment.status === COMPLETED) {\n          queueCompletedSegment(boundary, segment);\n          const completedSegments = boundary.completedSegments;\n          if (completedSegments.length === 1) {\n            // This is the first time since we last flushed that we completed anything.\n            // We can schedule this boundary to emit its partially completed segments early\n            // in case the parent has already been flushed.\n            if (boundary.parentFlushed) {\n              request.partialBoundaries.push(boundary);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  request.allPendingTasks--;\n  if (request.allPendingTasks === 0) {\n    // This needs to be called at the very end so that we can synchronously write the result\n    // in the callback if needed.\n    const onAllReady = request.onAllReady;\n    onAllReady();\n  }\n}\n\nfunction retryTask(request: Request, task: Task): void {\n  const segment = task.blockedSegment;\n  if (segment.status !== PENDING) {\n    // We completed this by other means before we had a chance to retry it.\n    return;\n  }\n  // We restore the context to what it was when we suspended.\n  // We don't restore it after we leave because it's likely that we'll end up\n  // needing a very similar context soon again.\n  switchContext(task.context);\n  let prevTaskInDEV = null;\n  if (__DEV__) {\n    prevTaskInDEV = currentTaskInDEV;\n    currentTaskInDEV = task;\n  }\n  try {\n    // We call the destructive form that mutates this task. That way if something\n    // suspends again, we can reuse the same task instead of spawning a new one.\n    renderNodeDestructive(request, task, task.node);\n    pushSegmentFinale(\n      segment.chunks,\n      request.responseState,\n      segment.lastPushedText,\n      segment.textEmbedded,\n    );\n\n    task.abortSet.delete(task);\n    segment.status = COMPLETED;\n    finishedTask(request, task.blockedBoundary, segment);\n  } catch (x) {\n    resetHooksState();\n    if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n      // Something suspended again, let's pick it back up later.\n      const ping = task.ping;\n      x.then(ping, ping);\n    } else {\n      task.abortSet.delete(task);\n      segment.status = ERRORED;\n      erroredTask(request, task.blockedBoundary, segment, x);\n    }\n  } finally {\n    if (__DEV__) {\n      currentTaskInDEV = prevTaskInDEV;\n    }\n  }\n}\n\nexport function performWork(request: Request): void {\n  if (request.status === CLOSED) {\n    return;\n  }\n  const prevContext = getActiveContext();\n  const prevDispatcher = ReactCurrentDispatcher.current;\n  ReactCurrentDispatcher.current = Dispatcher;\n  let prevGetCurrentStackImpl;\n  if (__DEV__) {\n    prevGetCurrentStackImpl = ReactDebugCurrentFrame.getCurrentStack;\n    ReactDebugCurrentFrame.getCurrentStack = getCurrentStackInDEV;\n  }\n  const prevResponseState = currentResponseState;\n  setCurrentResponseState(request.responseState);\n  try {\n    const pingedTasks = request.pingedTasks;\n    let i;\n    for (i = 0; i < pingedTasks.length; i++) {\n      const task = pingedTasks[i];\n      retryTask(request, task);\n    }\n    pingedTasks.splice(0, i);\n    if (request.destination !== null) {\n      flushCompletedQueues(request, request.destination);\n    }\n  } catch (error) {\n    logRecoverableError(request, error);\n    fatalError(request, error);\n  } finally {\n    setCurrentResponseState(prevResponseState);\n    ReactCurrentDispatcher.current = prevDispatcher;\n    if (__DEV__) {\n      ReactDebugCurrentFrame.getCurrentStack = prevGetCurrentStackImpl;\n    }\n    if (prevDispatcher === Dispatcher) {\n      // This means that we were in a reentrant work loop. This could happen\n      // in a renderer that supports synchronous work like renderToString,\n      // when it's called from within another renderer.\n      // Normally we don't bother switching the contexts to their root/default\n      // values when leaving because we'll likely need the same or similar\n      // context again. However, when we're inside a synchronous loop like this\n      // we'll to restore the context to what it was before returning.\n      switchContext(prevContext);\n    }\n  }\n}\n\nfunction flushSubtree(\n  request: Request,\n  destination: Destination,\n  segment: Segment,\n): boolean {\n  segment.parentFlushed = true;\n  switch (segment.status) {\n    case PENDING: {\n      // We're emitting a placeholder for this segment to be filled in later.\n      // Therefore we'll need to assign it an ID - to refer to it by.\n      const segmentID = (segment.id = request.nextSegmentId++);\n      // When this segment finally completes it won't be embedded in text since it will flush separately\n      segment.lastPushedText = false;\n      segment.textEmbedded = false;\n      return writePlaceholder(destination, request.responseState, segmentID);\n    }\n    case COMPLETED: {\n      segment.status = FLUSHED;\n      let r = true;\n      const chunks = segment.chunks;\n      let chunkIdx = 0;\n      const children = segment.children;\n      for (let childIdx = 0; childIdx < children.length; childIdx++) {\n        const nextChild = children[childIdx];\n        // Write all the chunks up until the next child.\n        for (; chunkIdx < nextChild.index; chunkIdx++) {\n          writeChunk(destination, chunks[chunkIdx]);\n        }\n        r = flushSegment(request, destination, nextChild);\n      }\n      // Finally just write all the remaining chunks\n      for (; chunkIdx < chunks.length - 1; chunkIdx++) {\n        writeChunk(destination, chunks[chunkIdx]);\n      }\n      if (chunkIdx < chunks.length) {\n        r = writeChunkAndReturn(destination, chunks[chunkIdx]);\n      }\n      return r;\n    }\n    default: {\n      throw new Error(\n        'Aborted, errored or already flushed boundaries should not be flushed again. This is a bug in React.',\n      );\n    }\n  }\n}\n\nfunction flushSegment(\n  request: Request,\n  destination,\n  segment: Segment,\n): boolean {\n  const boundary = segment.boundary;\n  if (boundary === null) {\n    // Not a suspense boundary.\n    return flushSubtree(request, destination, segment);\n  }\n  boundary.parentFlushed = true;\n  // This segment is a Suspense boundary. We need to decide whether to\n  // emit the content or the fallback now.\n  if (boundary.forceClientRender) {\n    // Emit a client rendered suspense boundary wrapper.\n    // We never queue the inner boundary so we'll never emit its content or partial segments.\n\n    writeStartClientRenderedSuspenseBoundary(\n      destination,\n      request.responseState,\n      boundary.errorDigest,\n      boundary.errorMessage,\n      boundary.errorComponentStack,\n    );\n    // Flush the fallback.\n    flushSubtree(request, destination, segment);\n\n    return writeEndClientRenderedSuspenseBoundary(\n      destination,\n      request.responseState,\n    );\n  } else if (boundary.pendingTasks > 0) {\n    // This boundary is still loading. Emit a pending suspense boundary wrapper.\n\n    // Assign an ID to refer to the future content by.\n    boundary.rootSegmentID = request.nextSegmentId++;\n    if (boundary.completedSegments.length > 0) {\n      // If this is at least partially complete, we can queue it to be partially emitted early.\n      request.partialBoundaries.push(boundary);\n    }\n\n    /// This is the first time we should have referenced this ID.\n    const id = (boundary.id = assignSuspenseBoundaryID(request.responseState));\n\n    writeStartPendingSuspenseBoundary(destination, request.responseState, id);\n\n    // Flush the fallback.\n    flushSubtree(request, destination, segment);\n\n    return writeEndPendingSuspenseBoundary(destination, request.responseState);\n  } else if (boundary.byteSize > request.progressiveChunkSize) {\n    // This boundary is large and will be emitted separately so that we can progressively show\n    // other content. We add it to the queue during the flush because we have to ensure that\n    // the parent flushes first so that there's something to inject it into.\n    // We also have to make sure that it's emitted into the queue in a deterministic slot.\n    // I.e. we can't insert it here when it completes.\n\n    // Assign an ID to refer to the future content by.\n    boundary.rootSegmentID = request.nextSegmentId++;\n\n    request.completedBoundaries.push(boundary);\n    // Emit a pending rendered suspense boundary wrapper.\n    writeStartPendingSuspenseBoundary(\n      destination,\n      request.responseState,\n      boundary.id,\n    );\n\n    // Flush the fallback.\n    flushSubtree(request, destination, segment);\n\n    return writeEndPendingSuspenseBoundary(destination, request.responseState);\n  } else {\n    // We can inline this boundary's content as a complete boundary.\n    writeStartCompletedSuspenseBoundary(destination, request.responseState);\n\n    const completedSegments = boundary.completedSegments;\n\n    if (completedSegments.length !== 1) {\n      throw new Error(\n        'A previously unvisited boundary must have exactly one root segment. This is a bug in React.',\n      );\n    }\n\n    const contentSegment = completedSegments[0];\n    flushSegment(request, destination, contentSegment);\n\n    return writeEndCompletedSuspenseBoundary(\n      destination,\n      request.responseState,\n    );\n  }\n}\n\nfunction flushClientRenderedBoundary(\n  request: Request,\n  destination: Destination,\n  boundary: SuspenseBoundary,\n): boolean {\n  return writeClientRenderBoundaryInstruction(\n    destination,\n    request.responseState,\n    boundary.id,\n    boundary.errorDigest,\n    boundary.errorMessage,\n    boundary.errorComponentStack,\n  );\n}\n\nfunction flushSegmentContainer(\n  request: Request,\n  destination: Destination,\n  segment: Segment,\n): boolean {\n  writeStartSegment(\n    destination,\n    request.responseState,\n    segment.formatContext,\n    segment.id,\n  );\n  flushSegment(request, destination, segment);\n  return writeEndSegment(destination, segment.formatContext);\n}\n\nfunction flushCompletedBoundary(\n  request: Request,\n  destination: Destination,\n  boundary: SuspenseBoundary,\n): boolean {\n  const completedSegments = boundary.completedSegments;\n  let i = 0;\n  for (; i < completedSegments.length; i++) {\n    const segment = completedSegments[i];\n    flushPartiallyCompletedSegment(request, destination, boundary, segment);\n  }\n  completedSegments.length = 0;\n\n  return writeCompletedBoundaryInstruction(\n    destination,\n    request.responseState,\n    boundary.id,\n    boundary.rootSegmentID,\n  );\n}\n\nfunction flushPartialBoundary(\n  request: Request,\n  destination: Destination,\n  boundary: SuspenseBoundary,\n): boolean {\n  const completedSegments = boundary.completedSegments;\n  let i = 0;\n  for (; i < completedSegments.length; i++) {\n    const segment = completedSegments[i];\n    if (\n      !flushPartiallyCompletedSegment(request, destination, boundary, segment)\n    ) {\n      i++;\n      completedSegments.splice(0, i);\n      // Only write as much as the buffer wants. Something higher priority\n      // might want to write later.\n      return false;\n    }\n  }\n  completedSegments.splice(0, i);\n  return true;\n}\n\nfunction flushPartiallyCompletedSegment(\n  request: Request,\n  destination: Destination,\n  boundary: SuspenseBoundary,\n  segment: Segment,\n): boolean {\n  if (segment.status === FLUSHED) {\n    // We've already flushed this inline.\n    return true;\n  }\n\n  const segmentID = segment.id;\n  if (segmentID === -1) {\n    // This segment wasn't previously referred to. This happens at the root of\n    // a boundary. We make kind of a leap here and assume this is the root.\n    const rootSegmentID = (segment.id = boundary.rootSegmentID);\n\n    if (rootSegmentID === -1) {\n      throw new Error(\n        'A root segment ID must have been assigned by now. This is a bug in React.',\n      );\n    }\n\n    return flushSegmentContainer(request, destination, segment);\n  } else {\n    flushSegmentContainer(request, destination, segment);\n    return writeCompletedSegmentInstruction(\n      destination,\n      request.responseState,\n      segmentID,\n    );\n  }\n}\n\nfunction flushCompletedQueues(\n  request: Request,\n  destination: Destination,\n): void {\n  beginWriting(destination);\n  try {\n    // The structure of this is to go through each queue one by one and write\n    // until the sink tells us to stop. When we should stop, we still finish writing\n    // that item fully and then yield. At that point we remove the already completed\n    // items up until the point we completed them.\n\n    // TODO: Emit preloading.\n\n    // TODO: It's kind of unfortunate to keep checking this array after we've already\n    // emitted the root.\n    const completedRootSegment = request.completedRootSegment;\n    if (completedRootSegment !== null && request.pendingRootTasks === 0) {\n      flushSegment(request, destination, completedRootSegment);\n      request.completedRootSegment = null;\n      writeCompletedRoot(destination, request.responseState);\n    }\n\n    // We emit client rendering instructions for already emitted boundaries first.\n    // This is so that we can signal to the client to start client rendering them as\n    // soon as possible.\n    const clientRenderedBoundaries = request.clientRenderedBoundaries;\n    let i;\n    for (i = 0; i < clientRenderedBoundaries.length; i++) {\n      const boundary = clientRenderedBoundaries[i];\n      if (!flushClientRenderedBoundary(request, destination, boundary)) {\n        request.destination = null;\n        i++;\n        clientRenderedBoundaries.splice(0, i);\n        return;\n      }\n    }\n    clientRenderedBoundaries.splice(0, i);\n\n    // Next we emit any complete boundaries. It's better to favor boundaries\n    // that are completely done since we can actually show them, than it is to emit\n    // any individual segments from a partially complete boundary.\n    const completedBoundaries = request.completedBoundaries;\n    for (i = 0; i < completedBoundaries.length; i++) {\n      const boundary = completedBoundaries[i];\n      if (!flushCompletedBoundary(request, destination, boundary)) {\n        request.destination = null;\n        i++;\n        completedBoundaries.splice(0, i);\n        return;\n      }\n    }\n    completedBoundaries.splice(0, i);\n\n    // Allow anything written so far to flush to the underlying sink before\n    // we continue with lower priorities.\n    completeWriting(destination);\n    beginWriting(destination);\n\n    // TODO: Here we'll emit data used by hydration.\n\n    // Next we emit any segments of any boundaries that are partially complete\n    // but not deeply complete.\n    const partialBoundaries = request.partialBoundaries;\n    for (i = 0; i < partialBoundaries.length; i++) {\n      const boundary = partialBoundaries[i];\n      if (!flushPartialBoundary(request, destination, boundary)) {\n        request.destination = null;\n        i++;\n        partialBoundaries.splice(0, i);\n        return;\n      }\n    }\n    partialBoundaries.splice(0, i);\n\n    // Next we check the completed boundaries again. This may have had\n    // boundaries added to it in case they were too larged to be inlined.\n    // New ones might be added in this loop.\n    const largeBoundaries = request.completedBoundaries;\n    for (i = 0; i < largeBoundaries.length; i++) {\n      const boundary = largeBoundaries[i];\n      if (!flushCompletedBoundary(request, destination, boundary)) {\n        request.destination = null;\n        i++;\n        largeBoundaries.splice(0, i);\n        return;\n      }\n    }\n    largeBoundaries.splice(0, i);\n  } finally {\n    completeWriting(destination);\n    flushBuffered(destination);\n    if (\n      request.allPendingTasks === 0 &&\n      request.pingedTasks.length === 0 &&\n      request.clientRenderedBoundaries.length === 0 &&\n      request.completedBoundaries.length === 0\n      // We don't need to check any partially completed segments because\n      // either they have pending task or they're complete.\n    ) {\n      if (__DEV__) {\n        if (request.abortableTasks.size !== 0) {\n          console.error(\n            'There was still abortable task at the root when we closed. This is a bug in React.',\n          );\n        }\n      }\n      // We're done.\n      close(destination);\n    }\n  }\n}\n\nexport function startWork(request: Request): void {\n  scheduleWork(() => performWork(request));\n}\n\nexport function startFlowing(request: Request, destination: Destination): void {\n  if (request.status === CLOSING) {\n    request.status = CLOSED;\n    closeWithError(destination, request.fatalError);\n    return;\n  }\n  if (request.status === CLOSED) {\n    return;\n  }\n  if (request.destination !== null) {\n    // We're already flowing.\n    return;\n  }\n  request.destination = destination;\n  try {\n    flushCompletedQueues(request, destination);\n  } catch (error) {\n    logRecoverableError(request, error);\n    fatalError(request, error);\n  }\n}\n\n// This is called to early terminate a request. It puts all pending boundaries in client rendered state.\nexport function abort(request: Request, reason: mixed): void {\n  try {\n    const abortableTasks = request.abortableTasks;\n    abortableTasks.forEach(task => abortTask(task, request, reason));\n    abortableTasks.clear();\n    if (request.destination !== null) {\n      flushCompletedQueues(request, request.destination);\n    }\n  } catch (error) {\n    logRecoverableError(request, error);\n    fatalError(request, error);\n  }\n}\n"],"names":["ReactSharedInternals","React","warn","format","args","printWarning","error","level","ReactDebugCurrentFrame","stack","getStackAddendum","concat","argsWithFormat","map","item","String","unshift","Function","prototype","apply","call","console","scheduleWork","$$$hostConfig","beginWriting","writeChunk","writeChunkAndReturn","completeWriting","flushBuffered","close","closeWithError","stringToChunk","stringToPrecomputedChunk","getChildFormatContext","UNINITIALIZED_SUSPENSE_BOUNDARY_ID","assignSuspenseBoundaryID","makeId","pushTextInstance","pushStartInstance","pushEndInstance","pushStartCompletedSuspenseBoundary","pushEndCompletedSuspenseBoundary","pushSegmentFinale","writeCompletedRoot","writePlaceholder","writeStartCompletedSuspenseBoundary","writeStartPendingSuspenseBoundary","writeStartClientRenderedSuspenseBoundary","writeEndCompletedSuspenseBoundary","writeEndPendingSuspenseBoundary","writeEndClientRenderedSuspenseBoundary","writeStartSegment","writeEndSegment","writeCompletedSegmentInstruction","writeCompletedBoundaryInstruction","writeClientRenderBoundaryInstruction","assign","Object","REACT_ELEMENT_TYPE","Symbol","for","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_SERVER_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_SCOPE_TYPE","REACT_DEBUG_TRACING_MODE_TYPE","REACT_LEGACY_HIDDEN_TYPE","REACT_CACHE_TYPE","REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED","MAYBE_ITERATOR_SYMBOL","iterator","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","maybeIterator","getWrappedName","outerType","innerType","wrapperName","displayName","functionName","name","getContextName","type","getComponentNameFromType","tag","$$typeof","context","provider","_context","render","outerName","lazyComponent","payload","_payload","init","_init","x","context2","_globalName","disabledDepth","prevLog","prevInfo","prevWarn","prevError","prevGroup","prevGroupCollapsed","prevGroupEnd","disabledLog","__reactDisabledLog","disableLogs","log","info","group","groupCollapsed","groupEnd","props","configurable","enumerable","value","writable","defineProperties","reenableLogs","ReactCurrentDispatcher","prefix","describeBuiltInComponentFrame","source","ownerFn","undefined","Error","match","trim","reentry","componentFrameCache","PossiblyWeakMap","WeakMap","Map","describeNativeComponentFrame","fn","construct","disableNativeComponentFrames","frame","get","control","previousPrepareStackTrace","prepareStackTrace","previousDispatcher","current","Fake","defineProperty","set","Reflect","sample","sampleLines","split","controlLines","s","length","c","replace","includes","syntheticFrame","describeClassComponentFrame","ctor","describeFunctionComponentFrame","shouldConstruct","Component","isReactComponent","describeUnknownElementTypeFrameInDEV","hasOwnProperty","loggedTypeFailures","setCurrentlyValidatingElement","element","owner","_owner","_source","setExtraStackFrame","checkPropTypes","typeSpecs","values","location","componentName","has","bind","typeSpecName","err","ex","message","warnedAboutMissingGetChildContext","emptyContextObject","freeze","getMaskedContext","unmaskedContext","contextTypes","key","processChildContext","instance","parentContext","childContextTypes","getChildContext","childContext","contextKey","rendererSigil","rootContextSnapshot","currentActiveSnapshot","popNode","prev","_currentValue2","parentValue","pushNode","next","popToNearestCommonAncestor","parentPrev","parent","parentNext","popAllPrevious","pushAllNext","popPreviousToCommonLevel","depth","popNextToCommonLevel","switchContext","newSnapshot","pushProvider","nextValue","prevValue","_currentRenderer2","prevNode","newNode","popProvider","prevSnapshot","_defaultValue","getActiveContext","readContext","isPrimaryRenderer","_reactInternals","isArrayImpl","Array","isArray","a","didWarnAboutNoopUpdateForComponent","didWarnAboutDeprecatedWillMount","didWarnAboutUninitializedState","didWarnAboutGetSnapshotBeforeUpdateWithoutDidUpdate","didWarnAboutLegacyLifecyclesAndDerivedState","didWarnAboutUndefinedDerivedState","warnOnUndefinedDerivedState","warnOnInvalidCallback","didWarnAboutDirectlyAssigningPropsToState","didWarnAboutContextTypeAndContextTypes","didWarnAboutInvalidateContextType","Set","didWarnOnInvalidCallback","callback","callerName","add","partialState","warnNoop","publicInstance","constructor","warningKey","classComponentUpdater","isMounted","inst","enqueueSetState","internals","getInstance","queue","push","enqueueReplaceState","enqueueForceUpdate","applyDerivedStateFromProps","getDerivedStateFromProps","prevState","nextProps","newState","constructClassInstance","maskedLegacyContext","contextType","isValid","addendum","keys","join","state","getSnapshotBeforeUpdate","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","componentWillMount","__suppressDeprecationWarning","UNSAFE_componentWillMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","componentWillUpdate","UNSAFE_componentWillUpdate","newApiName","checkClassInstance","newProps","renderPresent","getInitialState","isReactClassApproved","getDefaultProps","propTypes","componentShouldUpdate","isPureReactComponent","shouldComponentUpdate","componentDidUnmount","componentDidReceiveProps","componentWillRecieveProps","UNSAFE_componentWillRecieveProps","hasMutatedProps","defaultProps","componentDidUpdate","getDerivedStateFromError","callComponentWillMount","oldState","warnAboutDeprecatedLifecycles","processUpdateQueue","internalInstance","oldQueue","oldReplace","nextState","dontMutate","i","partial","mountClassInstance","initialState","updater","setInstance","emptyTreeContext","id","overflow","getTreeId","idWithLeadingBit","getLeadingBit","toString","pushTreeContext","baseContext","totalChildren","index","baseIdWithLeadingBit","baseOverflow","baseLength","getBitLength","baseId","slot","numberOfOverflowBits","newOverflowBits","newOverflow","restOfBaseId","restOfBaseLength","restOfLength","restOfNewBits","newBits","number","clz32","Math","clz32Fallback","LN2","asUint","is","y","objectIs","currentlyRenderingComponent","currentlyRenderingTask","firstWorkInProgressHook","workInProgressHook","isReRender","didScheduleRenderPhaseUpdate","localIdCounter","renderPhaseUpdates","numberOfReRenders","RE_RENDER_LIMIT","isInHookUserCodeInDev","currentHookNameInDev","resolveCurrentlyRenderingComponent","areHookInputsEqual","nextDeps","prevDeps","createHook","memoizedState","createWorkInProgressHook","prepareToUseHooks","task","componentIdentity","finishHooks","children","refOrContext","resetHooksState","checkDidRenderIdHook","didRenderIdHook","getCacheForType","resourceType","readContextImpl","useContext","basicStateReducer","action","useState","useReducer","reducer","initialArg","dispatch","firstRenderPhaseUpdate","delete","update","last","dispatchAction","useMemo","nextCreate","deps","useRef","initialValue","previousRef","ref","seal","useLayoutEffect","create","inputs","lastRenderPhaseUpdate","useCallback","useMutableSource","getSnapshot","subscribe","useSyncExternalStore","getServerSnapshot","useDeferredValue","unsupportedStartTransition","useTransition","useId","treeId","treeContext","responseState","currentResponseState","localId","unsupportedRefresh","useCacheRefresh","noop","Dispatcher","useInsertionEffect","useImperativeHandle","useEffect","useDebugValue","setCurrentResponseState","getStackByComponentStackNode","componentStack","node","PENDING","COMPLETED","FLUSHED","ABORTED","ERRORED","OPEN","CLOSING","CLOSED","DEFAULT_PROGRESSIVE_CHUNK_SIZE","defaultErrorHandler","createRequest","rootFormatContext","progressiveChunkSize","onError","onAllReady","onShellReady","onShellError","onFatalError","pingedTasks","abortSet","request","destination","status","fatalError","nextSegmentId","allPendingTasks","pendingRootTasks","completedRootSegment","abortableTasks","clientRenderedBoundaries","completedBoundaries","partialBoundaries","rootSegment","createPendingSegment","parentFlushed","rootTask","createTask","pingTask","performWork","createSuspenseBoundary","fallbackAbortableTasks","rootSegmentID","pendingTasks","forceClientRender","completedSegments","byteSize","errorDigest","blockedBoundary","blockedSegment","legacyContext","ping","boundary","formatContext","lastPushedText","textEmbedded","chunks","currentTaskInDEV","getCurrentStackInDEV","pushBuiltInComponentStackInDEV","pushFunctionComponentStackInDEV","pushClassComponentStackInDEV","popComponentStackInDEV","lastBoundaryErrorComponentStackDev","captureBoundaryErrorDetailsDev","errorMessage","errorComponentStack","logRecoverableError","renderSuspenseBoundary","parentBoundary","parentSegment","fallback","content","fallbackAbortSet","newBoundary","insertionIndex","boundarySegment","contentRootSegment","renderNode","queueCompletedSegment","suspendedFallbackTask","renderHostElement","segment","prevContext","renderWithHooks","secondArg","result","finishClassComponent","nextChildren","didWarnAboutReassigningProps","previousContext","mergedContext","renderNodeDestructive","renderClassComponent","maskedContext","didWarnAboutBadClass","didWarnAboutModulePatternComponent","didWarnAboutContextTypeOnFunctionComponent","didWarnAboutGetDerivedStateOnFunctionComponent","didWarnAboutGenerators","didWarnAboutMaps","hasWarnedAboutUsingContextAsConsumer","renderIndeterminateComponent","hasId","validateFunctionComponentInDev","prevTreeContext","resolveDefaultProps","baseProps","propName","renderForwardRef","renderMemo","resolvedProps","renderElement","renderContextConsumer","Consumer","newValue","newChildren","renderContextProvider","renderLazyComponent","validateIterable","iterable","iteratorFn","toStringTag","entries","renderNodeDestructiveImpl","then","lazyNode","resolvedNode","renderChildrenArray","step","done","childString","spawnNewSuspendedTask","newSegment","newTask","previousFormatContext","previousLegacyContext","previousComponentStack","erroredTask","abortTaskSoft","finishedTask","abortTask","reason","errorPrefix","previousTaskInDev","forEach","fallbackTask","clear","childSegment","retryTask","prevTaskInDEV","prevDispatcher","prevGetCurrentStackImpl","getCurrentStack","prevResponseState","splice","flushCompletedQueues","flushSubtree","segmentID","r","chunkIdx","childIdx","nextChild","flushSegment","contentSegment","flushClientRenderedBoundary","flushSegmentContainer","flushCompletedBoundary","flushPartiallyCompletedSegment","flushPartialBoundary","largeBoundaries","size","startWork","startFlowing","abort"],"mappings":"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"}