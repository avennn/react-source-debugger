{"version":3,"file":"jest-react.development.js","sources":["../../../../packages/shared/assign.js","../../../../packages/shared/ReactSymbols.js","../../../../packages/shared/isArray.js","../../../../packages/shared/ReactSharedInternals.js","../../../../packages/shared/consoleWithStackDev.js","../../../../packages/shared/enqueueTask.js","../../../../packages/jest-react/src/internalAct.js","../../../../packages/jest-react/src/JestReact.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst assign = Object.assign;\n\nexport default assign;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_ELEMENT_TYPE = Symbol.for('react.element');\nexport const REACT_PORTAL_TYPE = Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE = Symbol.for('react.provider');\nexport const REACT_CONTEXT_TYPE = Symbol.for('react.context');\nexport const REACT_SERVER_CONTEXT_TYPE = Symbol.for('react.server_context');\nexport const REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nexport const REACT_MEMO_TYPE = Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE = Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE = Symbol.for('react.scope');\nexport const REACT_DEBUG_TRACING_MODE_TYPE = Symbol.for(\n  'react.debug_trace_mode',\n);\nexport const REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE = Symbol.for('react.legacy_hidden');\nexport const REACT_CACHE_TYPE = Symbol.for('react.cache');\nexport const REACT_TRACING_MARKER_TYPE = Symbol.for('react.tracing_marker');\nexport const REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED = Symbol.for(\n  'react.default_value',\n);\n\nconst MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\n\nconst isArrayImpl = Array.isArray;\n\n// eslint-disable-next-line no-redeclare\nfunction isArray(a: mixed): boolean {\n  return isArrayImpl(a);\n}\n\nexport default isArray;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\n\nlet suppressWarning = false;\nexport function setSuppressWarning(newSuppressWarning) {\n  if (__DEV__) {\n    suppressWarning = newSuppressWarning;\n  }\n}\n\n// In DEV, calls to console.warn and console.error get replaced\n// by calls to these methods by a Babel plugin.\n//\n// In PROD (or in packages without access to React internals),\n// they are left as they are instead.\n\nexport function warn(format, ...args) {\n  if (__DEV__) {\n    if (!suppressWarning) {\n      printWarning('warn', format, args);\n    }\n  }\n}\n\nexport function error(format, ...args) {\n  if (__DEV__) {\n    if (!suppressWarning) {\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  if (__DEV__) {\n    const ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    const stack = ReactDebugCurrentFrame.getStackAddendum();\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    }\n\n    // eslint-disable-next-line react-internal/safe-string-coercion\n    const argsWithFormat = args.map(item => String(item));\n    // Careful: RN currently depends on this prefix\n    argsWithFormat.unshift('Warning: ' + format);\n    // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nlet didWarnAboutMessageChannel = false;\nlet enqueueTaskImpl = null;\n\nexport default function enqueueTask(task: () => void) {\n  if (enqueueTaskImpl === null) {\n    try {\n      // read require off the module object to get around the bundlers.\n      // we don't want them to detect a require and bundle a Node polyfill.\n      const requireString = ('require' + Math.random()).slice(0, 7);\n      const nodeRequire = module && module[requireString];\n      // assuming we're in node, let's try to get node's\n      // version of setImmediate, bypassing fake timers if any.\n      enqueueTaskImpl = nodeRequire.call(module, 'timers').setImmediate;\n    } catch (_err) {\n      // we're in a browser\n      // we can't use regular timers because they may still be faked\n      // so we try MessageChannel+postMessage instead\n      enqueueTaskImpl = function(callback: () => void) {\n        if (__DEV__) {\n          if (didWarnAboutMessageChannel === false) {\n            didWarnAboutMessageChannel = true;\n            if (typeof MessageChannel === 'undefined') {\n              console.error(\n                'This browser does not have a MessageChannel implementation, ' +\n                  'so enqueuing tasks via await act(async () => ...) will fail. ' +\n                  'Please file an issue at https://github.com/facebook/react/issues ' +\n                  'if you encounter this warning.',\n              );\n            }\n          }\n        }\n        const channel = new MessageChannel();\n        channel.port1.onmessage = callback;\n        channel.port2.postMessage(undefined);\n      };\n    }\n  }\n  return enqueueTaskImpl(task);\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict\n */\n\n// This version of `act` is only used by our tests. Unlike the public version\n// of `act`, it's designed to work identically in both production and\n// development. It may have slightly different behavior from the public\n// version, too, since our constraints in our test suite are not the same as\n// those of developers using React â€” we're testing React itself, as opposed to\n// building an app with React.\n\nimport type {Thenable} from 'shared/ReactTypes';\n\nimport * as Scheduler from 'scheduler/unstable_mock';\n\nimport enqueueTask from 'shared/enqueueTask';\n\nlet actingUpdatesScopeDepth = 0;\n\nexport function act<T>(scope: () => Thenable<T> | T): Thenable<T> {\n  if (Scheduler.unstable_flushAllWithoutAsserting === undefined) {\n    throw Error(\n      'This version of `act` requires a special mock build of Scheduler.',\n    );\n  }\n  if (setTimeout._isMockFunction !== true) {\n    throw Error(\n      \"This version of `act` requires Jest's timer mocks \" +\n        '(i.e. jest.useFakeTimers).',\n    );\n  }\n\n  const previousIsActEnvironment = global.IS_REACT_ACT_ENVIRONMENT;\n  const previousActingUpdatesScopeDepth = actingUpdatesScopeDepth;\n  actingUpdatesScopeDepth++;\n  if (__DEV__ && actingUpdatesScopeDepth === 1) {\n    // Because this is not the \"real\" `act`, we set this to `false` so React\n    // knows not to fire `act` warnings.\n    global.IS_REACT_ACT_ENVIRONMENT = false;\n  }\n\n  const unwind = () => {\n    if (__DEV__ && actingUpdatesScopeDepth === 1) {\n      global.IS_REACT_ACT_ENVIRONMENT = previousIsActEnvironment;\n    }\n    actingUpdatesScopeDepth--;\n\n    if (__DEV__) {\n      if (actingUpdatesScopeDepth > previousActingUpdatesScopeDepth) {\n        // if it's _less than_ previousActingUpdatesScopeDepth, then we can\n        // assume the 'other' one has warned\n        console.error(\n          'You seem to have overlapping act() calls, this is not supported. ' +\n            'Be sure to await previous act() calls before making a new one. ',\n        );\n      }\n    }\n  };\n\n  // TODO: This would be way simpler if 1) we required a promise to be\n  // returned and 2) we could use async/await. Since it's only our used in\n  // our test suite, we should be able to.\n  try {\n    const result = scope();\n    if (\n      typeof result === 'object' &&\n      result !== null &&\n      typeof result.then === 'function'\n    ) {\n      const thenableResult: Thenable<T> = (result: any);\n      return {\n        then(resolve, reject) {\n          thenableResult.then(\n            returnValue => {\n              flushActWork(\n                () => {\n                  unwind();\n                  resolve(returnValue);\n                },\n                error => {\n                  unwind();\n                  reject(error);\n                },\n              );\n            },\n            error => {\n              unwind();\n              reject(error);\n            },\n          );\n        },\n      };\n    } else {\n      const returnValue: T = (result: any);\n      try {\n        // TODO: Let's not support non-async scopes at all in our tests. Need to\n        // migrate existing tests.\n        let didFlushWork;\n        do {\n          didFlushWork = Scheduler.unstable_flushAllWithoutAsserting();\n        } while (didFlushWork);\n        return {\n          then(resolve, reject) {\n            resolve(returnValue);\n          },\n        };\n      } finally {\n        unwind();\n      }\n    }\n  } catch (error) {\n    unwind();\n    throw error;\n  }\n}\n\nfunction flushActWork(resolve, reject) {\n  // Flush suspended fallbacks\n  // $FlowFixMe: Flow doesn't know about global Jest object\n  jest.runOnlyPendingTimers();\n  enqueueTask(() => {\n    try {\n      const didFlushWork = Scheduler.unstable_flushAllWithoutAsserting();\n      if (didFlushWork) {\n        flushActWork(resolve, reject);\n      } else {\n        resolve();\n      }\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {REACT_ELEMENT_TYPE, REACT_FRAGMENT_TYPE} from 'shared/ReactSymbols';\n\nimport isArray from 'shared/isArray';\n\nexport {act} from './internalAct';\n\nfunction captureAssertion(fn) {\n  // Trick to use a Jest matcher inside another Jest matcher. `fn` contains an\n  // assertion; if it throws, we capture the error and return it, so the stack\n  // trace presented to the user points to the original assertion in the\n  // test file.\n  try {\n    fn();\n  } catch (error) {\n    return {\n      pass: false,\n      message: () => error.message,\n    };\n  }\n  return {pass: true};\n}\n\nfunction assertYieldsWereCleared(root) {\n  const Scheduler = root._Scheduler;\n  const actualYields = Scheduler.unstable_clearYields();\n  if (actualYields.length !== 0) {\n    throw new Error(\n      'Log of yielded values is not empty. ' +\n        'Call expect(ReactTestRenderer).unstable_toHaveYielded(...) first.',\n    );\n  }\n}\n\nexport function unstable_toMatchRenderedOutput(root, expectedJSX) {\n  assertYieldsWereCleared(root);\n  const actualJSON = root.toJSON();\n\n  let actualJSX;\n  if (actualJSON === null || typeof actualJSON === 'string') {\n    actualJSX = actualJSON;\n  } else if (isArray(actualJSON)) {\n    if (actualJSON.length === 0) {\n      actualJSX = null;\n    } else if (actualJSON.length === 1) {\n      actualJSX = jsonChildToJSXChild(actualJSON[0]);\n    } else {\n      const actualJSXChildren = jsonChildrenToJSXChildren(actualJSON);\n      if (actualJSXChildren === null || typeof actualJSXChildren === 'string') {\n        actualJSX = actualJSXChildren;\n      } else {\n        actualJSX = {\n          $$typeof: REACT_ELEMENT_TYPE,\n          type: REACT_FRAGMENT_TYPE,\n          key: null,\n          ref: null,\n          props: {\n            children: actualJSXChildren,\n          },\n          _owner: null,\n          _store: __DEV__ ? {} : undefined,\n        };\n      }\n    }\n  } else {\n    actualJSX = jsonChildToJSXChild(actualJSON);\n  }\n\n  return captureAssertion(() => {\n    expect(actualJSX).toEqual(expectedJSX);\n  });\n}\n\nfunction jsonChildToJSXChild(jsonChild) {\n  if (jsonChild === null || typeof jsonChild === 'string') {\n    return jsonChild;\n  } else {\n    const jsxChildren = jsonChildrenToJSXChildren(jsonChild.children);\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: jsonChild.type,\n      key: null,\n      ref: null,\n      props:\n        jsxChildren === null\n          ? jsonChild.props\n          : {...jsonChild.props, children: jsxChildren},\n      _owner: null,\n      _store: __DEV__ ? {} : undefined,\n    };\n  }\n}\n\nfunction jsonChildrenToJSXChildren(jsonChildren) {\n  if (jsonChildren !== null) {\n    if (jsonChildren.length === 1) {\n      return jsonChildToJSXChild(jsonChildren[0]);\n    } else if (jsonChildren.length > 1) {\n      const jsxChildren = [];\n      let allJSXChildrenAreStrings = true;\n      let jsxChildrenString = '';\n      for (let i = 0; i < jsonChildren.length; i++) {\n        const jsxChild = jsonChildToJSXChild(jsonChildren[i]);\n        jsxChildren.push(jsxChild);\n        if (allJSXChildrenAreStrings) {\n          if (typeof jsxChild === 'string') {\n            jsxChildrenString += jsxChild;\n          } else if (jsxChild !== null) {\n            allJSXChildrenAreStrings = false;\n          }\n        }\n      }\n      return allJSXChildrenAreStrings ? jsxChildrenString : jsxChildren;\n    }\n  }\n  return null;\n}\n"],"names":["assign","Object","REACT_ELEMENT_TYPE","Symbol","for","REACT_FRAGMENT_TYPE","isArrayImpl","Array","isArray","a","ReactSharedInternals","React","error","format","args","printWarning","level","ReactDebugCurrentFrame","stack","getStackAddendum","concat","argsWithFormat","map","item","String","unshift","Function","prototype","apply","call","console","didWarnAboutMessageChannel","enqueueTaskImpl","enqueueTask","task","requireString","Math","random","slice","nodeRequire","module","setImmediate","_err","callback","MessageChannel","channel","port1","onmessage","port2","postMessage","undefined","actingUpdatesScopeDepth","act","scope","Scheduler","Error","setTimeout","_isMockFunction","previousIsActEnvironment","global","IS_REACT_ACT_ENVIRONMENT","previousActingUpdatesScopeDepth","__DEV__","unwind","result","then","thenableResult","resolve","reject","returnValue","flushActWork","didFlushWork","jest","runOnlyPendingTimers","captureAssertion","fn","pass","message","assertYieldsWereCleared","root","_Scheduler","actualYields","unstable_clearYields","length","unstable_toMatchRenderedOutput","expectedJSX","actualJSON","toJSON","actualJSX","jsonChildToJSXChild","actualJSXChildren","jsonChildrenToJSXChildren","$$typeof","type","key","ref","props","children","_owner","_store","expect","toEqual","jsonChild","jsxChildren","jsonChildren","allJSXChildrenAreStrings","jsxChildrenString","i","jsxChild","push"],"mappings":"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"}