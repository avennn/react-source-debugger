{"version":3,"file":"ReactFreshRuntime-dev.js","sources":["../../packages/shared/forks/ReactFeatureFlags.www.js","../../packages/shared/ReactSymbols.www.js","../../packages/react-refresh/src/ReactFreshRuntime.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport typeof * as FeatureFlagsType from 'shared/ReactFeatureFlags';\nimport typeof * as ExportsType from './ReactFeatureFlags.www';\nimport typeof * as DynamicFeatureFlags from './ReactFeatureFlags.www-dynamic';\n\n// Re-export dynamic flags from the www version.\nconst dynamicFeatureFlags: DynamicFeatureFlags = require('ReactFeatureFlags');\n\nexport const {\n  disableInputAttributeSyncing,\n  enableTrustedTypesIntegration,\n  disableSchedulerTimeoutBasedOnReactExpirationTime,\n  warnAboutSpreadingKeyToJSX,\n  replayFailedUnitOfWorkWithInvokeGuardedCallback,\n  enableFilterEmptyStringAttributesDOM,\n  enableLegacyFBSupport,\n  deferRenderPhaseUpdateToNextBatch,\n  enableDebugTracing,\n  skipUnmountedBoundaries,\n  createRootStrictEffectsByDefault,\n  enableUseRefAccessWarning,\n  disableNativeComponentFrames,\n  disableSchedulerTimeoutInWorkLoop,\n  enableLazyContextPropagation,\n  enableSyncDefaultUpdates,\n  enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay,\n  enableClientRenderFallbackOnTextMismatch,\n} = dynamicFeatureFlags;\n\n// On WWW, __EXPERIMENTAL__ is used for a new modern build.\n// It's not used anywhere in production yet.\n\nexport const enableStrictEffects =\n  __DEV__ && dynamicFeatureFlags.enableStrictEffects;\nexport const debugRenderPhaseSideEffectsForStrictMode = __DEV__;\nexport const enableProfilerTimer = __PROFILE__;\nexport const enableProfilerCommitHooks = __PROFILE__;\nexport const enableProfilerNestedUpdatePhase = __PROFILE__;\nexport const enableProfilerNestedUpdateScheduledHook =\n  __PROFILE__ && dynamicFeatureFlags.enableProfilerNestedUpdateScheduledHook;\nexport const enableUpdaterTracking = __PROFILE__;\n\nexport const enableSuspenseLayoutEffectSemantics = true;\nexport const enableSuspenseAvoidThisFallback = true;\nexport const enableSuspenseAvoidThisFallbackFizz = false;\nexport const enableCPUSuspense = true;\n\n// Logs additional User Timing API marks for use with an experimental profiling tool.\nexport const enableSchedulingProfiler =\n  __PROFILE__ && dynamicFeatureFlags.enableSchedulingProfiler;\n\n// Note: we'll want to remove this when we to userland implementation.\n// For now, we'll turn it on for everyone because it's *already* on for everyone in practice.\n// At least this will let us stop shipping <Profiler> implementation to all users.\nexport const enableSchedulerDebugging = true;\nexport const warnAboutDeprecatedLifecycles = true;\nexport const disableLegacyContext = __EXPERIMENTAL__;\nexport const warnAboutStringRefs = false;\nexport const warnAboutDefaultPropsOnFunctionComponents = false;\nexport const enableGetInspectorDataForInstanceInProduction = false;\n\nexport const enableCache = true;\nexport const enableCacheElement = true;\n\nexport const disableJavaScriptURLs = true;\n\n// TODO: www currently relies on this feature. It's disabled in open source.\n// Need to remove it.\nexport const disableCommentsAsDOMContainers = false;\n\nexport const disableModulePatternComponents = true;\n\nexport const enableCreateEventHandleAPI = true;\n\nexport const enableScopeAPI = true;\n\nexport const enableSuspenseCallback = true;\n\nexport const enableLegacyHidden = true;\n\nexport const enableComponentStackLocations = true;\n\nexport const disableTextareaChildren = __EXPERIMENTAL__;\n\n// Enable forked reconciler. Piggy-backing on the \"variant\" global so that we\n// don't have to add another test dimension. The build system will compile this\n// to the correct value.\nexport const enableNewReconciler = __VARIANT__;\n\nexport const allowConcurrentByDefault = true;\n\nexport const deletedTreeCleanUpLevel = 3;\n\nexport const consoleManagedByDevToolsDuringStrictMode = true;\nexport const enableServerContext = true;\n\n// Some www surfaces are still using this. Remove once they have been migrated.\nexport const enableUseMutableSource = true;\n\nexport const enableCustomElementPropertySupport = __EXPERIMENTAL__;\n\nexport const enableTransitionTracing = false;\n\nexport const enableSymbolFallbackForWWW = true;\n// Flow magic to verify the exports of this file match the original version.\n// eslint-disable-next-line no-unused-vars\ntype Check<_X, Y: _X, X: Y = _X> = null;\n// eslint-disable-next-line no-unused-expressions\n(null: Check<ExportsType, FeatureFlagsType>);\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\nimport {enableSymbolFallbackForWWW} from './ReactFeatureFlags';\n\nconst usePolyfill =\n  enableSymbolFallbackForWWW && (typeof Symbol !== 'function' || !Symbol.for);\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_ELEMENT_TYPE = usePolyfill\n  ? 0xeac7\n  : Symbol.for('react.element');\nexport const REACT_PORTAL_TYPE = usePolyfill\n  ? 0xeaca\n  : Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE = usePolyfill\n  ? 0xeacb\n  : Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE = usePolyfill\n  ? 0xeacc\n  : Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE = usePolyfill\n  ? 0xead2\n  : Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE = usePolyfill\n  ? 0xeacd\n  : Symbol.for('react.provider');\nexport const REACT_CONTEXT_TYPE = usePolyfill\n  ? 0xeace\n  : Symbol.for('react.context');\nexport const REACT_SERVER_CONTEXT_TYPE = usePolyfill\n  ? 0xeae6\n  : Symbol.for('react.server_context');\nexport const REACT_FORWARD_REF_TYPE = usePolyfill\n  ? 0xead0\n  : Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE = usePolyfill\n  ? 0xead1\n  : Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE = usePolyfill\n  ? 0xead8\n  : Symbol.for('react.suspense_list');\nexport const REACT_MEMO_TYPE = usePolyfill ? 0xead3 : Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE = usePolyfill ? 0xead4 : Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE = usePolyfill\n  ? 0xead7\n  : Symbol.for('react.scope');\nexport const REACT_DEBUG_TRACING_MODE_TYPE = usePolyfill\n  ? 0xeae1\n  : Symbol.for('react.debug_trace_mode');\nexport const REACT_OFFSCREEN_TYPE = usePolyfill\n  ? 0xeae2\n  : Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE = usePolyfill\n  ? 0xeae3\n  : Symbol.for('react.legacy_hidden');\nexport const REACT_CACHE_TYPE = usePolyfill\n  ? 0xeae4\n  : Symbol.for('react.cache');\nexport const REACT_TRACING_MARKER_TYPE = usePolyfill\n  ? 0xeae5\n  : Symbol.for('react.tracing_marker');\nexport const REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED = usePolyfill\n  ? 0xeae7\n  : Symbol.for('react.default_value');\nconst MAYBE_ITERATOR_SYMBOL = usePolyfill\n  ? typeof Symbol === 'function' && Symbol.iterator\n  : Symbol.iterator;\n\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Instance} from 'react-reconciler/src/ReactFiberHostConfig';\nimport type {FiberRoot} from 'react-reconciler/src/ReactInternalTypes';\nimport type {\n  Family,\n  RefreshUpdate,\n  ScheduleRefresh,\n  ScheduleRoot,\n  FindHostInstancesForRefresh,\n  SetRefreshHandler,\n} from 'react-reconciler/src/ReactFiberHotReloading';\nimport type {ReactNodeList} from 'shared/ReactTypes';\n\nimport {REACT_MEMO_TYPE, REACT_FORWARD_REF_TYPE} from 'shared/ReactSymbols';\n\ntype Signature = {|\n  ownKey: string,\n  forceReset: boolean,\n  fullKey: string | null, // Contains keys of nested Hooks. Computed lazily.\n  getCustomHooks: () => Array<Function>,\n|};\n\ntype RendererHelpers = {|\n  findHostInstancesForRefresh: FindHostInstancesForRefresh,\n  scheduleRefresh: ScheduleRefresh,\n  scheduleRoot: ScheduleRoot,\n  setRefreshHandler: SetRefreshHandler,\n|};\n\nif (!__DEV__) {\n  throw new Error(\n    'React Refresh runtime should not be included in the production bundle.',\n  );\n}\n\n// In old environments, we'll leak previous types after every edit.\nconst PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n\n// We never remove these associations.\n// It's OK to reference families, but use WeakMap/Set for types.\nconst allFamiliesByID: Map<string, Family> = new Map();\nconst allFamiliesByType: // $FlowIssue\nWeakMap<any, Family> | Map<any, Family> = new PossiblyWeakMap();\nconst allSignaturesByType: // $FlowIssue\nWeakMap<any, Signature> | Map<any, Signature> = new PossiblyWeakMap();\n// This WeakMap is read by React, so we only put families\n// that have actually been edited here. This keeps checks fast.\n// $FlowIssue\nconst updatedFamiliesByType: // $FlowIssue\nWeakMap<any, Family> | Map<any, Family> = new PossiblyWeakMap();\n\n// This is cleared on every performReactRefresh() call.\n// It is an array of [Family, NextType] tuples.\nlet pendingUpdates: Array<[Family, any]> = [];\n\n// This is injected by the renderer via DevTools global hook.\nconst helpersByRendererID: Map<number, RendererHelpers> = new Map();\n\nconst helpersByRoot: Map<FiberRoot, RendererHelpers> = new Map();\n\n// We keep track of mounted roots so we can schedule updates.\nconst mountedRoots: Set<FiberRoot> = new Set();\n// If a root captures an error, we remember it so we can retry on edit.\nconst failedRoots: Set<FiberRoot> = new Set();\n\n// In environments that support WeakMap, we also remember the last element for every root.\n// It needs to be weak because we do this even for roots that failed to mount.\n// If there is no WeakMap, we won't attempt to do retrying.\n// $FlowIssue\nconst rootElements: WeakMap<any, ReactNodeList> | null = // $FlowIssue\n  typeof WeakMap === 'function' ? new WeakMap() : null;\n\nlet isPerformingRefresh = false;\n\nfunction computeFullKey(signature: Signature): string {\n  if (signature.fullKey !== null) {\n    return signature.fullKey;\n  }\n\n  let fullKey: string = signature.ownKey;\n  let hooks;\n  try {\n    hooks = signature.getCustomHooks();\n  } catch (err) {\n    // This can happen in an edge case, e.g. if expression like Foo.useSomething\n    // depends on Foo which is lazily initialized during rendering.\n    // In that case just assume we'll have to remount.\n    signature.forceReset = true;\n    signature.fullKey = fullKey;\n    return fullKey;\n  }\n\n  for (let i = 0; i < hooks.length; i++) {\n    const hook = hooks[i];\n    if (typeof hook !== 'function') {\n      // Something's wrong. Assume we need to remount.\n      signature.forceReset = true;\n      signature.fullKey = fullKey;\n      return fullKey;\n    }\n    const nestedHookSignature = allSignaturesByType.get(hook);\n    if (nestedHookSignature === undefined) {\n      // No signature means Hook wasn't in the source code, e.g. in a library.\n      // We'll skip it because we can assume it won't change during this session.\n      continue;\n    }\n    const nestedHookKey = computeFullKey(nestedHookSignature);\n    if (nestedHookSignature.forceReset) {\n      signature.forceReset = true;\n    }\n    fullKey += '\\n---\\n' + nestedHookKey;\n  }\n\n  signature.fullKey = fullKey;\n  return fullKey;\n}\n\nfunction haveEqualSignatures(prevType, nextType) {\n  const prevSignature = allSignaturesByType.get(prevType);\n  const nextSignature = allSignaturesByType.get(nextType);\n\n  if (prevSignature === undefined && nextSignature === undefined) {\n    return true;\n  }\n  if (prevSignature === undefined || nextSignature === undefined) {\n    return false;\n  }\n  if (computeFullKey(prevSignature) !== computeFullKey(nextSignature)) {\n    return false;\n  }\n  if (nextSignature.forceReset) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction isReactClass(type) {\n  return type.prototype && type.prototype.isReactComponent;\n}\n\nfunction canPreserveStateBetween(prevType, nextType) {\n  if (isReactClass(prevType) || isReactClass(nextType)) {\n    return false;\n  }\n  if (haveEqualSignatures(prevType, nextType)) {\n    return true;\n  }\n  return false;\n}\n\nfunction resolveFamily(type) {\n  // Only check updated types to keep lookups fast.\n  return updatedFamiliesByType.get(type);\n}\n\n// If we didn't care about IE11, we could use new Map/Set(iterable).\nfunction cloneMap<K, V>(map: Map<K, V>): Map<K, V> {\n  const clone = new Map();\n  map.forEach((value, key) => {\n    clone.set(key, value);\n  });\n  return clone;\n}\nfunction cloneSet<T>(set: Set<T>): Set<T> {\n  const clone = new Set();\n  set.forEach(value => {\n    clone.add(value);\n  });\n  return clone;\n}\n\n// This is a safety mechanism to protect against rogue getters and Proxies.\nfunction getProperty(object, property) {\n  try {\n    return object[property];\n  } catch (err) {\n    // Intentionally ignore.\n    return undefined;\n  }\n}\n\nexport function performReactRefresh(): RefreshUpdate | null {\n  if (!__DEV__) {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n  if (pendingUpdates.length === 0) {\n    return null;\n  }\n  if (isPerformingRefresh) {\n    return null;\n  }\n\n  isPerformingRefresh = true;\n  try {\n    const staleFamilies = new Set();\n    const updatedFamilies = new Set();\n\n    const updates = pendingUpdates;\n    pendingUpdates = [];\n    updates.forEach(([family, nextType]) => {\n      // Now that we got a real edit, we can create associations\n      // that will be read by the React reconciler.\n      const prevType = family.current;\n      updatedFamiliesByType.set(prevType, family);\n      updatedFamiliesByType.set(nextType, family);\n      family.current = nextType;\n\n      // Determine whether this should be a re-render or a re-mount.\n      if (canPreserveStateBetween(prevType, nextType)) {\n        updatedFamilies.add(family);\n      } else {\n        staleFamilies.add(family);\n      }\n    });\n\n    // TODO: rename these fields to something more meaningful.\n    const update: RefreshUpdate = {\n      updatedFamilies, // Families that will re-render preserving state\n      staleFamilies, // Families that will be remounted\n    };\n\n    helpersByRendererID.forEach(helpers => {\n      // Even if there are no roots, set the handler on first update.\n      // This ensures that if *new* roots are mounted, they'll use the resolve handler.\n      helpers.setRefreshHandler(resolveFamily);\n    });\n\n    let didError = false;\n    let firstError = null;\n\n    // We snapshot maps and sets that are mutated during commits.\n    // If we don't do this, there is a risk they will be mutated while\n    // we iterate over them. For example, trying to recover a failed root\n    // may cause another root to be added to the failed list -- an infinite loop.\n    const failedRootsSnapshot = cloneSet(failedRoots);\n    const mountedRootsSnapshot = cloneSet(mountedRoots);\n    const helpersByRootSnapshot = cloneMap(helpersByRoot);\n\n    failedRootsSnapshot.forEach(root => {\n      const helpers = helpersByRootSnapshot.get(root);\n      if (helpers === undefined) {\n        throw new Error(\n          'Could not find helpers for a root. This is a bug in React Refresh.',\n        );\n      }\n      if (!failedRoots.has(root)) {\n        // No longer failed.\n      }\n      if (rootElements === null) {\n        return;\n      }\n      if (!rootElements.has(root)) {\n        return;\n      }\n      const element = rootElements.get(root);\n      try {\n        helpers.scheduleRoot(root, element);\n      } catch (err) {\n        if (!didError) {\n          didError = true;\n          firstError = err;\n        }\n        // Keep trying other roots.\n      }\n    });\n    mountedRootsSnapshot.forEach(root => {\n      const helpers = helpersByRootSnapshot.get(root);\n      if (helpers === undefined) {\n        throw new Error(\n          'Could not find helpers for a root. This is a bug in React Refresh.',\n        );\n      }\n      if (!mountedRoots.has(root)) {\n        // No longer mounted.\n      }\n      try {\n        helpers.scheduleRefresh(root, update);\n      } catch (err) {\n        if (!didError) {\n          didError = true;\n          firstError = err;\n        }\n        // Keep trying other roots.\n      }\n    });\n    if (didError) {\n      throw firstError;\n    }\n    return update;\n  } finally {\n    isPerformingRefresh = false;\n  }\n}\n\nexport function register(type: any, id: string): void {\n  if (__DEV__) {\n    if (type === null) {\n      return;\n    }\n    if (typeof type !== 'function' && typeof type !== 'object') {\n      return;\n    }\n\n    // This can happen in an edge case, e.g. if we register\n    // return value of a HOC but it returns a cached component.\n    // Ignore anything but the first registration for each type.\n    if (allFamiliesByType.has(type)) {\n      return;\n    }\n    // Create family or remember to update it.\n    // None of this bookkeeping affects reconciliation\n    // until the first performReactRefresh() call above.\n    let family = allFamiliesByID.get(id);\n    if (family === undefined) {\n      family = {current: type};\n      allFamiliesByID.set(id, family);\n    } else {\n      pendingUpdates.push([family, type]);\n    }\n    allFamiliesByType.set(type, family);\n\n    // Visit inner types because we might not have registered them.\n    if (typeof type === 'object' && type !== null) {\n      switch (getProperty(type, '$$typeof')) {\n        case REACT_FORWARD_REF_TYPE:\n          register(type.render, id + '$render');\n          break;\n        case REACT_MEMO_TYPE:\n          register(type.type, id + '$type');\n          break;\n      }\n    }\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function setSignature(\n  type: any,\n  key: string,\n  forceReset?: boolean = false,\n  getCustomHooks?: () => Array<Function>,\n): void {\n  if (__DEV__) {\n    if (!allSignaturesByType.has(type)) {\n      allSignaturesByType.set(type, {\n        forceReset,\n        ownKey: key,\n        fullKey: null,\n        getCustomHooks: getCustomHooks || (() => []),\n      });\n    }\n    // Visit inner types because we might not have signed them.\n    if (typeof type === 'object' && type !== null) {\n      switch (getProperty(type, '$$typeof')) {\n        case REACT_FORWARD_REF_TYPE:\n          setSignature(type.render, key, forceReset, getCustomHooks);\n          break;\n        case REACT_MEMO_TYPE:\n          setSignature(type.type, key, forceReset, getCustomHooks);\n          break;\n      }\n    }\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\n// This is lazily called during first render for a type.\n// It captures Hook list at that time so inline requires don't break comparisons.\nexport function collectCustomHooksForSignature(type: any) {\n  if (__DEV__) {\n    const signature = allSignaturesByType.get(type);\n    if (signature !== undefined) {\n      computeFullKey(signature);\n    }\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function getFamilyByID(id: string): Family | void {\n  if (__DEV__) {\n    return allFamiliesByID.get(id);\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function getFamilyByType(type: any): Family | void {\n  if (__DEV__) {\n    return allFamiliesByType.get(type);\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function findAffectedHostInstances(\n  families: Array<Family>,\n): Set<Instance> {\n  if (__DEV__) {\n    const affectedInstances = new Set();\n    mountedRoots.forEach(root => {\n      const helpers = helpersByRoot.get(root);\n      if (helpers === undefined) {\n        throw new Error(\n          'Could not find helpers for a root. This is a bug in React Refresh.',\n        );\n      }\n      const instancesForRoot = helpers.findHostInstancesForRefresh(\n        root,\n        families,\n      );\n      instancesForRoot.forEach(inst => {\n        affectedInstances.add(inst);\n      });\n    });\n    return affectedInstances;\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function injectIntoGlobalHook(globalObject: any): void {\n  if (__DEV__) {\n    // For React Native, the global hook will be set up by require('react-devtools-core').\n    // That code will run before us. So we need to monkeypatch functions on existing hook.\n\n    // For React Web, the global hook will be set up by the extension.\n    // This will also run before us.\n    let hook = globalObject.__REACT_DEVTOOLS_GLOBAL_HOOK__;\n    if (hook === undefined) {\n      // However, if there is no DevTools extension, we'll need to set up the global hook ourselves.\n      // Note that in this case it's important that renderer code runs *after* this method call.\n      // Otherwise, the renderer will think that there is no global hook, and won't do the injection.\n      let nextID = 0;\n      globalObject.__REACT_DEVTOOLS_GLOBAL_HOOK__ = hook = {\n        renderers: new Map(),\n        supportsFiber: true,\n        inject(injected) {\n          return nextID++;\n        },\n        onScheduleFiberRoot(\n          id: number,\n          root: FiberRoot,\n          children: ReactNodeList,\n        ) {},\n        onCommitFiberRoot(\n          id: number,\n          root: FiberRoot,\n          maybePriorityLevel: mixed,\n          didError: boolean,\n        ) {},\n        onCommitFiberUnmount() {},\n      };\n    }\n\n    if (hook.isDisabled) {\n      // This isn't a real property on the hook, but it can be set to opt out\n      // of DevTools integration and associated warnings and logs.\n      // Using console['warn'] to evade Babel and ESLint\n      console['warn'](\n        'Something has shimmed the React DevTools global hook (__REACT_DEVTOOLS_GLOBAL_HOOK__). ' +\n          'Fast Refresh is not compatible with this shim and will be disabled.',\n      );\n      return;\n    }\n\n    // Here, we just want to get a reference to scheduleRefresh.\n    const oldInject = hook.inject;\n    hook.inject = function(injected) {\n      const id = oldInject.apply(this, arguments);\n      if (\n        typeof injected.scheduleRefresh === 'function' &&\n        typeof injected.setRefreshHandler === 'function'\n      ) {\n        // This version supports React Refresh.\n        helpersByRendererID.set(id, ((injected: any): RendererHelpers));\n      }\n      return id;\n    };\n\n    // Do the same for any already injected roots.\n    // This is useful if ReactDOM has already been initialized.\n    // https://github.com/facebook/react/issues/17626\n    hook.renderers.forEach((injected, id) => {\n      if (\n        typeof injected.scheduleRefresh === 'function' &&\n        typeof injected.setRefreshHandler === 'function'\n      ) {\n        // This version supports React Refresh.\n        helpersByRendererID.set(id, ((injected: any): RendererHelpers));\n      }\n    });\n\n    // We also want to track currently mounted roots.\n    const oldOnCommitFiberRoot = hook.onCommitFiberRoot;\n    const oldOnScheduleFiberRoot = hook.onScheduleFiberRoot || (() => {});\n    hook.onScheduleFiberRoot = function(\n      id: number,\n      root: FiberRoot,\n      children: ReactNodeList,\n    ) {\n      if (!isPerformingRefresh) {\n        // If it was intentionally scheduled, don't attempt to restore.\n        // This includes intentionally scheduled unmounts.\n        failedRoots.delete(root);\n        if (rootElements !== null) {\n          rootElements.set(root, children);\n        }\n      }\n      return oldOnScheduleFiberRoot.apply(this, arguments);\n    };\n    hook.onCommitFiberRoot = function(\n      id: number,\n      root: FiberRoot,\n      maybePriorityLevel: mixed,\n      didError: boolean,\n    ) {\n      const helpers = helpersByRendererID.get(id);\n      if (helpers !== undefined) {\n        helpersByRoot.set(root, helpers);\n\n        const current = root.current;\n        const alternate = current.alternate;\n\n        // We need to determine whether this root has just (un)mounted.\n        // This logic is copy-pasted from similar logic in the DevTools backend.\n        // If this breaks with some refactoring, you'll want to update DevTools too.\n\n        if (alternate !== null) {\n          const wasMounted =\n            alternate.memoizedState != null &&\n            alternate.memoizedState.element != null &&\n            mountedRoots.has(root);\n\n          const isMounted =\n            current.memoizedState != null &&\n            current.memoizedState.element != null;\n\n          if (!wasMounted && isMounted) {\n            // Mount a new root.\n            mountedRoots.add(root);\n            failedRoots.delete(root);\n          } else if (wasMounted && isMounted) {\n            // Update an existing root.\n            // This doesn't affect our mounted root Set.\n          } else if (wasMounted && !isMounted) {\n            // Unmount an existing root.\n            mountedRoots.delete(root);\n            if (didError) {\n              // We'll remount it on future edits.\n              failedRoots.add(root);\n            } else {\n              helpersByRoot.delete(root);\n            }\n          } else if (!wasMounted && !isMounted) {\n            if (didError) {\n              // We'll remount it on future edits.\n              failedRoots.add(root);\n            }\n          }\n        } else {\n          // Mount a new root.\n          mountedRoots.add(root);\n        }\n      }\n\n      // Always call the decorated DevTools hook.\n      return oldOnCommitFiberRoot.apply(this, arguments);\n    };\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function hasUnrecoverableErrors() {\n  // TODO: delete this after removing dependency in RN.\n  return false;\n}\n\n// Exposed for testing.\nexport function _getMountedRootCount() {\n  if (__DEV__) {\n    return mountedRoots.size;\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\n// This is a wrapper over more primitive functions for setting signature.\n// Signatures let us decide whether the Hook order has changed on refresh.\n//\n// This function is intended to be used as a transform target, e.g.:\n// var _s = createSignatureFunctionForTransform()\n//\n// function Hello() {\n//   const [foo, setFoo] = useState(0);\n//   const value = useCustomHook();\n//   _s(); /* Call without arguments triggers collecting the custom Hook list.\n//          * This doesn't happen during the module evaluation because we\n//          * don't want to change the module order with inline requires.\n//          * Next calls are noops. */\n//   return <h1>Hi</h1>;\n// }\n//\n// /* Call with arguments attaches the signature to the type: */\n// _s(\n//   Hello,\n//   'useState{[foo, setFoo]}(0)',\n//   () => [useCustomHook], /* Lazy to avoid triggering inline requires */\n// );\nexport function createSignatureFunctionForTransform() {\n  if (__DEV__) {\n    let savedType;\n    let hasCustomHooks;\n    let didCollectHooks = false;\n    return function<T>(\n      type: T,\n      key: string,\n      forceReset?: boolean,\n      getCustomHooks?: () => Array<Function>,\n    ): T | void {\n      if (typeof key === 'string') {\n        // We're in the initial phase that associates signatures\n        // with the functions. Note this may be called multiple times\n        // in HOC chains like _s(hoc1(_s(hoc2(_s(actualFunction))))).\n        if (!savedType) {\n          // We're in the innermost call, so this is the actual type.\n          savedType = type;\n          hasCustomHooks = typeof getCustomHooks === 'function';\n        }\n        // Set the signature for all types (even wrappers!) in case\n        // they have no signatures of their own. This is to prevent\n        // problems like https://github.com/facebook/react/issues/20417.\n        if (\n          type != null &&\n          (typeof type === 'function' || typeof type === 'object')\n        ) {\n          setSignature(type, key, forceReset, getCustomHooks);\n        }\n        return type;\n      } else {\n        // We're in the _s() call without arguments, which means\n        // this is the time to collect custom Hook signatures.\n        // Only do this once. This path is hot and runs *inside* every render!\n        if (!didCollectHooks && hasCustomHooks) {\n          didCollectHooks = true;\n          collectCustomHooksForSignature(savedType);\n        }\n      }\n    };\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n\nexport function isLikelyComponentType(type: any): boolean {\n  if (__DEV__) {\n    switch (typeof type) {\n      case 'function': {\n        // First, deal with classes.\n        if (type.prototype != null) {\n          if (type.prototype.isReactComponent) {\n            // React class.\n            return true;\n          }\n          const ownNames = Object.getOwnPropertyNames(type.prototype);\n          if (ownNames.length > 1 || ownNames[0] !== 'constructor') {\n            // This looks like a class.\n            return false;\n          }\n          // eslint-disable-next-line no-proto\n          if (type.prototype.__proto__ !== Object.prototype) {\n            // It has a superclass.\n            return false;\n          }\n          // Pass through.\n          // This looks like a regular function with empty prototype.\n        }\n        // For plain functions and arrows, use name as a heuristic.\n        const name = type.name || type.displayName;\n        return typeof name === 'string' && /^[A-Z]/.test(name);\n      }\n      case 'object': {\n        if (type != null) {\n          switch (getProperty(type, '$$typeof')) {\n            case REACT_FORWARD_REF_TYPE:\n            case REACT_MEMO_TYPE:\n              // Definitely React components.\n              return true;\n            default:\n              return false;\n          }\n        }\n        return false;\n      }\n      default: {\n        return false;\n      }\n    }\n  } else {\n    throw new Error(\n      'Unexpected call to React Refresh in a production environment.',\n    );\n  }\n}\n"],"names":["dynamicFeatureFlags","require","disableInputAttributeSyncing","enableTrustedTypesIntegration","disableSchedulerTimeoutBasedOnReactExpirationTime","warnAboutSpreadingKeyToJSX","replayFailedUnitOfWorkWithInvokeGuardedCallback","enableFilterEmptyStringAttributesDOM","enableLegacyFBSupport","deferRenderPhaseUpdateToNextBatch","enableDebugTracing","skipUnmountedBoundaries","createRootStrictEffectsByDefault","enableUseRefAccessWarning","disableNativeComponentFrames","disableSchedulerTimeoutInWorkLoop","enableLazyContextPropagation","enableSyncDefaultUpdates","enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay","enableClientRenderFallbackOnTextMismatch","enableStrictEffects","enableProfilerNestedUpdateScheduledHook","enableSchedulingProfiler","usePolyfill","enableSymbolFallbackForWWW","Symbol","for","REACT_FORWARD_REF_TYPE","REACT_MEMO_TYPE","PossiblyWeakMap","WeakMap","Map","allFamiliesByID","allFamiliesByType","allSignaturesByType","updatedFamiliesByType","pendingUpdates","helpersByRendererID","helpersByRoot","mountedRoots","Set","failedRoots","rootElements","isPerformingRefresh","computeFullKey","signature","fullKey","ownKey","hooks","getCustomHooks","err","forceReset","i","length","hook","nestedHookSignature","get","undefined","nestedHookKey","haveEqualSignatures","prevType","nextType","prevSignature","nextSignature","isReactClass","type","prototype","isReactComponent","canPreserveStateBetween","resolveFamily","cloneMap","map","clone","forEach","value","key","set","cloneSet","add","getProperty","object","property","performReactRefresh","staleFamilies","updatedFamilies","updates","family","current","update","helpers","setRefreshHandler","didError","firstError","failedRootsSnapshot","mountedRootsSnapshot","helpersByRootSnapshot","root","Error","has","element","scheduleRoot","scheduleRefresh","register","id","push","render","setSignature","collectCustomHooksForSignature","getFamilyByID","getFamilyByType","findAffectedHostInstances","families","affectedInstances","instancesForRoot","findHostInstancesForRefresh","inst","injectIntoGlobalHook","globalObject","__REACT_DEVTOOLS_GLOBAL_HOOK__","nextID","renderers","supportsFiber","inject","injected","onScheduleFiberRoot","children","onCommitFiberRoot","maybePriorityLevel","onCommitFiberUnmount","isDisabled","console","oldInject","apply","arguments","oldOnCommitFiberRoot","oldOnScheduleFiberRoot","delete","alternate","wasMounted","memoizedState","isMounted","hasUnrecoverableErrors","_getMountedRootCount","size","createSignatureFunctionForTransform","savedType","hasCustomHooks","didCollectHooks","isLikelyComponentType","ownNames","Object","getOwnPropertyNames","__proto__","name","displayName","test"],"mappings":"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"}