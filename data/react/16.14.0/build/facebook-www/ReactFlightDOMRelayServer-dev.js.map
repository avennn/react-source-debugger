{"version":3,"file":"ReactFlightDOMRelayServer-dev.js","sources":["../../packages/shared/forks/consoleWithStackDev.www.js","../../packages/react-transport-dom-relay/src/ReactFlightDOMRelayServerHostConfig.js","../../packages/shared/ReactSymbols.js","../../packages/shared/ReactSharedInternals.js","../../packages/react-server/src/ReactFlightServer.js","../../packages/react-transport-dom-relay/src/ReactFlightDOMRelayServer.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This refers to a WWW module.\nconst warningWWW = require('warning');\n\nexport function warn(format, ...args) {\n  if (__DEV__) {\n    printWarning('warn', format, args);\n  }\n}\n\nexport function error(format, ...args) {\n  if (__DEV__) {\n    printWarning('error', format, args);\n  }\n}\n\nfunction printWarning(level, format, args) {\n  if (__DEV__) {\n    const React = require('react');\n    const ReactSharedInternals =\n      React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n    // Defensive in case this is fired before React is initialized.\n    if (ReactSharedInternals != null) {\n      const ReactDebugCurrentFrame =\n        ReactSharedInternals.ReactDebugCurrentFrame;\n      const stack = ReactDebugCurrentFrame.getStackAddendum();\n      if (stack !== '') {\n        format += '%s';\n        args.push(stack);\n      }\n    }\n    // TODO: don't ignore level and pass it down somewhere too.\n    args.unshift(format);\n    args.unshift(false);\n    warningWWW.apply(null, args);\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Request, ReactModel} from 'react-server/src/ReactFlightServer';\n\nimport type {\n  Destination,\n  BundlerConfig,\n  ModuleReference,\n  ModuleMetaData,\n} from 'ReactFlightDOMRelayServerIntegration';\n\nimport {resolveModelToJSON} from 'react-server/src/ReactFlightServer';\n\nimport {\n  emitModel,\n  emitError,\n  resolveModuleMetaData as resolveModuleMetaDataImpl,\n} from 'ReactFlightDOMRelayServerIntegration';\n\nexport type {\n  Destination,\n  BundlerConfig,\n  ModuleReference,\n  ModuleMetaData,\n} from 'ReactFlightDOMRelayServerIntegration';\n\nexport function resolveModuleMetaData<T>(\n  config: BundlerConfig,\n  resource: ModuleReference<T>,\n): ModuleMetaData {\n  return resolveModuleMetaDataImpl(config, resource);\n}\n\ntype JSONValue =\n  | string\n  | number\n  | boolean\n  | null\n  | {+[key: string]: JSONValue}\n  | Array<JSONValue>;\n\nexport type Chunk =\n  | {\n      type: 'json',\n      id: number,\n      json: JSONValue,\n    }\n  | {\n      type: 'error',\n      id: number,\n      json: {\n        message: string,\n        stack: string,\n        ...\n      },\n    };\n\nexport function processErrorChunk(\n  request: Request,\n  id: number,\n  message: string,\n  stack: string,\n): Chunk {\n  return {\n    type: 'error',\n    id: id,\n    json: {\n      message,\n      stack,\n    },\n  };\n}\n\nfunction convertModelToJSON(\n  request: Request,\n  parent: {+[key: string]: ReactModel} | $ReadOnlyArray<ReactModel>,\n  key: string,\n  model: ReactModel,\n): JSONValue {\n  const json = resolveModelToJSON(request, parent, key, model);\n  if (typeof json === 'object' && json !== null) {\n    if (Array.isArray(json)) {\n      const jsonArray: Array<JSONValue> = [];\n      for (let i = 0; i < json.length; i++) {\n        jsonArray[i] = convertModelToJSON(request, json, '' + i, json[i]);\n      }\n      return jsonArray;\n    } else {\n      const jsonObj: {[key: string]: JSONValue} = {};\n      for (const nextKey in json) {\n        jsonObj[nextKey] = convertModelToJSON(\n          request,\n          json,\n          nextKey,\n          json[nextKey],\n        );\n      }\n      return jsonObj;\n    }\n  }\n  return json;\n}\n\nexport function processModelChunk(\n  request: Request,\n  id: number,\n  model: ReactModel,\n): Chunk {\n  const json = convertModelToJSON(request, {}, '', model);\n  return {\n    type: 'json',\n    id: id,\n    json: json,\n  };\n}\n\nexport function scheduleWork(callback: () => void) {\n  callback();\n}\n\nexport function flushBuffered(destination: Destination) {}\n\nexport function beginWriting(destination: Destination) {}\n\nexport function writeChunk(destination: Destination, chunk: Chunk): boolean {\n  if (chunk.type === 'json') {\n    emitModel(destination, chunk.id, chunk.json);\n  } else {\n    emitError(destination, chunk.id, chunk.json.message, chunk.json.stack);\n  }\n  return true;\n}\n\nexport function completeWriting(destination: Destination) {}\n\nexport {close} from 'ReactFlightDOMRelayServerIntegration';\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nexport let REACT_ELEMENT_TYPE = 0xeac7;\nexport let REACT_PORTAL_TYPE = 0xeaca;\nexport let REACT_FRAGMENT_TYPE = 0xeacb;\nexport let REACT_STRICT_MODE_TYPE = 0xeacc;\nexport let REACT_PROFILER_TYPE = 0xead2;\nexport let REACT_PROVIDER_TYPE = 0xeacd;\nexport let REACT_CONTEXT_TYPE = 0xeace;\nexport let REACT_FORWARD_REF_TYPE = 0xead0;\nexport let REACT_SUSPENSE_TYPE = 0xead1;\nexport let REACT_SUSPENSE_LIST_TYPE = 0xead8;\nexport let REACT_MEMO_TYPE = 0xead3;\nexport let REACT_LAZY_TYPE = 0xead4;\nexport let REACT_BLOCK_TYPE = 0xead9;\nexport let REACT_SERVER_BLOCK_TYPE = 0xeada;\nexport let REACT_FUNDAMENTAL_TYPE = 0xead5;\nexport let REACT_SCOPE_TYPE = 0xead7;\nexport let REACT_OPAQUE_ID_TYPE = 0xeae0;\nexport let REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nexport let REACT_OFFSCREEN_TYPE = 0xeae2;\nexport let REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  const symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  REACT_FRAGMENT_TYPE = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  REACT_SCOPE_TYPE = symbolFor('react.scope');\n  REACT_OPAQUE_ID_TYPE = symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  REACT_OFFSCREEN_TYPE = symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\nconst MAYBE_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Dispatcher as DispatcherType} from 'react-reconciler/src/ReactInternalTypes';\nimport type {\n  Destination,\n  Chunk,\n  BundlerConfig,\n  ModuleMetaData,\n  ModuleReference,\n} from './ReactFlightServerConfig';\n\nimport {\n  scheduleWork,\n  beginWriting,\n  writeChunk,\n  completeWriting,\n  flushBuffered,\n  close,\n  processModelChunk,\n  processErrorChunk,\n  resolveModuleMetaData,\n} from './ReactFlightServerConfig';\n\nimport {\n  REACT_BLOCK_TYPE,\n  REACT_ELEMENT_TYPE,\n  REACT_DEBUG_TRACING_MODE_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_LEGACY_HIDDEN_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_OFFSCREEN_TYPE,\n  REACT_PROFILER_TYPE,\n  REACT_SCOPE_TYPE,\n  REACT_SERVER_BLOCK_TYPE,\n  REACT_STRICT_MODE_TYPE,\n  REACT_SUSPENSE_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n} from 'shared/ReactSymbols';\n\nimport * as React from 'react';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport invariant from 'shared/invariant';\n\nconst isArray = Array.isArray;\n\ntype ReactJSONValue =\n  | string\n  | boolean\n  | number\n  | null\n  | $ReadOnlyArray<ReactJSONValue>\n  | ReactModelObject;\n\nexport type ReactModel =\n  | React$Element<any>\n  | string\n  | boolean\n  | number\n  | null\n  | Iterable<ReactModel>\n  | ReactModelObject;\n\ntype ReactModelObject = {+[key: string]: ReactModel};\n\ntype Segment = {\n  id: number,\n  query: () => ReactModel,\n  ping: () => void,\n};\n\nexport type Request = {\n  destination: Destination,\n  bundlerConfig: BundlerConfig,\n  nextChunkId: number,\n  pendingChunks: number,\n  pingedSegments: Array<Segment>,\n  completedJSONChunks: Array<Chunk>,\n  completedErrorChunks: Array<Chunk>,\n  flowing: boolean,\n  toJSON: (key: string, value: ReactModel) => ReactJSONValue,\n};\n\nconst ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n\nexport function createRequest(\n  model: ReactModel,\n  destination: Destination,\n  bundlerConfig: BundlerConfig,\n): Request {\n  const pingedSegments = [];\n  const request = {\n    destination,\n    bundlerConfig,\n    nextChunkId: 0,\n    pendingChunks: 0,\n    pingedSegments: pingedSegments,\n    completedJSONChunks: [],\n    completedErrorChunks: [],\n    flowing: false,\n    toJSON: function(key: string, value: ReactModel): ReactJSONValue {\n      return resolveModelToJSON(request, this, key, value);\n    },\n  };\n  request.pendingChunks++;\n  const rootSegment = createSegment(request, () => model);\n  pingedSegments.push(rootSegment);\n  return request;\n}\n\nfunction attemptResolveElement(element: React$Element<any>): ReactModel {\n  const type = element.type;\n  const props = element.props;\n  if (element.ref !== null && element.ref !== undefined) {\n    // When the ref moves to the regular props object this will implicitly\n    // throw for functions. We could probably relax it to a DEV warning for other\n    // cases.\n    invariant(\n      false,\n      'Refs cannot be used in server components, nor passed to client components.',\n    );\n  }\n  if (typeof type === 'function') {\n    // This is a server-side component.\n    return type(props);\n  } else if (typeof type === 'string') {\n    // This is a host element. E.g. HTML.\n    return [REACT_ELEMENT_TYPE, type, element.key, element.props];\n  } else if (type[0] === REACT_SERVER_BLOCK_TYPE) {\n    return [REACT_ELEMENT_TYPE, type, element.key, element.props];\n  } else if (\n    type === REACT_FRAGMENT_TYPE ||\n    type === REACT_STRICT_MODE_TYPE ||\n    type === REACT_PROFILER_TYPE ||\n    type === REACT_SCOPE_TYPE ||\n    type === REACT_DEBUG_TRACING_MODE_TYPE ||\n    type === REACT_LEGACY_HIDDEN_TYPE ||\n    type === REACT_OFFSCREEN_TYPE ||\n    // TODO: These are temporary shims\n    // and we'll want a different behavior.\n    type === REACT_SUSPENSE_TYPE ||\n    type === REACT_SUSPENSE_LIST_TYPE\n  ) {\n    return element.props.children;\n  } else if (type != null && typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE: {\n        const render = type.render;\n        return render(props, undefined);\n      }\n      case REACT_MEMO_TYPE: {\n        const nextChildren = React.createElement(type.type, element.props);\n        return attemptResolveElement(nextChildren);\n      }\n    }\n  }\n  invariant(\n    false,\n    'Unsupported server component type: %s',\n    describeValueForErrorMessage(type),\n  );\n}\n\nfunction pingSegment(request: Request, segment: Segment): void {\n  const pingedSegments = request.pingedSegments;\n  pingedSegments.push(segment);\n  if (pingedSegments.length === 1) {\n    scheduleWork(() => performWork(request));\n  }\n}\n\nfunction createSegment(request: Request, query: () => ReactModel): Segment {\n  const id = request.nextChunkId++;\n  const segment = {\n    id,\n    query,\n    ping: () => pingSegment(request, segment),\n  };\n  return segment;\n}\n\nfunction serializeIDRef(id: number): string {\n  return '$' + id.toString(16);\n}\n\nfunction escapeStringValue(value: string): string {\n  if (value[0] === '$' || value[0] === '@') {\n    // We need to escape $ or @ prefixed strings since we use those to encode\n    // references to IDs and as special symbol values.\n    return '$' + value;\n  } else {\n    return value;\n  }\n}\n\nfunction isObjectPrototype(object): boolean {\n  if (!object) {\n    return false;\n  }\n  // $FlowFixMe\n  const ObjectPrototype = Object.prototype;\n  if (object === ObjectPrototype) {\n    return true;\n  }\n  // It might be an object from a different Realm which is\n  // still just a plain simple object.\n  if (Object.getPrototypeOf(object)) {\n    return false;\n  }\n  const names = Object.getOwnPropertyNames(object);\n  for (let i = 0; i < names.length; i++) {\n    if (!(names[i] in ObjectPrototype)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isSimpleObject(object): boolean {\n  if (!isObjectPrototype(Object.getPrototypeOf(object))) {\n    return false;\n  }\n  const names = Object.getOwnPropertyNames(object);\n  for (let i = 0; i < names.length; i++) {\n    const descriptor = Object.getOwnPropertyDescriptor(object, names[i]);\n    if (!descriptor) {\n      return false;\n    }\n    if (!descriptor.enumerable) {\n      if (\n        (names[i] === 'key' || names[i] === 'ref') &&\n        typeof descriptor.get === 'function'\n      ) {\n        // React adds key and ref getters to props objects to issue warnings.\n        // Those getters will not be transferred to the client, but that's ok,\n        // so we'll special case them.\n        continue;\n      }\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction objectName(object): string {\n  const name = Object.prototype.toString.call(object);\n  return name.replace(/^\\[object (.*)\\]$/, function(m, p0) {\n    return p0;\n  });\n}\n\nfunction describeKeyForErrorMessage(key: string): string {\n  const encodedKey = JSON.stringify(key);\n  return '\"' + key + '\"' === encodedKey ? key : encodedKey;\n}\n\nfunction describeValueForErrorMessage(value: ReactModel): string {\n  switch (typeof value) {\n    case 'string': {\n      return JSON.stringify(\n        value.length <= 10 ? value : value.substr(0, 10) + '...',\n      );\n    }\n    case 'object': {\n      if (isArray(value)) {\n        return '[...]';\n      }\n      const name = objectName(value);\n      if (name === 'Object') {\n        return '{...}';\n      }\n      return name;\n    }\n    case 'function':\n      return 'function';\n    default:\n      // eslint-disable-next-line\n      return String(value);\n  }\n}\n\nfunction describeObjectForErrorMessage(\n  objectOrArray:\n    | {+[key: string | number]: ReactModel}\n    | $ReadOnlyArray<ReactModel>,\n  expandedName?: string,\n): string {\n  if (isArray(objectOrArray)) {\n    let str = '[';\n    // $FlowFixMe: Should be refined by now.\n    const array: $ReadOnlyArray<ReactModel> = objectOrArray;\n    for (let i = 0; i < array.length; i++) {\n      if (i > 0) {\n        str += ', ';\n      }\n      if (i > 6) {\n        str += '...';\n        break;\n      }\n      const value = array[i];\n      if (\n        '' + i === expandedName &&\n        typeof value === 'object' &&\n        value !== null\n      ) {\n        str += describeObjectForErrorMessage(value);\n      } else {\n        str += describeValueForErrorMessage(value);\n      }\n    }\n    str += ']';\n    return str;\n  } else {\n    let str = '{';\n    // $FlowFixMe: Should be refined by now.\n    const object: {+[key: string | number]: ReactModel} = objectOrArray;\n    const names = Object.keys(object);\n    for (let i = 0; i < names.length; i++) {\n      if (i > 0) {\n        str += ', ';\n      }\n      if (i > 6) {\n        str += '...';\n        break;\n      }\n      const name = names[i];\n      str += describeKeyForErrorMessage(name) + ': ';\n      const value = object[name];\n      if (\n        name === expandedName &&\n        typeof value === 'object' &&\n        value !== null\n      ) {\n        str += describeObjectForErrorMessage(value);\n      } else {\n        str += describeValueForErrorMessage(value);\n      }\n    }\n    str += '}';\n    return str;\n  }\n}\n\nexport function resolveModelToJSON(\n  request: Request,\n  parent: {+[key: string | number]: ReactModel} | $ReadOnlyArray<ReactModel>,\n  key: string,\n  value: ReactModel,\n): ReactJSONValue {\n  if (__DEV__) {\n    // $FlowFixMe\n    const originalValue = parent[key];\n    if (typeof originalValue === 'object' && originalValue !== value) {\n      console.error(\n        'Only plain objects can be passed to client components from server components. ' +\n          'Objects with toJSON methods are not supported. Convert it manually ' +\n          'to a simple value before passing it to props. ' +\n          'Remove %s from these props: %s',\n        describeKeyForErrorMessage(key),\n        describeObjectForErrorMessage(parent),\n      );\n    }\n  }\n\n  // Special Symbols\n  switch (value) {\n    case REACT_ELEMENT_TYPE:\n      return '$';\n    case REACT_SERVER_BLOCK_TYPE:\n      return '@';\n    case REACT_LAZY_TYPE:\n    case REACT_BLOCK_TYPE:\n      invariant(\n        false,\n        'React Blocks (and Lazy Components) are expected to be replaced by a ' +\n          'compiler on the server. Try configuring your compiler set up and avoid ' +\n          'using React.lazy inside of Blocks.',\n      );\n  }\n\n  if (parent[0] === REACT_SERVER_BLOCK_TYPE) {\n    // We're currently encoding part of a Block. Look up which key.\n    switch (key) {\n      case '1': {\n        // Module reference\n        const moduleReference: ModuleReference<any> = (value: any);\n        try {\n          const moduleMetaData: ModuleMetaData = resolveModuleMetaData(\n            request.bundlerConfig,\n            moduleReference,\n          );\n          return (moduleMetaData: ReactJSONValue);\n        } catch (x) {\n          request.pendingChunks++;\n          const errorId = request.nextChunkId++;\n          emitErrorChunk(request, errorId, x);\n          return serializeIDRef(errorId);\n        }\n      }\n      case '2': {\n        // Load function\n        const load: () => ReactModel = (value: any);\n        try {\n          // Attempt to resolve the data.\n          return load();\n        } catch (x) {\n          if (\n            typeof x === 'object' &&\n            x !== null &&\n            typeof x.then === 'function'\n          ) {\n            // Something suspended, we'll need to create a new segment and resolve it later.\n            request.pendingChunks++;\n            const newSegment = createSegment(request, load);\n            const ping = newSegment.ping;\n            x.then(ping, ping);\n            return serializeIDRef(newSegment.id);\n          } else {\n            // This load failed, encode the error as a separate row and reference that.\n            request.pendingChunks++;\n            const errorId = request.nextChunkId++;\n            emitErrorChunk(request, errorId, x);\n            return serializeIDRef(errorId);\n          }\n        }\n      }\n      default: {\n        invariant(\n          false,\n          'A server block should never encode any other slots. This is a bug in React.',\n        );\n      }\n    }\n  }\n\n  // Resolve server components.\n  while (\n    typeof value === 'object' &&\n    value !== null &&\n    value.$$typeof === REACT_ELEMENT_TYPE\n  ) {\n    // TODO: Concatenate keys of parents onto children.\n    const element: React$Element<any> = (value: any);\n    try {\n      // Attempt to render the server component.\n      value = attemptResolveElement(element);\n    } catch (x) {\n      if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n        // Something suspended, we'll need to create a new segment and resolve it later.\n        request.pendingChunks++;\n        const newSegment = createSegment(request, () => value);\n        const ping = newSegment.ping;\n        x.then(ping, ping);\n        return serializeIDRef(newSegment.id);\n      } else {\n        // Something errored. Don't bother encoding anything up to here.\n        throw x;\n      }\n    }\n  }\n\n  if (typeof value === 'object') {\n    if (__DEV__) {\n      if (value !== null && !isArray(value)) {\n        // Verify that this is a simple plain object.\n        if (objectName(value) !== 'Object') {\n          console.error(\n            'Only plain objects can be passed to client components from server components. ' +\n              'Built-ins like %s are not supported. ' +\n              'Remove %s from these props: %s',\n            objectName(value),\n            describeKeyForErrorMessage(key),\n            describeObjectForErrorMessage(parent),\n          );\n        } else if (!isSimpleObject(value)) {\n          console.error(\n            'Only plain objects can be passed to client components from server components. ' +\n              'Classes or other objects with methods are not supported. ' +\n              'Remove %s from these props: %s',\n            describeKeyForErrorMessage(key),\n            describeObjectForErrorMessage(parent, key),\n          );\n        } else if (Object.getOwnPropertySymbols) {\n          const symbols = Object.getOwnPropertySymbols(value);\n          if (symbols.length > 0) {\n            console.error(\n              'Only plain objects can be passed to client components from server components. ' +\n                'Objects with symbol properties like %s are not supported. ' +\n                'Remove %s from these props: %s',\n              symbols[0].description,\n              describeKeyForErrorMessage(key),\n              describeObjectForErrorMessage(parent, key),\n            );\n          }\n        }\n      }\n    }\n    return value;\n  }\n\n  if (typeof value === 'string') {\n    return escapeStringValue(value);\n  }\n\n  if (\n    typeof value === 'boolean' ||\n    typeof value === 'number' ||\n    typeof value === 'undefined'\n  ) {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    if (/^on[A-Z]/.test(key)) {\n      invariant(\n        false,\n        'Event handlers cannot be passed to client component props. ' +\n          'Remove %s from these props if possible: %s\\n' +\n          'If you need interactivity, consider converting part of this to a client component.',\n        describeKeyForErrorMessage(key),\n        describeObjectForErrorMessage(parent),\n      );\n    } else {\n      invariant(\n        false,\n        'Functions cannot be passed directly to client components ' +\n          \"because they're not serializable. \" +\n          'Remove %s (%s) from this object, or avoid the entire object: %s',\n        describeKeyForErrorMessage(key),\n        value.displayName || value.name || 'function',\n        describeObjectForErrorMessage(parent),\n      );\n    }\n  }\n\n  if (typeof value === 'symbol') {\n    invariant(\n      false,\n      'Symbol values (%s) cannot be passed to client components. ' +\n        'Remove %s from this object, or avoid the entire object: %s',\n      value.description,\n      describeKeyForErrorMessage(key),\n      describeObjectForErrorMessage(parent),\n    );\n  }\n\n  // $FlowFixMe: bigint isn't added to Flow yet.\n  if (typeof value === 'bigint') {\n    invariant(\n      false,\n      'BigInt (%s) is not yet supported in client component props. ' +\n        'Remove %s from this object or use a plain number instead: %s',\n      value,\n      describeKeyForErrorMessage(key),\n      describeObjectForErrorMessage(parent),\n    );\n  }\n\n  invariant(\n    false,\n    'Type %s is not supported in client component props. ' +\n      'Remove %s from this object, or avoid the entire object: %s',\n    typeof value,\n    describeKeyForErrorMessage(key),\n    describeObjectForErrorMessage(parent),\n  );\n}\n\nfunction emitErrorChunk(request: Request, id: number, error: mixed): void {\n  // TODO: We should not leak error messages to the client in prod.\n  // Give this an error code instead and log on the server.\n  // We can serialize the error in DEV as a convenience.\n  let message;\n  let stack = '';\n  try {\n    if (error instanceof Error) {\n      message = '' + error.message;\n      stack = '' + error.stack;\n    } else {\n      message = 'Error: ' + (error: any);\n    }\n  } catch (x) {\n    message = 'An error occurred but serializing the error message failed.';\n  }\n\n  const processedChunk = processErrorChunk(request, id, message, stack);\n  request.completedErrorChunks.push(processedChunk);\n}\n\nfunction retrySegment(request: Request, segment: Segment): void {\n  const query = segment.query;\n  let value;\n  try {\n    value = query();\n    while (\n      typeof value === 'object' &&\n      value !== null &&\n      value.$$typeof === REACT_ELEMENT_TYPE\n    ) {\n      // TODO: Concatenate keys of parents onto children.\n      const element: React$Element<any> = (value: any);\n      // Attempt to render the server component.\n      // Doing this here lets us reuse this same segment if the next component\n      // also suspends.\n      segment.query = () => value;\n      value = attemptResolveElement(element);\n    }\n    const processedChunk = processModelChunk(request, segment.id, value);\n    request.completedJSONChunks.push(processedChunk);\n  } catch (x) {\n    if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n      // Something suspended again, let's pick it back up later.\n      const ping = segment.ping;\n      x.then(ping, ping);\n      return;\n    } else {\n      // This errored, we need to serialize this error to the\n      emitErrorChunk(request, segment.id, x);\n    }\n  }\n}\n\nfunction performWork(request: Request): void {\n  const prevDispatcher = ReactCurrentDispatcher.current;\n  ReactCurrentDispatcher.current = Dispatcher;\n\n  const pingedSegments = request.pingedSegments;\n  request.pingedSegments = [];\n  for (let i = 0; i < pingedSegments.length; i++) {\n    const segment = pingedSegments[i];\n    retrySegment(request, segment);\n  }\n  if (request.flowing) {\n    flushCompletedChunks(request);\n  }\n\n  ReactCurrentDispatcher.current = prevDispatcher;\n}\n\nlet reentrant = false;\nfunction flushCompletedChunks(request: Request): void {\n  if (reentrant) {\n    return;\n  }\n  reentrant = true;\n  const destination = request.destination;\n  beginWriting(destination);\n  try {\n    const jsonChunks = request.completedJSONChunks;\n    let i = 0;\n    for (; i < jsonChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = jsonChunks[i];\n      if (!writeChunk(destination, chunk)) {\n        request.flowing = false;\n        i++;\n        break;\n      }\n    }\n    jsonChunks.splice(0, i);\n    const errorChunks = request.completedErrorChunks;\n    i = 0;\n    for (; i < errorChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = errorChunks[i];\n      if (!writeChunk(destination, chunk)) {\n        request.flowing = false;\n        i++;\n        break;\n      }\n    }\n    errorChunks.splice(0, i);\n  } finally {\n    reentrant = false;\n    completeWriting(destination);\n  }\n  flushBuffered(destination);\n  if (request.pendingChunks === 0) {\n    // We're done.\n    close(destination);\n  }\n}\n\nexport function startWork(request: Request): void {\n  request.flowing = true;\n  scheduleWork(() => performWork(request));\n}\n\nexport function startFlowing(request: Request): void {\n  request.flowing = true;\n  flushCompletedChunks(request);\n}\n\nfunction unsupportedHook(): void {\n  invariant(false, 'This Hook is not supported in Server Components.');\n}\n\nconst Dispatcher: DispatcherType = {\n  useMemo<T>(nextCreate: () => T): T {\n    return nextCreate();\n  },\n  useCallback<T>(callback: T): T {\n    return callback;\n  },\n  useDebugValue(): void {},\n  useDeferredValue<T>(value: T): T {\n    return value;\n  },\n  useTransition(): [(callback: () => void) => void, boolean] {\n    return [() => {}, false];\n  },\n  readContext: (unsupportedHook: any),\n  useContext: (unsupportedHook: any),\n  useReducer: (unsupportedHook: any),\n  useRef: (unsupportedHook: any),\n  useState: (unsupportedHook: any),\n  useLayoutEffect: (unsupportedHook: any),\n  useImperativeHandle: (unsupportedHook: any),\n  useEffect: (unsupportedHook: any),\n  useOpaqueIdentifier: (unsupportedHook: any),\n  useMutableSource: (unsupportedHook: any),\n};\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {ReactModel} from 'react-server/src/ReactFlightServer';\nimport type {\n  BundlerConfig,\n  Destination,\n} from './ReactFlightDOMRelayServerHostConfig';\n\nimport {createRequest, startWork} from 'react-server/src/ReactFlightServer';\n\nfunction render(\n  model: ReactModel,\n  destination: Destination,\n  config: BundlerConfig,\n): void {\n  const request = createRequest(model, destination, config);\n  startWork(request);\n}\n\nexport {render};\n"],"names":["warningWWW","require","error","format","args","printWarning","level","React","ReactSharedInternals","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactDebugCurrentFrame","stack","getStackAddendum","push","unshift","apply","resolveModuleMetaData","config","resource","resolveModuleMetaDataImpl","processErrorChunk","request","id","message","type","json","convertModelToJSON","parent","key","model","resolveModelToJSON","Array","isArray","jsonArray","i","length","jsonObj","nextKey","processModelChunk","scheduleWork","callback","writeChunk","destination","chunk","emitModel","emitError","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_SERVER_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_SCOPE_TYPE","REACT_OPAQUE_ID_TYPE","REACT_DEBUG_TRACING_MODE_TYPE","REACT_OFFSCREEN_TYPE","REACT_LEGACY_HIDDEN_TYPE","Symbol","for","symbolFor","ReactCurrentDispatcher","createRequest","bundlerConfig","pingedSegments","nextChunkId","pendingChunks","completedJSONChunks","completedErrorChunks","flowing","toJSON","value","rootSegment","createSegment","attemptResolveElement","element","props","ref","undefined","children","$$typeof","render","nextChildren","describeValueForErrorMessage","pingSegment","segment","performWork","query","ping","serializeIDRef","toString","escapeStringValue","isObjectPrototype","object","ObjectPrototype","Object","prototype","getPrototypeOf","names","getOwnPropertyNames","isSimpleObject","descriptor","getOwnPropertyDescriptor","enumerable","get","objectName","name","call","replace","m","p0","describeKeyForErrorMessage","encodedKey","JSON","stringify","substr","String","describeObjectForErrorMessage","objectOrArray","expandedName","str","array","keys","originalValue","moduleReference","moduleMetaData","x","errorId","emitErrorChunk","load","then","newSegment","getOwnPropertySymbols","symbols","description","test","displayName","Error","processedChunk","retrySegment","prevDispatcher","current","Dispatcher","flushCompletedChunks","reentrant","beginWriting","jsonChunks","splice","errorChunks","completeWriting","close","startWork","unsupportedHook","useMemo","nextCreate","useCallback","useDebugValue","useDeferredValue","useTransition","readContext","useContext","useReducer","useRef","useState","useLayoutEffect","useImperativeHandle","useEffect","useOpaqueIdentifier","useMutableSource"],"mappings":"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"}