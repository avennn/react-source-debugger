{"version":3,"file":"react-transport-dom-webpack-server.browser.development.js","sources":["../../../../packages/shared/ReactSharedInternals.js","../../../../packages/shared/consoleWithStackDev.js","../../../../packages/react-server/src/ReactServerStreamConfigBrowser.js","../../../../packages/react-server/src/ReactFlightServerConfigStream.js","../../../../packages/react-transport-dom-webpack/src/ReactFlightServerWebpackBundlerConfig.js","../../../../packages/shared/ReactSymbols.js","../../../../packages/react-server/src/ReactFlightServer.js","../../../../packages/react-transport-dom-webpack/src/ReactFlightDOMServerBrowser.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\n\n// In DEV, calls to console.warn and console.error get replaced\n// by calls to these methods by a Babel plugin.\n//\n// In PROD (or in packages without access to React internals),\n// they are left as they are instead.\n\nexport function warn(format, ...args) {\n  if (__DEV__) {\n    printWarning('warn', format, args);\n  }\n}\n\nexport function error(format, ...args) {\n  if (__DEV__) {\n    printWarning('error', format, args);\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  if (__DEV__) {\n    const ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    const stack = ReactDebugCurrentFrame.getStackAddendum();\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    }\n\n    const argsWithFormat = args.map(item => '' + item);\n    // Careful: RN currently depends on this prefix\n    argsWithFormat.unshift('Warning: ' + format);\n    // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport type Destination = ReadableStreamController;\n\nexport function scheduleWork(callback: () => void) {\n  callback();\n}\n\nexport function flushBuffered(destination: Destination) {\n  // WHATWG Streams do not yet have a way to flush the underlying\n  // transform streams. https://github.com/whatwg/streams/issues/960\n}\n\nexport function beginWriting(destination: Destination) {}\n\nexport function writeChunk(\n  destination: Destination,\n  buffer: Uint8Array,\n): boolean {\n  destination.enqueue(buffer);\n  return destination.desiredSize > 0;\n}\n\nexport function completeWriting(destination: Destination) {}\n\nexport function close(destination: Destination) {\n  destination.close();\n}\n\nconst textEncoder = new TextEncoder();\n\nexport function convertStringToBuffer(content: string): Uint8Array {\n  return textEncoder.encode(content);\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// This file is an intermediate layer to translate between Flight\n// calls to stream output over a binary stream.\n\n/*\nFLIGHT PROTOCOL GRAMMAR\n\nResponse\n- JSONData RowSequence\n- JSONData\n\nRowSequence\n- Row RowSequence\n- Row\n\nRow\n- \"J\" RowID JSONData\n- \"H\" RowID HTMLData\n- \"B\" RowID BlobData\n- \"U\" RowID URLData\n- \"E\" RowID ErrorData\n\nRowID\n- HexDigits \":\"\n\nHexDigits\n- HexDigit HexDigits\n- HexDigit\n\nHexDigit\n- 0-F\n\nURLData\n- (UTF8 encoded URL) \"\\n\"\n\nErrorData\n- (UTF8 encoded JSON: {message: \"...\", stack: \"...\"}) \"\\n\"\n\nJSONData\n- (UTF8 encoded JSON) \"\\n\"\n  - String values that begin with $ are escaped with a \"$\" prefix.\n  - References to other rows are encoding as JSONReference strings.\n\nJSONReference\n- \"$\" HexDigits\n\nHTMLData\n- ByteSize (UTF8 encoded HTML)\n\nBlobData\n- ByteSize (Binary Data)\n\nByteSize\n- (unsigned 32-bit integer)\n*/\n\n// TODO: Implement HTMLData, BlobData and URLData.\n\nimport type {Request, ReactModel} from 'react-server/src/ReactFlightServer';\n\nimport {convertStringToBuffer} from './ReactServerStreamConfig';\n\nexport type {Destination} from './ReactServerStreamConfig';\n\nexport type Chunk = Uint8Array;\n\nconst stringify = JSON.stringify;\n\nfunction serializeRowHeader(tag: string, id: number) {\n  return tag + id.toString(16) + ':';\n}\n\nexport function processErrorChunk(\n  request: Request,\n  id: number,\n  message: string,\n  stack: string,\n): Chunk {\n  const errorInfo = {message, stack};\n  const row = serializeRowHeader('E', id) + stringify(errorInfo) + '\\n';\n  return convertStringToBuffer(row);\n}\n\nexport function processModelChunk(\n  request: Request,\n  id: number,\n  model: ReactModel,\n): Chunk {\n  const json = stringify(model, request.toJSON);\n  let row;\n  if (id === 0) {\n    row = json + '\\n';\n  } else {\n    row = serializeRowHeader('J', id) + json + '\\n';\n  }\n  return convertStringToBuffer(row);\n}\n\nexport {\n  scheduleWork,\n  flushBuffered,\n  beginWriting,\n  writeChunk,\n  completeWriting,\n  close,\n} from './ReactServerStreamConfig';\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ntype WebpackMap = {\n  [filename: string]: ModuleMetaData,\n};\n\nexport type BundlerConfig = WebpackMap;\n\n// eslint-disable-next-line no-unused-vars\nexport type ModuleReference<T> = string;\n\nexport type ModuleMetaData = {\n  id: string,\n  chunks: Array<string>,\n  name: string,\n};\n\nexport function resolveModuleMetaData<T>(\n  config: BundlerConfig,\n  modulePath: ModuleReference<T>,\n): ModuleMetaData {\n  return config[modulePath];\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nexport let REACT_ELEMENT_TYPE = 0xeac7;\nexport let REACT_PORTAL_TYPE = 0xeaca;\nexport let REACT_FRAGMENT_TYPE = 0xeacb;\nexport let REACT_STRICT_MODE_TYPE = 0xeacc;\nexport let REACT_PROFILER_TYPE = 0xead2;\nexport let REACT_PROVIDER_TYPE = 0xeacd;\nexport let REACT_CONTEXT_TYPE = 0xeace;\nexport let REACT_FORWARD_REF_TYPE = 0xead0;\nexport let REACT_SUSPENSE_TYPE = 0xead1;\nexport let REACT_SUSPENSE_LIST_TYPE = 0xead8;\nexport let REACT_MEMO_TYPE = 0xead3;\nexport let REACT_LAZY_TYPE = 0xead4;\nexport let REACT_BLOCK_TYPE = 0xead9;\nexport let REACT_SERVER_BLOCK_TYPE = 0xeada;\nexport let REACT_FUNDAMENTAL_TYPE = 0xead5;\nexport let REACT_SCOPE_TYPE = 0xead7;\nexport let REACT_OPAQUE_ID_TYPE = 0xeae0;\nexport let REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nexport let REACT_OFFSCREEN_TYPE = 0xeae2;\nexport let REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  const symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  REACT_FRAGMENT_TYPE = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  REACT_SCOPE_TYPE = symbolFor('react.scope');\n  REACT_OPAQUE_ID_TYPE = symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  REACT_OFFSCREEN_TYPE = symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\nconst MAYBE_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Dispatcher as DispatcherType} from 'react-reconciler/src/ReactInternalTypes';\nimport type {\n  Destination,\n  Chunk,\n  BundlerConfig,\n  ModuleMetaData,\n  ModuleReference,\n} from './ReactFlightServerConfig';\n\nimport {\n  scheduleWork,\n  beginWriting,\n  writeChunk,\n  completeWriting,\n  flushBuffered,\n  close,\n  processModelChunk,\n  processErrorChunk,\n  resolveModuleMetaData,\n} from './ReactFlightServerConfig';\n\nimport {\n  REACT_BLOCK_TYPE,\n  REACT_ELEMENT_TYPE,\n  REACT_DEBUG_TRACING_MODE_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_LEGACY_HIDDEN_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_OFFSCREEN_TYPE,\n  REACT_PROFILER_TYPE,\n  REACT_SCOPE_TYPE,\n  REACT_SERVER_BLOCK_TYPE,\n  REACT_STRICT_MODE_TYPE,\n  REACT_SUSPENSE_TYPE,\n  REACT_SUSPENSE_LIST_TYPE,\n} from 'shared/ReactSymbols';\n\nimport * as React from 'react';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport invariant from 'shared/invariant';\n\nconst isArray = Array.isArray;\n\ntype ReactJSONValue =\n  | string\n  | boolean\n  | number\n  | null\n  | $ReadOnlyArray<ReactJSONValue>\n  | ReactModelObject;\n\nexport type ReactModel =\n  | React$Element<any>\n  | string\n  | boolean\n  | number\n  | null\n  | Iterable<ReactModel>\n  | ReactModelObject;\n\ntype ReactModelObject = {+[key: string]: ReactModel};\n\ntype Segment = {\n  id: number,\n  query: () => ReactModel,\n  ping: () => void,\n};\n\nexport type Request = {\n  destination: Destination,\n  bundlerConfig: BundlerConfig,\n  nextChunkId: number,\n  pendingChunks: number,\n  pingedSegments: Array<Segment>,\n  completedJSONChunks: Array<Chunk>,\n  completedErrorChunks: Array<Chunk>,\n  flowing: boolean,\n  toJSON: (key: string, value: ReactModel) => ReactJSONValue,\n};\n\nconst ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n\nexport function createRequest(\n  model: ReactModel,\n  destination: Destination,\n  bundlerConfig: BundlerConfig,\n): Request {\n  const pingedSegments = [];\n  const request = {\n    destination,\n    bundlerConfig,\n    nextChunkId: 0,\n    pendingChunks: 0,\n    pingedSegments: pingedSegments,\n    completedJSONChunks: [],\n    completedErrorChunks: [],\n    flowing: false,\n    toJSON: function(key: string, value: ReactModel): ReactJSONValue {\n      return resolveModelToJSON(request, this, key, value);\n    },\n  };\n  request.pendingChunks++;\n  const rootSegment = createSegment(request, () => model);\n  pingedSegments.push(rootSegment);\n  return request;\n}\n\nfunction attemptResolveElement(element: React$Element<any>): ReactModel {\n  const type = element.type;\n  const props = element.props;\n  if (element.ref !== null && element.ref !== undefined) {\n    // When the ref moves to the regular props object this will implicitly\n    // throw for functions. We could probably relax it to a DEV warning for other\n    // cases.\n    invariant(\n      false,\n      'Refs cannot be used in server components, nor passed to client components.',\n    );\n  }\n  if (typeof type === 'function') {\n    // This is a server-side component.\n    return type(props);\n  } else if (typeof type === 'string') {\n    // This is a host element. E.g. HTML.\n    return [REACT_ELEMENT_TYPE, type, element.key, element.props];\n  } else if (type[0] === REACT_SERVER_BLOCK_TYPE) {\n    return [REACT_ELEMENT_TYPE, type, element.key, element.props];\n  } else if (\n    type === REACT_FRAGMENT_TYPE ||\n    type === REACT_STRICT_MODE_TYPE ||\n    type === REACT_PROFILER_TYPE ||\n    type === REACT_SCOPE_TYPE ||\n    type === REACT_DEBUG_TRACING_MODE_TYPE ||\n    type === REACT_LEGACY_HIDDEN_TYPE ||\n    type === REACT_OFFSCREEN_TYPE ||\n    // TODO: These are temporary shims\n    // and we'll want a different behavior.\n    type === REACT_SUSPENSE_TYPE ||\n    type === REACT_SUSPENSE_LIST_TYPE\n  ) {\n    return element.props.children;\n  } else if (type != null && typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE: {\n        const render = type.render;\n        return render(props, undefined);\n      }\n      case REACT_MEMO_TYPE: {\n        const nextChildren = React.createElement(type.type, element.props);\n        return attemptResolveElement(nextChildren);\n      }\n    }\n  }\n  invariant(\n    false,\n    'Unsupported server component type: %s',\n    describeValueForErrorMessage(type),\n  );\n}\n\nfunction pingSegment(request: Request, segment: Segment): void {\n  const pingedSegments = request.pingedSegments;\n  pingedSegments.push(segment);\n  if (pingedSegments.length === 1) {\n    scheduleWork(() => performWork(request));\n  }\n}\n\nfunction createSegment(request: Request, query: () => ReactModel): Segment {\n  const id = request.nextChunkId++;\n  const segment = {\n    id,\n    query,\n    ping: () => pingSegment(request, segment),\n  };\n  return segment;\n}\n\nfunction serializeIDRef(id: number): string {\n  return '$' + id.toString(16);\n}\n\nfunction escapeStringValue(value: string): string {\n  if (value[0] === '$' || value[0] === '@') {\n    // We need to escape $ or @ prefixed strings since we use those to encode\n    // references to IDs and as special symbol values.\n    return '$' + value;\n  } else {\n    return value;\n  }\n}\n\nfunction isObjectPrototype(object): boolean {\n  if (!object) {\n    return false;\n  }\n  // $FlowFixMe\n  const ObjectPrototype = Object.prototype;\n  if (object === ObjectPrototype) {\n    return true;\n  }\n  // It might be an object from a different Realm which is\n  // still just a plain simple object.\n  if (Object.getPrototypeOf(object)) {\n    return false;\n  }\n  const names = Object.getOwnPropertyNames(object);\n  for (let i = 0; i < names.length; i++) {\n    if (!(names[i] in ObjectPrototype)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isSimpleObject(object): boolean {\n  if (!isObjectPrototype(Object.getPrototypeOf(object))) {\n    return false;\n  }\n  const names = Object.getOwnPropertyNames(object);\n  for (let i = 0; i < names.length; i++) {\n    const descriptor = Object.getOwnPropertyDescriptor(object, names[i]);\n    if (!descriptor) {\n      return false;\n    }\n    if (!descriptor.enumerable) {\n      if (\n        (names[i] === 'key' || names[i] === 'ref') &&\n        typeof descriptor.get === 'function'\n      ) {\n        // React adds key and ref getters to props objects to issue warnings.\n        // Those getters will not be transferred to the client, but that's ok,\n        // so we'll special case them.\n        continue;\n      }\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction objectName(object): string {\n  const name = Object.prototype.toString.call(object);\n  return name.replace(/^\\[object (.*)\\]$/, function(m, p0) {\n    return p0;\n  });\n}\n\nfunction describeKeyForErrorMessage(key: string): string {\n  const encodedKey = JSON.stringify(key);\n  return '\"' + key + '\"' === encodedKey ? key : encodedKey;\n}\n\nfunction describeValueForErrorMessage(value: ReactModel): string {\n  switch (typeof value) {\n    case 'string': {\n      return JSON.stringify(\n        value.length <= 10 ? value : value.substr(0, 10) + '...',\n      );\n    }\n    case 'object': {\n      if (isArray(value)) {\n        return '[...]';\n      }\n      const name = objectName(value);\n      if (name === 'Object') {\n        return '{...}';\n      }\n      return name;\n    }\n    case 'function':\n      return 'function';\n    default:\n      // eslint-disable-next-line\n      return String(value);\n  }\n}\n\nfunction describeObjectForErrorMessage(\n  objectOrArray:\n    | {+[key: string | number]: ReactModel}\n    | $ReadOnlyArray<ReactModel>,\n  expandedName?: string,\n): string {\n  if (isArray(objectOrArray)) {\n    let str = '[';\n    // $FlowFixMe: Should be refined by now.\n    const array: $ReadOnlyArray<ReactModel> = objectOrArray;\n    for (let i = 0; i < array.length; i++) {\n      if (i > 0) {\n        str += ', ';\n      }\n      if (i > 6) {\n        str += '...';\n        break;\n      }\n      const value = array[i];\n      if (\n        '' + i === expandedName &&\n        typeof value === 'object' &&\n        value !== null\n      ) {\n        str += describeObjectForErrorMessage(value);\n      } else {\n        str += describeValueForErrorMessage(value);\n      }\n    }\n    str += ']';\n    return str;\n  } else {\n    let str = '{';\n    // $FlowFixMe: Should be refined by now.\n    const object: {+[key: string | number]: ReactModel} = objectOrArray;\n    const names = Object.keys(object);\n    for (let i = 0; i < names.length; i++) {\n      if (i > 0) {\n        str += ', ';\n      }\n      if (i > 6) {\n        str += '...';\n        break;\n      }\n      const name = names[i];\n      str += describeKeyForErrorMessage(name) + ': ';\n      const value = object[name];\n      if (\n        name === expandedName &&\n        typeof value === 'object' &&\n        value !== null\n      ) {\n        str += describeObjectForErrorMessage(value);\n      } else {\n        str += describeValueForErrorMessage(value);\n      }\n    }\n    str += '}';\n    return str;\n  }\n}\n\nexport function resolveModelToJSON(\n  request: Request,\n  parent: {+[key: string | number]: ReactModel} | $ReadOnlyArray<ReactModel>,\n  key: string,\n  value: ReactModel,\n): ReactJSONValue {\n  if (__DEV__) {\n    // $FlowFixMe\n    const originalValue = parent[key];\n    if (typeof originalValue === 'object' && originalValue !== value) {\n      console.error(\n        'Only plain objects can be passed to client components from server components. ' +\n          'Objects with toJSON methods are not supported. Convert it manually ' +\n          'to a simple value before passing it to props. ' +\n          'Remove %s from these props: %s',\n        describeKeyForErrorMessage(key),\n        describeObjectForErrorMessage(parent),\n      );\n    }\n  }\n\n  // Special Symbols\n  switch (value) {\n    case REACT_ELEMENT_TYPE:\n      return '$';\n    case REACT_SERVER_BLOCK_TYPE:\n      return '@';\n    case REACT_LAZY_TYPE:\n    case REACT_BLOCK_TYPE:\n      invariant(\n        false,\n        'React Blocks (and Lazy Components) are expected to be replaced by a ' +\n          'compiler on the server. Try configuring your compiler set up and avoid ' +\n          'using React.lazy inside of Blocks.',\n      );\n  }\n\n  if (parent[0] === REACT_SERVER_BLOCK_TYPE) {\n    // We're currently encoding part of a Block. Look up which key.\n    switch (key) {\n      case '1': {\n        // Module reference\n        const moduleReference: ModuleReference<any> = (value: any);\n        try {\n          const moduleMetaData: ModuleMetaData = resolveModuleMetaData(\n            request.bundlerConfig,\n            moduleReference,\n          );\n          return (moduleMetaData: ReactJSONValue);\n        } catch (x) {\n          request.pendingChunks++;\n          const errorId = request.nextChunkId++;\n          emitErrorChunk(request, errorId, x);\n          return serializeIDRef(errorId);\n        }\n      }\n      case '2': {\n        // Load function\n        const load: () => ReactModel = (value: any);\n        try {\n          // Attempt to resolve the data.\n          return load();\n        } catch (x) {\n          if (\n            typeof x === 'object' &&\n            x !== null &&\n            typeof x.then === 'function'\n          ) {\n            // Something suspended, we'll need to create a new segment and resolve it later.\n            request.pendingChunks++;\n            const newSegment = createSegment(request, load);\n            const ping = newSegment.ping;\n            x.then(ping, ping);\n            return serializeIDRef(newSegment.id);\n          } else {\n            // This load failed, encode the error as a separate row and reference that.\n            request.pendingChunks++;\n            const errorId = request.nextChunkId++;\n            emitErrorChunk(request, errorId, x);\n            return serializeIDRef(errorId);\n          }\n        }\n      }\n      default: {\n        invariant(\n          false,\n          'A server block should never encode any other slots. This is a bug in React.',\n        );\n      }\n    }\n  }\n\n  // Resolve server components.\n  while (\n    typeof value === 'object' &&\n    value !== null &&\n    value.$$typeof === REACT_ELEMENT_TYPE\n  ) {\n    // TODO: Concatenate keys of parents onto children.\n    const element: React$Element<any> = (value: any);\n    try {\n      // Attempt to render the server component.\n      value = attemptResolveElement(element);\n    } catch (x) {\n      if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n        // Something suspended, we'll need to create a new segment and resolve it later.\n        request.pendingChunks++;\n        const newSegment = createSegment(request, () => value);\n        const ping = newSegment.ping;\n        x.then(ping, ping);\n        return serializeIDRef(newSegment.id);\n      } else {\n        // Something errored. Don't bother encoding anything up to here.\n        throw x;\n      }\n    }\n  }\n\n  if (typeof value === 'object') {\n    if (__DEV__) {\n      if (value !== null && !isArray(value)) {\n        // Verify that this is a simple plain object.\n        if (objectName(value) !== 'Object') {\n          console.error(\n            'Only plain objects can be passed to client components from server components. ' +\n              'Built-ins like %s are not supported. ' +\n              'Remove %s from these props: %s',\n            objectName(value),\n            describeKeyForErrorMessage(key),\n            describeObjectForErrorMessage(parent),\n          );\n        } else if (!isSimpleObject(value)) {\n          console.error(\n            'Only plain objects can be passed to client components from server components. ' +\n              'Classes or other objects with methods are not supported. ' +\n              'Remove %s from these props: %s',\n            describeKeyForErrorMessage(key),\n            describeObjectForErrorMessage(parent, key),\n          );\n        } else if (Object.getOwnPropertySymbols) {\n          const symbols = Object.getOwnPropertySymbols(value);\n          if (symbols.length > 0) {\n            console.error(\n              'Only plain objects can be passed to client components from server components. ' +\n                'Objects with symbol properties like %s are not supported. ' +\n                'Remove %s from these props: %s',\n              symbols[0].description,\n              describeKeyForErrorMessage(key),\n              describeObjectForErrorMessage(parent, key),\n            );\n          }\n        }\n      }\n    }\n    return value;\n  }\n\n  if (typeof value === 'string') {\n    return escapeStringValue(value);\n  }\n\n  if (\n    typeof value === 'boolean' ||\n    typeof value === 'number' ||\n    typeof value === 'undefined'\n  ) {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    if (/^on[A-Z]/.test(key)) {\n      invariant(\n        false,\n        'Event handlers cannot be passed to client component props. ' +\n          'Remove %s from these props if possible: %s\\n' +\n          'If you need interactivity, consider converting part of this to a client component.',\n        describeKeyForErrorMessage(key),\n        describeObjectForErrorMessage(parent),\n      );\n    } else {\n      invariant(\n        false,\n        'Functions cannot be passed directly to client components ' +\n          \"because they're not serializable. \" +\n          'Remove %s (%s) from this object, or avoid the entire object: %s',\n        describeKeyForErrorMessage(key),\n        value.displayName || value.name || 'function',\n        describeObjectForErrorMessage(parent),\n      );\n    }\n  }\n\n  if (typeof value === 'symbol') {\n    invariant(\n      false,\n      'Symbol values (%s) cannot be passed to client components. ' +\n        'Remove %s from this object, or avoid the entire object: %s',\n      value.description,\n      describeKeyForErrorMessage(key),\n      describeObjectForErrorMessage(parent),\n    );\n  }\n\n  // $FlowFixMe: bigint isn't added to Flow yet.\n  if (typeof value === 'bigint') {\n    invariant(\n      false,\n      'BigInt (%s) is not yet supported in client component props. ' +\n        'Remove %s from this object or use a plain number instead: %s',\n      value,\n      describeKeyForErrorMessage(key),\n      describeObjectForErrorMessage(parent),\n    );\n  }\n\n  invariant(\n    false,\n    'Type %s is not supported in client component props. ' +\n      'Remove %s from this object, or avoid the entire object: %s',\n    typeof value,\n    describeKeyForErrorMessage(key),\n    describeObjectForErrorMessage(parent),\n  );\n}\n\nfunction emitErrorChunk(request: Request, id: number, error: mixed): void {\n  // TODO: We should not leak error messages to the client in prod.\n  // Give this an error code instead and log on the server.\n  // We can serialize the error in DEV as a convenience.\n  let message;\n  let stack = '';\n  try {\n    if (error instanceof Error) {\n      message = '' + error.message;\n      stack = '' + error.stack;\n    } else {\n      message = 'Error: ' + (error: any);\n    }\n  } catch (x) {\n    message = 'An error occurred but serializing the error message failed.';\n  }\n\n  const processedChunk = processErrorChunk(request, id, message, stack);\n  request.completedErrorChunks.push(processedChunk);\n}\n\nfunction retrySegment(request: Request, segment: Segment): void {\n  const query = segment.query;\n  let value;\n  try {\n    value = query();\n    while (\n      typeof value === 'object' &&\n      value !== null &&\n      value.$$typeof === REACT_ELEMENT_TYPE\n    ) {\n      // TODO: Concatenate keys of parents onto children.\n      const element: React$Element<any> = (value: any);\n      // Attempt to render the server component.\n      // Doing this here lets us reuse this same segment if the next component\n      // also suspends.\n      segment.query = () => value;\n      value = attemptResolveElement(element);\n    }\n    const processedChunk = processModelChunk(request, segment.id, value);\n    request.completedJSONChunks.push(processedChunk);\n  } catch (x) {\n    if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n      // Something suspended again, let's pick it back up later.\n      const ping = segment.ping;\n      x.then(ping, ping);\n      return;\n    } else {\n      // This errored, we need to serialize this error to the\n      emitErrorChunk(request, segment.id, x);\n    }\n  }\n}\n\nfunction performWork(request: Request): void {\n  const prevDispatcher = ReactCurrentDispatcher.current;\n  ReactCurrentDispatcher.current = Dispatcher;\n\n  const pingedSegments = request.pingedSegments;\n  request.pingedSegments = [];\n  for (let i = 0; i < pingedSegments.length; i++) {\n    const segment = pingedSegments[i];\n    retrySegment(request, segment);\n  }\n  if (request.flowing) {\n    flushCompletedChunks(request);\n  }\n\n  ReactCurrentDispatcher.current = prevDispatcher;\n}\n\nlet reentrant = false;\nfunction flushCompletedChunks(request: Request): void {\n  if (reentrant) {\n    return;\n  }\n  reentrant = true;\n  const destination = request.destination;\n  beginWriting(destination);\n  try {\n    const jsonChunks = request.completedJSONChunks;\n    let i = 0;\n    for (; i < jsonChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = jsonChunks[i];\n      if (!writeChunk(destination, chunk)) {\n        request.flowing = false;\n        i++;\n        break;\n      }\n    }\n    jsonChunks.splice(0, i);\n    const errorChunks = request.completedErrorChunks;\n    i = 0;\n    for (; i < errorChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = errorChunks[i];\n      if (!writeChunk(destination, chunk)) {\n        request.flowing = false;\n        i++;\n        break;\n      }\n    }\n    errorChunks.splice(0, i);\n  } finally {\n    reentrant = false;\n    completeWriting(destination);\n  }\n  flushBuffered(destination);\n  if (request.pendingChunks === 0) {\n    // We're done.\n    close(destination);\n  }\n}\n\nexport function startWork(request: Request): void {\n  request.flowing = true;\n  scheduleWork(() => performWork(request));\n}\n\nexport function startFlowing(request: Request): void {\n  request.flowing = true;\n  flushCompletedChunks(request);\n}\n\nfunction unsupportedHook(): void {\n  invariant(false, 'This Hook is not supported in Server Components.');\n}\n\nconst Dispatcher: DispatcherType = {\n  useMemo<T>(nextCreate: () => T): T {\n    return nextCreate();\n  },\n  useCallback<T>(callback: T): T {\n    return callback;\n  },\n  useDebugValue(): void {},\n  useDeferredValue<T>(value: T): T {\n    return value;\n  },\n  useTransition(): [(callback: () => void) => void, boolean] {\n    return [() => {}, false];\n  },\n  readContext: (unsupportedHook: any),\n  useContext: (unsupportedHook: any),\n  useReducer: (unsupportedHook: any),\n  useRef: (unsupportedHook: any),\n  useState: (unsupportedHook: any),\n  useLayoutEffect: (unsupportedHook: any),\n  useImperativeHandle: (unsupportedHook: any),\n  useEffect: (unsupportedHook: any),\n  useOpaqueIdentifier: (unsupportedHook: any),\n  useMutableSource: (unsupportedHook: any),\n};\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {ReactModel} from 'react-server/src/ReactFlightServer';\nimport type {BundlerConfig} from './ReactFlightServerWebpackBundlerConfig';\n\nimport {\n  createRequest,\n  startWork,\n  startFlowing,\n} from 'react-server/src/ReactFlightServer';\n\nfunction renderToReadableStream(\n  model: ReactModel,\n  webpackMap: BundlerConfig,\n): ReadableStream {\n  let request;\n  return new ReadableStream({\n    start(controller) {\n      request = createRequest(model, controller, webpackMap);\n      startWork(request);\n    },\n    pull(controller) {\n      startFlowing(request);\n    },\n    cancel(reason) {},\n  });\n}\n\nexport {renderToReadableStream};\n"],"names":["ReactSharedInternals","React","error","format","args","printWarning","level","ReactDebugCurrentFrame","stack","getStackAddendum","concat","argsWithFormat","map","item","unshift","Function","prototype","apply","call","console","scheduleWork","callback","writeChunk","destination","buffer","enqueue","desiredSize","close","textEncoder","TextEncoder","convertStringToBuffer","content","encode","stringify","JSON","serializeRowHeader","tag","id","toString","processErrorChunk","request","message","errorInfo","row","processModelChunk","model","json","toJSON","resolveModuleMetaData","config","modulePath","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_SERVER_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_SCOPE_TYPE","REACT_OPAQUE_ID_TYPE","REACT_DEBUG_TRACING_MODE_TYPE","REACT_OFFSCREEN_TYPE","REACT_LEGACY_HIDDEN_TYPE","Symbol","for","symbolFor","isArray","Array","ReactCurrentDispatcher","createRequest","bundlerConfig","pingedSegments","nextChunkId","pendingChunks","completedJSONChunks","completedErrorChunks","flowing","key","value","resolveModelToJSON","rootSegment","createSegment","push","attemptResolveElement","element","type","props","ref","undefined","children","$$typeof","render","nextChildren","describeValueForErrorMessage","pingSegment","segment","length","performWork","query","ping","serializeIDRef","escapeStringValue","isObjectPrototype","object","ObjectPrototype","Object","getPrototypeOf","names","getOwnPropertyNames","i","isSimpleObject","descriptor","getOwnPropertyDescriptor","enumerable","get","objectName","name","replace","m","p0","describeKeyForErrorMessage","encodedKey","substr","String","describeObjectForErrorMessage","objectOrArray","expandedName","str","array","keys","parent","originalValue","moduleReference","moduleMetaData","x","errorId","emitErrorChunk","load","then","newSegment","getOwnPropertySymbols","symbols","description","test","displayName","Error","processedChunk","retrySegment","prevDispatcher","current","Dispatcher","flushCompletedChunks","reentrant","beginWriting","jsonChunks","chunk","splice","errorChunks","completeWriting","startWork","startFlowing","unsupportedHook","useMemo","nextCreate","useCallback","useDebugValue","useDeferredValue","useTransition","readContext","useContext","useReducer","useRef","useState","useLayoutEffect","useImperativeHandle","useEffect","useOpaqueIdentifier","useMutableSource","renderToReadableStream","webpackMap","ReadableStream","start","controller","pull","cancel","reason"],"mappings":"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"}