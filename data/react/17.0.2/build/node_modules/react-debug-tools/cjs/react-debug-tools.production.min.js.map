{"version":3,"file":"react-debug-tools.production.min.js","sources":["../../../../packages/react-reconciler/src/ReactTypeOfMode.js","../../../../packages/shared/ReactSharedInternals.js","../../../../packages/shared/ReactSymbols.js","../../../../packages/react-reconciler/src/ReactWorkTags.js","../../../../packages/react-debug-tools/src/ReactDebugHooks.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport type TypeOfMode = number;\n\nexport const NoMode = 0b00000;\nexport const StrictMode = 0b00001;\n// TODO: Remove BlockingMode and ConcurrentMode by reading from the root\n// tag instead\nexport const BlockingMode = 0b00010;\nexport const ConcurrentMode = 0b00100;\nexport const ProfileMode = 0b01000;\nexport const DebugTracingMode = 0b10000;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nexport let REACT_ELEMENT_TYPE = 0xeac7;\nexport let REACT_PORTAL_TYPE = 0xeaca;\nexport let REACT_FRAGMENT_TYPE = 0xeacb;\nexport let REACT_STRICT_MODE_TYPE = 0xeacc;\nexport let REACT_PROFILER_TYPE = 0xead2;\nexport let REACT_PROVIDER_TYPE = 0xeacd;\nexport let REACT_CONTEXT_TYPE = 0xeace;\nexport let REACT_FORWARD_REF_TYPE = 0xead0;\nexport let REACT_SUSPENSE_TYPE = 0xead1;\nexport let REACT_SUSPENSE_LIST_TYPE = 0xead8;\nexport let REACT_MEMO_TYPE = 0xead3;\nexport let REACT_LAZY_TYPE = 0xead4;\nexport let REACT_BLOCK_TYPE = 0xead9;\nexport let REACT_SERVER_BLOCK_TYPE = 0xeada;\nexport let REACT_FUNDAMENTAL_TYPE = 0xead5;\nexport let REACT_SCOPE_TYPE = 0xead7;\nexport let REACT_OPAQUE_ID_TYPE = 0xeae0;\nexport let REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nexport let REACT_OFFSCREEN_TYPE = 0xeae2;\nexport let REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  const symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  REACT_FRAGMENT_TYPE = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  REACT_SCOPE_TYPE = symbolFor('react.scope');\n  REACT_OPAQUE_ID_TYPE = symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  REACT_OFFSCREEN_TYPE = symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\nconst MAYBE_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nexport type WorkTag =\n  | 0\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\n  | 15\n  | 16\n  | 17\n  | 18\n  | 19\n  | 20\n  | 21\n  | 22\n  | 23\n  | 24;\n\nexport const FunctionComponent = 0;\nexport const ClassComponent = 1;\nexport const IndeterminateComponent = 2; // Before we know whether it is function or class\nexport const HostRoot = 3; // Root of a host tree. Could be nested inside another node.\nexport const HostPortal = 4; // A subtree. Could be an entry point to a different renderer.\nexport const HostComponent = 5;\nexport const HostText = 6;\nexport const Fragment = 7;\nexport const Mode = 8;\nexport const ContextConsumer = 9;\nexport const ContextProvider = 10;\nexport const ForwardRef = 11;\nexport const Profiler = 12;\nexport const SuspenseComponent = 13;\nexport const MemoComponent = 14;\nexport const SimpleMemoComponent = 15;\nexport const LazyComponent = 16;\nexport const IncompleteClassComponent = 17;\nexport const DehydratedFragment = 18;\nexport const SuspenseListComponent = 19;\nexport const FundamentalComponent = 20;\nexport const ScopeComponent = 21;\nexport const Block = 22;\nexport const OffscreenComponent = 23;\nexport const LegacyHiddenComponent = 24;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {\n  MutableSource,\n  MutableSourceGetSnapshotFn,\n  MutableSourceSubscribeFn,\n  ReactContext,\n  ReactProviderType,\n} from 'shared/ReactTypes';\nimport type {\n  Fiber,\n  Dispatcher as DispatcherType,\n} from 'react-reconciler/src/ReactInternalTypes';\nimport type {OpaqueIDType} from 'react-reconciler/src/ReactFiberHostConfig';\n\nimport {NoMode} from 'react-reconciler/src/ReactTypeOfMode';\n\nimport ErrorStackParser from 'error-stack-parser';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport {REACT_OPAQUE_ID_TYPE} from 'shared/ReactSymbols';\nimport {\n  FunctionComponent,\n  SimpleMemoComponent,\n  ContextProvider,\n  ForwardRef,\n  Block,\n} from 'react-reconciler/src/ReactWorkTags';\n\ntype CurrentDispatcherRef = typeof ReactSharedInternals.ReactCurrentDispatcher;\n\n// Used to track hooks called during a render\n\ntype HookLogEntry = {\n  primitive: string,\n  stackError: Error,\n  value: mixed,\n  ...\n};\n\nlet hookLog: Array<HookLogEntry> = [];\n\n// Primitives\n\ntype BasicStateAction<S> = (S => S) | S;\n\ntype Dispatch<A> = A => void;\n\nlet primitiveStackCache: null | Map<string, Array<any>> = null;\n\nlet currentFiber: Fiber | null = null;\n\ntype Hook = {\n  memoizedState: any,\n  next: Hook | null,\n};\n\nfunction getPrimitiveStackCache(): Map<string, Array<any>> {\n  // This initializes a cache of all primitive hooks so that the top\n  // most stack frames added by calling the primitive hook can be removed.\n  if (primitiveStackCache === null) {\n    const cache = new Map();\n    let readHookLog;\n    try {\n      // Use all hooks here to add them to the hook log.\n      Dispatcher.useContext(({_currentValue: null}: any));\n      Dispatcher.useState(null);\n      Dispatcher.useReducer((s, a) => s, null);\n      Dispatcher.useRef(null);\n      Dispatcher.useLayoutEffect(() => {});\n      Dispatcher.useEffect(() => {});\n      Dispatcher.useImperativeHandle(undefined, () => null);\n      Dispatcher.useDebugValue(null);\n      Dispatcher.useCallback(() => {});\n      Dispatcher.useMemo(() => null);\n    } finally {\n      readHookLog = hookLog;\n      hookLog = [];\n    }\n    for (let i = 0; i < readHookLog.length; i++) {\n      const hook = readHookLog[i];\n      cache.set(hook.primitive, ErrorStackParser.parse(hook.stackError));\n    }\n    primitiveStackCache = cache;\n  }\n  return primitiveStackCache;\n}\n\nlet currentHook: null | Hook = null;\nfunction nextHook(): null | Hook {\n  const hook = currentHook;\n  if (hook !== null) {\n    currentHook = hook.next;\n  }\n  return hook;\n}\n\nfunction readContext<T>(\n  context: ReactContext<T>,\n  observedBits: void | number | boolean,\n): T {\n  // For now we don't expose readContext usage in the hooks debugging info.\n  return context._currentValue;\n}\n\nfunction useContext<T>(\n  context: ReactContext<T>,\n  observedBits: void | number | boolean,\n): T {\n  hookLog.push({\n    primitive: 'Context',\n    stackError: new Error(),\n    value: context._currentValue,\n  });\n  return context._currentValue;\n}\n\nfunction useState<S>(\n  initialState: (() => S) | S,\n): [S, Dispatch<BasicStateAction<S>>] {\n  const hook = nextHook();\n  const state: S =\n    hook !== null\n      ? hook.memoizedState\n      : typeof initialState === 'function'\n      ? // $FlowFixMe: Flow doesn't like mixed types\n        initialState()\n      : initialState;\n  hookLog.push({primitive: 'State', stackError: new Error(), value: state});\n  return [state, (action: BasicStateAction<S>) => {}];\n}\n\nfunction useReducer<S, I, A>(\n  reducer: (S, A) => S,\n  initialArg: I,\n  init?: I => S,\n): [S, Dispatch<A>] {\n  const hook = nextHook();\n  let state;\n  if (hook !== null) {\n    state = hook.memoizedState;\n  } else {\n    state = init !== undefined ? init(initialArg) : ((initialArg: any): S);\n  }\n  hookLog.push({\n    primitive: 'Reducer',\n    stackError: new Error(),\n    value: state,\n  });\n  return [state, (action: A) => {}];\n}\n\nfunction useRef<T>(initialValue: T): {|current: T|} {\n  const hook = nextHook();\n  const ref = hook !== null ? hook.memoizedState : {current: initialValue};\n  hookLog.push({\n    primitive: 'Ref',\n    stackError: new Error(),\n    value: ref.current,\n  });\n  return ref;\n}\n\nfunction useLayoutEffect(\n  create: () => (() => void) | void,\n  inputs: Array<mixed> | void | null,\n): void {\n  nextHook();\n  hookLog.push({\n    primitive: 'LayoutEffect',\n    stackError: new Error(),\n    value: create,\n  });\n}\n\nfunction useEffect(\n  create: () => (() => void) | void,\n  inputs: Array<mixed> | void | null,\n): void {\n  nextHook();\n  hookLog.push({primitive: 'Effect', stackError: new Error(), value: create});\n}\n\nfunction useImperativeHandle<T>(\n  ref: {|current: T | null|} | ((inst: T | null) => mixed) | null | void,\n  create: () => T,\n  inputs: Array<mixed> | void | null,\n): void {\n  nextHook();\n  // We don't actually store the instance anywhere if there is no ref callback\n  // and if there is a ref callback it might not store it but if it does we\n  // have no way of knowing where. So let's only enable introspection of the\n  // ref itself if it is using the object form.\n  let instance = undefined;\n  if (ref !== null && typeof ref === 'object') {\n    instance = ref.current;\n  }\n  hookLog.push({\n    primitive: 'ImperativeHandle',\n    stackError: new Error(),\n    value: instance,\n  });\n}\n\nfunction useDebugValue(value: any, formatterFn: ?(value: any) => any) {\n  hookLog.push({\n    primitive: 'DebugValue',\n    stackError: new Error(),\n    value: typeof formatterFn === 'function' ? formatterFn(value) : value,\n  });\n}\n\nfunction useCallback<T>(callback: T, inputs: Array<mixed> | void | null): T {\n  const hook = nextHook();\n  hookLog.push({\n    primitive: 'Callback',\n    stackError: new Error(),\n    value: hook !== null ? hook.memoizedState[0] : callback,\n  });\n  return callback;\n}\n\nfunction useMemo<T>(\n  nextCreate: () => T,\n  inputs: Array<mixed> | void | null,\n): T {\n  const hook = nextHook();\n  const value = hook !== null ? hook.memoizedState[0] : nextCreate();\n  hookLog.push({primitive: 'Memo', stackError: new Error(), value});\n  return value;\n}\n\nfunction useMutableSource<Source, Snapshot>(\n  source: MutableSource<Source>,\n  getSnapshot: MutableSourceGetSnapshotFn<Source, Snapshot>,\n  subscribe: MutableSourceSubscribeFn<Source, Snapshot>,\n): Snapshot {\n  // useMutableSource() composes multiple hooks internally.\n  // Advance the current hook index the same number of times\n  // so that subsequent hooks have the right memoized state.\n  nextHook(); // MutableSource\n  nextHook(); // State\n  nextHook(); // Effect\n  nextHook(); // Effect\n  const value = getSnapshot(source._source);\n  hookLog.push({primitive: 'MutableSource', stackError: new Error(), value});\n  return value;\n}\n\nfunction useTransition(): [(() => void) => void, boolean] {\n  // useTransition() composes multiple hooks internally.\n  // Advance the current hook index the same number of times\n  // so that subsequent hooks have the right memoized state.\n  nextHook(); // State\n  nextHook(); // Callback\n  hookLog.push({\n    primitive: 'Transition',\n    stackError: new Error(),\n    value: undefined,\n  });\n  return [callback => {}, false];\n}\n\nfunction useDeferredValue<T>(value: T): T {\n  // useDeferredValue() composes multiple hooks internally.\n  // Advance the current hook index the same number of times\n  // so that subsequent hooks have the right memoized state.\n  nextHook(); // State\n  nextHook(); // Effect\n  hookLog.push({\n    primitive: 'DeferredValue',\n    stackError: new Error(),\n    value,\n  });\n  return value;\n}\n\nfunction useOpaqueIdentifier(): OpaqueIDType | void {\n  const hook = nextHook(); // State\n  if (currentFiber && currentFiber.mode === NoMode) {\n    nextHook(); // Effect\n  }\n  let value = hook === null ? undefined : hook.memoizedState;\n  if (value && value.$$typeof === REACT_OPAQUE_ID_TYPE) {\n    value = undefined;\n  }\n  hookLog.push({\n    primitive: 'OpaqueIdentifier',\n    stackError: new Error(),\n    value,\n  });\n  return value;\n}\n\nconst Dispatcher: DispatcherType = {\n  readContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useDebugValue,\n  useLayoutEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n  useTransition,\n  useMutableSource,\n  useDeferredValue,\n  useOpaqueIdentifier,\n};\n\n// Inspect\n\nexport type HooksNode = {\n  id: number | null,\n  isStateEditable: boolean,\n  name: string,\n  value: mixed,\n  subHooks: Array<HooksNode>,\n  ...\n};\nexport type HooksTree = Array<HooksNode>;\n\n// Don't assume\n//\n// We can't assume that stack frames are nth steps away from anything.\n// E.g. we can't assume that the root call shares all frames with the stack\n// of a hook call. A simple way to demonstrate this is wrapping `new Error()`\n// in a wrapper constructor like a polyfill. That'll add an extra frame.\n// Similar things can happen with the call to the dispatcher. The top frame\n// may not be the primitive. Likewise the primitive can have fewer stack frames\n// such as when a call to useState got inlined to use dispatcher.useState.\n//\n// We also can't assume that the last frame of the root call is the same\n// frame as the last frame of the hook call because long stack traces can be\n// truncated to a stack trace limit.\n\nlet mostLikelyAncestorIndex = 0;\n\nfunction findSharedIndex(hookStack, rootStack, rootIndex) {\n  const source = rootStack[rootIndex].source;\n  hookSearch: for (let i = 0; i < hookStack.length; i++) {\n    if (hookStack[i].source === source) {\n      // This looks like a match. Validate that the rest of both stack match up.\n      for (\n        let a = rootIndex + 1, b = i + 1;\n        a < rootStack.length && b < hookStack.length;\n        a++, b++\n      ) {\n        if (hookStack[b].source !== rootStack[a].source) {\n          // If not, give up and try a different match.\n          continue hookSearch;\n        }\n      }\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction findCommonAncestorIndex(rootStack, hookStack) {\n  let rootIndex = findSharedIndex(\n    hookStack,\n    rootStack,\n    mostLikelyAncestorIndex,\n  );\n  if (rootIndex !== -1) {\n    return rootIndex;\n  }\n  // If the most likely one wasn't a hit, try any other frame to see if it is shared.\n  // If that takes more than 5 frames, something probably went wrong.\n  for (let i = 0; i < rootStack.length && i < 5; i++) {\n    rootIndex = findSharedIndex(hookStack, rootStack, i);\n    if (rootIndex !== -1) {\n      mostLikelyAncestorIndex = i;\n      return rootIndex;\n    }\n  }\n  return -1;\n}\n\nfunction isReactWrapper(functionName, primitiveName) {\n  if (!functionName) {\n    return false;\n  }\n  const expectedPrimitiveName = 'use' + primitiveName;\n  if (functionName.length < expectedPrimitiveName.length) {\n    return false;\n  }\n  return (\n    functionName.lastIndexOf(expectedPrimitiveName) ===\n    functionName.length - expectedPrimitiveName.length\n  );\n}\n\nfunction findPrimitiveIndex(hookStack, hook) {\n  const stackCache = getPrimitiveStackCache();\n  const primitiveStack = stackCache.get(hook.primitive);\n  if (primitiveStack === undefined) {\n    return -1;\n  }\n  for (let i = 0; i < primitiveStack.length && i < hookStack.length; i++) {\n    if (primitiveStack[i].source !== hookStack[i].source) {\n      // If the next two frames are functions called `useX` then we assume that they're part of the\n      // wrappers that the React packager or other packages adds around the dispatcher.\n      if (\n        i < hookStack.length - 1 &&\n        isReactWrapper(hookStack[i].functionName, hook.primitive)\n      ) {\n        i++;\n      }\n      if (\n        i < hookStack.length - 1 &&\n        isReactWrapper(hookStack[i].functionName, hook.primitive)\n      ) {\n        i++;\n      }\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction parseTrimmedStack(rootStack, hook) {\n  // Get the stack trace between the primitive hook function and\n  // the root function call. I.e. the stack frames of custom hooks.\n  const hookStack = ErrorStackParser.parse(hook.stackError);\n  const rootIndex = findCommonAncestorIndex(rootStack, hookStack);\n  const primitiveIndex = findPrimitiveIndex(hookStack, hook);\n  if (\n    rootIndex === -1 ||\n    primitiveIndex === -1 ||\n    rootIndex - primitiveIndex < 2\n  ) {\n    // Something went wrong. Give up.\n    return null;\n  }\n  return hookStack.slice(primitiveIndex, rootIndex - 1);\n}\n\nfunction parseCustomHookName(functionName: void | string): string {\n  if (!functionName) {\n    return '';\n  }\n  let startIndex = functionName.lastIndexOf('.');\n  if (startIndex === -1) {\n    startIndex = 0;\n  }\n  if (functionName.substr(startIndex, 3) === 'use') {\n    startIndex += 3;\n  }\n  return functionName.substr(startIndex);\n}\n\nfunction buildTree(rootStack, readHookLog): HooksTree {\n  const rootChildren = [];\n  let prevStack = null;\n  let levelChildren = rootChildren;\n  let nativeHookID = 0;\n  const stackOfChildren = [];\n  for (let i = 0; i < readHookLog.length; i++) {\n    const hook = readHookLog[i];\n    const stack = parseTrimmedStack(rootStack, hook);\n    if (stack !== null) {\n      // Note: The indices 0 <= n < length-1 will contain the names.\n      // The indices 1 <= n < length will contain the source locations.\n      // That's why we get the name from n - 1 and don't check the source\n      // of index 0.\n      let commonSteps = 0;\n      if (prevStack !== null) {\n        // Compare the current level's stack to the new stack.\n        while (commonSteps < stack.length && commonSteps < prevStack.length) {\n          const stackSource = stack[stack.length - commonSteps - 1].source;\n          const prevSource =\n            prevStack[prevStack.length - commonSteps - 1].source;\n          if (stackSource !== prevSource) {\n            break;\n          }\n          commonSteps++;\n        }\n        // Pop back the stack as many steps as were not common.\n        for (let j = prevStack.length - 1; j > commonSteps; j--) {\n          levelChildren = stackOfChildren.pop();\n        }\n      }\n      // The remaining part of the new stack are custom hooks. Push them\n      // to the tree.\n      for (let j = stack.length - commonSteps - 1; j >= 1; j--) {\n        const children = [];\n        levelChildren.push({\n          id: null,\n          isStateEditable: false,\n          name: parseCustomHookName(stack[j - 1].functionName),\n          value: undefined,\n          subHooks: children,\n        });\n        stackOfChildren.push(levelChildren);\n        levelChildren = children;\n      }\n      prevStack = stack;\n    }\n    const {primitive} = hook;\n\n    // For now, the \"id\" of stateful hooks is just the stateful hook index.\n    // Custom hooks have no ids, nor do non-stateful native hooks (e.g. Context, DebugValue).\n    const id =\n      primitive === 'Context' || primitive === 'DebugValue'\n        ? null\n        : nativeHookID++;\n\n    // For the time being, only State and Reducer hooks support runtime overrides.\n    const isStateEditable = primitive === 'Reducer' || primitive === 'State';\n\n    levelChildren.push({\n      id,\n      isStateEditable,\n      name: primitive,\n      value: hook.value,\n      subHooks: [],\n    });\n  }\n\n  // Associate custom hook values (useDebugValue() hook entries) with the correct hooks.\n  processDebugValues(rootChildren, null);\n\n  return rootChildren;\n}\n\n// Custom hooks support user-configurable labels (via the special useDebugValue() hook).\n// That hook adds user-provided values to the hooks tree,\n// but these values aren't intended to appear alongside of the other hooks.\n// Instead they should be attributed to their parent custom hook.\n// This method walks the tree and assigns debug values to their custom hook owners.\nfunction processDebugValues(\n  hooksTree: HooksTree,\n  parentHooksNode: HooksNode | null,\n): void {\n  const debugValueHooksNodes: Array<HooksNode> = [];\n\n  for (let i = 0; i < hooksTree.length; i++) {\n    const hooksNode = hooksTree[i];\n    if (hooksNode.name === 'DebugValue' && hooksNode.subHooks.length === 0) {\n      hooksTree.splice(i, 1);\n      i--;\n      debugValueHooksNodes.push(hooksNode);\n    } else {\n      processDebugValues(hooksNode.subHooks, hooksNode);\n    }\n  }\n\n  // Bubble debug value labels to their custom hook owner.\n  // If there is no parent hook, just ignore them for now.\n  // (We may warn about this in the future.)\n  if (parentHooksNode !== null) {\n    if (debugValueHooksNodes.length === 1) {\n      parentHooksNode.value = debugValueHooksNodes[0].value;\n    } else if (debugValueHooksNodes.length > 1) {\n      parentHooksNode.value = debugValueHooksNodes.map(({value}) => value);\n    }\n  }\n}\n\nexport function inspectHooks<Props>(\n  renderFunction: Props => React$Node,\n  props: Props,\n  currentDispatcher: ?CurrentDispatcherRef,\n): HooksTree {\n  // DevTools will pass the current renderer's injected dispatcher.\n  // Other apps might compile debug hooks as part of their app though.\n  if (currentDispatcher == null) {\n    currentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n  }\n\n  const previousDispatcher = currentDispatcher.current;\n  let readHookLog;\n  currentDispatcher.current = Dispatcher;\n  let ancestorStackError;\n  try {\n    ancestorStackError = new Error();\n    renderFunction(props);\n  } finally {\n    readHookLog = hookLog;\n    hookLog = [];\n    currentDispatcher.current = previousDispatcher;\n  }\n  const rootStack = ErrorStackParser.parse(ancestorStackError);\n  return buildTree(rootStack, readHookLog);\n}\n\nfunction setupContexts(contextMap: Map<ReactContext<any>, any>, fiber: Fiber) {\n  let current = fiber;\n  while (current) {\n    if (current.tag === ContextProvider) {\n      const providerType: ReactProviderType<any> = current.type;\n      const context: ReactContext<any> = providerType._context;\n      if (!contextMap.has(context)) {\n        // Store the current value that we're going to restore later.\n        contextMap.set(context, context._currentValue);\n        // Set the inner most provider value on the context.\n        context._currentValue = current.memoizedProps.value;\n      }\n    }\n    current = current.return;\n  }\n}\n\nfunction restoreContexts(contextMap: Map<ReactContext<any>, any>) {\n  contextMap.forEach((value, context) => (context._currentValue = value));\n}\n\nfunction inspectHooksOfForwardRef<Props, Ref>(\n  renderFunction: (Props, Ref) => React$Node,\n  props: Props,\n  ref: Ref,\n  currentDispatcher: CurrentDispatcherRef,\n): HooksTree {\n  const previousDispatcher = currentDispatcher.current;\n  let readHookLog;\n  currentDispatcher.current = Dispatcher;\n  let ancestorStackError;\n  try {\n    ancestorStackError = new Error();\n    renderFunction(props, ref);\n  } finally {\n    readHookLog = hookLog;\n    hookLog = [];\n    currentDispatcher.current = previousDispatcher;\n  }\n  const rootStack = ErrorStackParser.parse(ancestorStackError);\n  return buildTree(rootStack, readHookLog);\n}\n\nfunction resolveDefaultProps(Component, baseProps) {\n  if (Component && Component.defaultProps) {\n    // Resolve default props. Taken from ReactElement\n    const props = Object.assign({}, baseProps);\n    const defaultProps = Component.defaultProps;\n    for (const propName in defaultProps) {\n      if (props[propName] === undefined) {\n        props[propName] = defaultProps[propName];\n      }\n    }\n    return props;\n  }\n  return baseProps;\n}\n\nexport function inspectHooksOfFiber(\n  fiber: Fiber,\n  currentDispatcher: ?CurrentDispatcherRef,\n) {\n  // DevTools will pass the current renderer's injected dispatcher.\n  // Other apps might compile debug hooks as part of their app though.\n  if (currentDispatcher == null) {\n    currentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n  }\n\n  currentFiber = fiber;\n\n  if (\n    fiber.tag !== FunctionComponent &&\n    fiber.tag !== SimpleMemoComponent &&\n    fiber.tag !== ForwardRef &&\n    fiber.tag !== Block\n  ) {\n    throw new Error(\n      'Unknown Fiber. Needs to be a function component to inspect hooks.',\n    );\n  }\n  // Warm up the cache so that it doesn't consume the currentHook.\n  getPrimitiveStackCache();\n  const type = fiber.type;\n  let props = fiber.memoizedProps;\n  if (type !== fiber.elementType) {\n    props = resolveDefaultProps(type, props);\n  }\n  // Set up the current hook so that we can step through and read the\n  // current state from them.\n  currentHook = (fiber.memoizedState: Hook);\n  const contextMap = new Map();\n  try {\n    setupContexts(contextMap, fiber);\n    if (fiber.tag === ForwardRef) {\n      return inspectHooksOfForwardRef(\n        type.render,\n        props,\n        fiber.ref,\n        currentDispatcher,\n      );\n    }\n    return inspectHooks(type, props, currentDispatcher);\n  } finally {\n    currentHook = null;\n    restoreContexts(contextMap);\n  }\n}\n"],"names":["NoMode","ReactSharedInternals","React","REACT_OPAQUE_ID_TYPE","Symbol","for","symbolFor","REACT_ELEMENT_TYPE","REACT_DEBUG_TRACING_MODE_TYPE","FunctionComponent","ContextProvider","ForwardRef","SimpleMemoComponent","Block","hookLog","primitiveStackCache","currentFiber","getPrimitiveStackCache","cache","Map","readHookLog","Dispatcher","useContext","_currentValue","useState","useReducer","s","a","useRef","useLayoutEffect","useEffect","useImperativeHandle","undefined","useDebugValue","useCallback","useMemo","i","length","hook","set","primitive","ErrorStackParser","parse","stackError","currentHook","nextHook","next","readContext","context","observedBits","push","Error","value","initialState","state","memoizedState","action","reducer","initialArg","init","initialValue","ref","current","create","inputs","instance","formatterFn","callback","nextCreate","useMutableSource","source","getSnapshot","subscribe","_source","useTransition","useDeferredValue","useOpaqueIdentifier","mode","$$typeof","mostLikelyAncestorIndex","findSharedIndex","hookStack","rootStack","rootIndex","hookSearch","b","findCommonAncestorIndex","isReactWrapper","functionName","primitiveName","expectedPrimitiveName","lastIndexOf","findPrimitiveIndex","stackCache","primitiveStack","get","parseTrimmedStack","primitiveIndex","slice","parseCustomHookName","startIndex","substr","buildTree","rootChildren","prevStack","levelChildren","nativeHookID","stackOfChildren","stack","commonSteps","stackSource","prevSource","j","pop","children","id","isStateEditable","name","subHooks","processDebugValues","hooksTree","parentHooksNode","debugValueHooksNodes","hooksNode","splice","map","inspectHooks","renderFunction","props","currentDispatcher","ReactCurrentDispatcher","previousDispatcher","ancestorStackError","setupContexts","contextMap","fiber","tag","providerType","type","_context","has","memoizedProps","return","restoreContexts","forEach","inspectHooksOfForwardRef","resolveDefaultProps","Component","baseProps","defaultProps","propName","inspectHooksOfFiber","elementType","render"],"mappings":"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"}