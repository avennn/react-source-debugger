{"version":3,"file":"react-cache.development.js","sources":["../../../../packages/shared/ReactSharedInternals.js","../../../../packages/shared/consoleWithStackDev.js","../../../../packages/react-cache/src/LRU.js","../../../../packages/react-cache/src/ReactCacheOld.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\n\nlet suppressWarning = false;\nexport function setSuppressWarning(newSuppressWarning) {\n  if (__DEV__) {\n    suppressWarning = newSuppressWarning;\n  }\n}\n\n// In DEV, calls to console.warn and console.error get replaced\n// by calls to these methods by a Babel plugin.\n//\n// In PROD (or in packages without access to React internals),\n// they are left as they are instead.\n\nexport function warn(format, ...args) {\n  if (__DEV__) {\n    if (!suppressWarning) {\n      printWarning('warn', format, args);\n    }\n  }\n}\n\nexport function error(format, ...args) {\n  if (__DEV__) {\n    if (!suppressWarning) {\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  if (__DEV__) {\n    const ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    const stack = ReactDebugCurrentFrame.getStackAddendum();\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    }\n\n    // eslint-disable-next-line react-internal/safe-string-coercion\n    const argsWithFormat = args.map(item => String(item));\n    // Careful: RN currently depends on this prefix\n    argsWithFormat.unshift('Warning: ' + format);\n    // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as Scheduler from 'scheduler';\n\n// Intentionally not named imports because Rollup would\n// use dynamic dispatch for CommonJS interop named imports.\nconst {\n  unstable_scheduleCallback: scheduleCallback,\n  unstable_IdlePriority: IdlePriority,\n} = Scheduler;\n\ntype Entry<T> = {|\n  value: T,\n  onDelete: () => mixed,\n  previous: Entry<T>,\n  next: Entry<T>,\n|};\n\nexport function createLRU<T>(limit: number) {\n  let LIMIT = limit;\n\n  // Circular, doubly-linked list\n  let first: Entry<T> | null = null;\n  let size: number = 0;\n\n  let cleanUpIsScheduled: boolean = false;\n\n  function scheduleCleanUp() {\n    if (cleanUpIsScheduled === false && size > LIMIT) {\n      // The cache size exceeds the limit. Schedule a callback to delete the\n      // least recently used entries.\n      cleanUpIsScheduled = true;\n      scheduleCallback(IdlePriority, cleanUp);\n    }\n  }\n\n  function cleanUp() {\n    cleanUpIsScheduled = false;\n    deleteLeastRecentlyUsedEntries(LIMIT);\n  }\n\n  function deleteLeastRecentlyUsedEntries(targetSize: number) {\n    // Delete entries from the cache, starting from the end of the list.\n    if (first !== null) {\n      const resolvedFirst: Entry<T> = (first: any);\n      let last = resolvedFirst.previous;\n      while (size > targetSize && last !== null) {\n        const onDelete = last.onDelete;\n        const previous = last.previous;\n        last.onDelete = (null: any);\n\n        // Remove from the list\n        last.previous = last.next = (null: any);\n        if (last === first) {\n          // Reached the head of the list.\n          first = last = null;\n        } else {\n          (first: any).previous = previous;\n          previous.next = (first: any);\n          last = previous;\n        }\n\n        size -= 1;\n\n        // Call the destroy method after removing the entry from the list. If it\n        // throws, the rest of cache will not be deleted, but it will be in a\n        // valid state.\n        onDelete();\n      }\n    }\n  }\n\n  function add(value: Object, onDelete: () => mixed): Entry<Object> {\n    const entry = {\n      value,\n      onDelete,\n      next: (null: any),\n      previous: (null: any),\n    };\n    if (first === null) {\n      entry.previous = entry.next = entry;\n      first = entry;\n    } else {\n      // Append to head\n      const last = first.previous;\n      last.next = entry;\n      entry.previous = last;\n\n      first.previous = entry;\n      entry.next = first;\n\n      first = entry;\n    }\n    size += 1;\n    return entry;\n  }\n\n  function update(entry: Entry<T>, newValue: T): void {\n    entry.value = newValue;\n  }\n\n  function access(entry: Entry<T>): T {\n    const next = entry.next;\n    if (next !== null) {\n      // Entry already cached\n      const resolvedFirst: Entry<T> = (first: any);\n      if (first !== entry) {\n        // Remove from current position\n        const previous = entry.previous;\n        previous.next = next;\n        next.previous = previous;\n\n        // Append to head\n        const last = resolvedFirst.previous;\n        last.next = entry;\n        entry.previous = last;\n\n        resolvedFirst.previous = entry;\n        entry.next = resolvedFirst;\n\n        first = entry;\n      }\n    } else {\n      // Cannot access a deleted entry\n      // TODO: Error? Warning?\n    }\n    scheduleCleanUp();\n    return entry.value;\n  }\n\n  function setLimit(newLimit: number) {\n    LIMIT = newLimit;\n    scheduleCleanUp();\n  }\n\n  return {\n    add,\n    update,\n    access,\n    setLimit,\n  };\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Thenable} from 'shared/ReactTypes';\n\nimport * as React from 'react';\n\nimport {createLRU} from './LRU';\n\ntype Suspender = {then(resolve: () => mixed, reject: () => mixed): mixed, ...};\n\ntype PendingResult = {|\n  status: 0,\n  value: Suspender,\n|};\n\ntype ResolvedResult<V> = {|\n  status: 1,\n  value: V,\n|};\n\ntype RejectedResult = {|\n  status: 2,\n  value: mixed,\n|};\n\ntype Result<V> = PendingResult | ResolvedResult<V> | RejectedResult;\n\ntype Resource<I, V> = {\n  read(I): V,\n  preload(I): void,\n  ...\n};\n\nconst Pending = 0;\nconst Resolved = 1;\nconst Rejected = 2;\n\nconst ReactCurrentDispatcher =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n    .ReactCurrentDispatcher;\n\nfunction readContext(Context) {\n  const dispatcher = ReactCurrentDispatcher.current;\n  if (dispatcher === null) {\n    // This wasn't being minified but we're going to retire this package anyway.\n    // eslint-disable-next-line react-internal/prod-error-codes\n    throw new Error(\n      'react-cache: read and preload may only be called from within a ' +\n        \"component's render. They are not supported in event handlers or \" +\n        'lifecycle methods.',\n    );\n  }\n  return dispatcher.readContext(Context);\n}\n\nfunction identityHashFn(input) {\n  if (__DEV__) {\n    if (\n      typeof input !== 'string' &&\n      typeof input !== 'number' &&\n      typeof input !== 'boolean' &&\n      input !== undefined &&\n      input !== null\n    ) {\n      console.error(\n        'Invalid key type. Expected a string, number, symbol, or boolean, ' +\n          'but instead received: %s' +\n          '\\n\\nTo use non-primitive values as keys, you must pass a hash ' +\n          'function as the second argument to createResource().',\n        input,\n      );\n    }\n  }\n  return input;\n}\n\nconst CACHE_LIMIT = 500;\nconst lru = createLRU(CACHE_LIMIT);\n\nconst entries: Map<Resource<any, any>, Map<any, any>> = new Map();\n\nconst CacheContext = React.createContext(null);\n\nfunction accessResult<I, K, V>(\n  resource: any,\n  fetch: I => Thenable<V>,\n  input: I,\n  key: K,\n): Result<V> {\n  let entriesForResource = entries.get(resource);\n  if (entriesForResource === undefined) {\n    entriesForResource = new Map();\n    entries.set(resource, entriesForResource);\n  }\n  const entry = entriesForResource.get(key);\n  if (entry === undefined) {\n    const thenable = fetch(input);\n    thenable.then(\n      value => {\n        if (newResult.status === Pending) {\n          const resolvedResult: ResolvedResult<V> = (newResult: any);\n          resolvedResult.status = Resolved;\n          resolvedResult.value = value;\n        }\n      },\n      error => {\n        if (newResult.status === Pending) {\n          const rejectedResult: RejectedResult = (newResult: any);\n          rejectedResult.status = Rejected;\n          rejectedResult.value = error;\n        }\n      },\n    );\n    const newResult: PendingResult = {\n      status: Pending,\n      value: thenable,\n    };\n    const newEntry = lru.add(newResult, deleteEntry.bind(null, resource, key));\n    entriesForResource.set(key, newEntry);\n    return newResult;\n  } else {\n    return (lru.access(entry): any);\n  }\n}\n\nfunction deleteEntry(resource, key) {\n  const entriesForResource = entries.get(resource);\n  if (entriesForResource !== undefined) {\n    entriesForResource.delete(key);\n    if (entriesForResource.size === 0) {\n      entries.delete(resource);\n    }\n  }\n}\n\nexport function unstable_createResource<I, K: string | number, V>(\n  fetch: I => Thenable<V>,\n  maybeHashInput?: I => K,\n): Resource<I, V> {\n  const hashInput: I => K =\n    maybeHashInput !== undefined ? maybeHashInput : (identityHashFn: any);\n\n  const resource = {\n    read(input: I): V {\n      // react-cache currently doesn't rely on context, but it may in the\n      // future, so we read anyway to prevent access outside of render.\n      readContext(CacheContext);\n      const key = hashInput(input);\n      const result: Result<V> = accessResult(resource, fetch, input, key);\n      switch (result.status) {\n        case Pending: {\n          const suspender = result.value;\n          throw suspender;\n        }\n        case Resolved: {\n          const value = result.value;\n          return value;\n        }\n        case Rejected: {\n          const error = result.value;\n          throw error;\n        }\n        default:\n          // Should be unreachable\n          return (undefined: any);\n      }\n    },\n\n    preload(input: I): void {\n      // react-cache currently doesn't rely on context, but it may in the\n      // future, so we read anyway to prevent access outside of render.\n      readContext(CacheContext);\n      const key = hashInput(input);\n      accessResult(resource, fetch, input, key);\n    },\n  };\n  return resource;\n}\n\nexport function unstable_setGlobalCacheLimit(limit: number) {\n  lru.setLimit(limit);\n}\n"],"names":["ReactSharedInternals","React","error","format","args","printWarning","level","ReactDebugCurrentFrame","stack","getStackAddendum","concat","argsWithFormat","map","item","String","unshift","Function","prototype","apply","call","console","scheduleCallback","Scheduler","IdlePriority","createLRU","limit","LIMIT","first","size","cleanUpIsScheduled","scheduleCleanUp","cleanUp","deleteLeastRecentlyUsedEntries","targetSize","resolvedFirst","last","previous","onDelete","next","add","value","entry","update","newValue","access","setLimit","newLimit","Pending","Resolved","Rejected","ReactCurrentDispatcher","readContext","Context","dispatcher","current","Error","identityHashFn","input","undefined","CACHE_LIMIT","lru","entries","Map","CacheContext","accessResult","resource","fetch","key","entriesForResource","get","set","thenable","then","newResult","status","resolvedResult","rejectedResult","newEntry","deleteEntry","bind","delete","unstable_createResource","maybeHashInput","hashInput","read","result","suspender","preload","unstable_setGlobalCacheLimit"],"mappings":"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"}