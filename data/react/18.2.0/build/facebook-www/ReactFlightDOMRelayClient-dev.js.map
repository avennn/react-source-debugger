{"version":3,"file":"ReactFlightDOMRelayClient-dev.js","sources":["../../packages/shared/isArray.js","../../packages/react-server-dom-relay/src/ReactFlightDOMRelayClientHostConfig.js","../../packages/shared/forks/ReactFeatureFlags.www.js","../../packages/shared/ReactSymbols.www.js","../../packages/shared/ReactSharedInternals.js","../../packages/shared/ReactServerContextRegistry.js","../../packages/react-client/src/ReactFlightClient.js","../../packages/react-server-dom-relay/src/ReactFlightDOMRelayClient.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\n\nconst isArrayImpl = Array.isArray;\n\n// eslint-disable-next-line no-redeclare\nfunction isArray(a: mixed): boolean {\n  return isArrayImpl(a);\n}\n\nexport default isArray;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {JSONValue, ResponseBase} from 'react-client/src/ReactFlightClient';\n\nimport type {JSResourceReference} from 'JSResourceReference';\n\nimport type {ModuleMetaData} from 'ReactFlightDOMRelayClientIntegration';\n\nexport type ModuleReference<T> = JSResourceReference<T>;\n\nimport {\n  parseModelString,\n  parseModelTuple,\n} from 'react-client/src/ReactFlightClient';\n\nexport {\n  preloadModule,\n  requireModule,\n} from 'ReactFlightDOMRelayClientIntegration';\n\nimport {resolveModuleReference as resolveModuleReferenceImpl} from 'ReactFlightDOMRelayClientIntegration';\n\nimport isArray from 'shared/isArray';\n\nexport type {ModuleMetaData} from 'ReactFlightDOMRelayClientIntegration';\n\nexport type BundlerConfig = null;\n\nexport type UninitializedModel = JSONValue;\n\nexport type Response = ResponseBase;\n\nexport function resolveModuleReference<T>(\n  bundlerConfig: BundlerConfig,\n  moduleData: ModuleMetaData,\n): ModuleReference<T> {\n  return resolveModuleReferenceImpl(moduleData);\n}\n\nfunction parseModelRecursively(response: Response, parentObj, value) {\n  if (typeof value === 'string') {\n    return parseModelString(response, parentObj, value);\n  }\n  if (typeof value === 'object' && value !== null) {\n    if (isArray(value)) {\n      const parsedValue = [];\n      for (let i = 0; i < value.length; i++) {\n        (parsedValue: any)[i] = parseModelRecursively(\n          response,\n          value,\n          value[i],\n        );\n      }\n      return parseModelTuple(response, parsedValue);\n    } else {\n      const parsedValue = {};\n      for (const innerKey in value) {\n        (parsedValue: any)[innerKey] = parseModelRecursively(\n          response,\n          value,\n          value[innerKey],\n        );\n      }\n      return parsedValue;\n    }\n  }\n  return value;\n}\n\nconst dummy = {};\n\nexport function parseModel<T>(response: Response, json: UninitializedModel): T {\n  return (parseModelRecursively(response, dummy, json): any);\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport typeof * as FeatureFlagsType from 'shared/ReactFeatureFlags';\nimport typeof * as ExportsType from './ReactFeatureFlags.www';\nimport typeof * as DynamicFeatureFlags from './ReactFeatureFlags.www-dynamic';\n\n// Re-export dynamic flags from the www version.\nconst dynamicFeatureFlags: DynamicFeatureFlags = require('ReactFeatureFlags');\n\nexport const {\n  disableInputAttributeSyncing,\n  enableTrustedTypesIntegration,\n  disableSchedulerTimeoutBasedOnReactExpirationTime,\n  warnAboutSpreadingKeyToJSX,\n  replayFailedUnitOfWorkWithInvokeGuardedCallback,\n  enableFilterEmptyStringAttributesDOM,\n  enableLegacyFBSupport,\n  deferRenderPhaseUpdateToNextBatch,\n  enableDebugTracing,\n  skipUnmountedBoundaries,\n  createRootStrictEffectsByDefault,\n  enableUseRefAccessWarning,\n  disableNativeComponentFrames,\n  disableSchedulerTimeoutInWorkLoop,\n  enableLazyContextPropagation,\n  enableSyncDefaultUpdates,\n  enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay,\n  enableClientRenderFallbackOnTextMismatch,\n} = dynamicFeatureFlags;\n\n// On WWW, __EXPERIMENTAL__ is used for a new modern build.\n// It's not used anywhere in production yet.\n\nexport const enableStrictEffects =\n  __DEV__ && dynamicFeatureFlags.enableStrictEffects;\nexport const debugRenderPhaseSideEffectsForStrictMode = __DEV__;\nexport const enableProfilerTimer = __PROFILE__;\nexport const enableProfilerCommitHooks = __PROFILE__;\nexport const enableProfilerNestedUpdatePhase = __PROFILE__;\nexport const enableProfilerNestedUpdateScheduledHook =\n  __PROFILE__ && dynamicFeatureFlags.enableProfilerNestedUpdateScheduledHook;\nexport const enableUpdaterTracking = __PROFILE__;\n\nexport const enableSuspenseLayoutEffectSemantics = true;\nexport const enableSuspenseAvoidThisFallback = true;\nexport const enableSuspenseAvoidThisFallbackFizz = false;\nexport const enableCPUSuspense = true;\n\n// Logs additional User Timing API marks for use with an experimental profiling tool.\nexport const enableSchedulingProfiler =\n  __PROFILE__ && dynamicFeatureFlags.enableSchedulingProfiler;\n\n// Note: we'll want to remove this when we to userland implementation.\n// For now, we'll turn it on for everyone because it's *already* on for everyone in practice.\n// At least this will let us stop shipping <Profiler> implementation to all users.\nexport const enableSchedulerDebugging = true;\nexport const warnAboutDeprecatedLifecycles = true;\nexport const disableLegacyContext = __EXPERIMENTAL__;\nexport const warnAboutStringRefs = false;\nexport const warnAboutDefaultPropsOnFunctionComponents = false;\nexport const enableGetInspectorDataForInstanceInProduction = false;\n\nexport const enableCache = true;\nexport const enableCacheElement = true;\n\nexport const disableJavaScriptURLs = true;\n\n// TODO: www currently relies on this feature. It's disabled in open source.\n// Need to remove it.\nexport const disableCommentsAsDOMContainers = false;\n\nexport const disableModulePatternComponents = true;\n\nexport const enableCreateEventHandleAPI = true;\n\nexport const enableScopeAPI = true;\n\nexport const enableSuspenseCallback = true;\n\nexport const enableLegacyHidden = true;\n\nexport const enableComponentStackLocations = true;\n\nexport const disableTextareaChildren = __EXPERIMENTAL__;\n\n// Enable forked reconciler. Piggy-backing on the \"variant\" global so that we\n// don't have to add another test dimension. The build system will compile this\n// to the correct value.\nexport const enableNewReconciler = __VARIANT__;\n\nexport const allowConcurrentByDefault = true;\n\nexport const deletedTreeCleanUpLevel = 3;\n\nexport const consoleManagedByDevToolsDuringStrictMode = true;\nexport const enableServerContext = true;\n\n// Some www surfaces are still using this. Remove once they have been migrated.\nexport const enableUseMutableSource = true;\n\nexport const enableCustomElementPropertySupport = __EXPERIMENTAL__;\n\nexport const enableTransitionTracing = false;\n\nexport const enableSymbolFallbackForWWW = true;\n// Flow magic to verify the exports of this file match the original version.\n// eslint-disable-next-line no-unused-vars\ntype Check<_X, Y: _X, X: Y = _X> = null;\n// eslint-disable-next-line no-unused-expressions\n(null: Check<ExportsType, FeatureFlagsType>);\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\nimport {enableSymbolFallbackForWWW} from './ReactFeatureFlags';\n\nconst usePolyfill =\n  enableSymbolFallbackForWWW && (typeof Symbol !== 'function' || !Symbol.for);\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_ELEMENT_TYPE = usePolyfill\n  ? 0xeac7\n  : Symbol.for('react.element');\nexport const REACT_PORTAL_TYPE = usePolyfill\n  ? 0xeaca\n  : Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE = usePolyfill\n  ? 0xeacb\n  : Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE = usePolyfill\n  ? 0xeacc\n  : Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE = usePolyfill\n  ? 0xead2\n  : Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE = usePolyfill\n  ? 0xeacd\n  : Symbol.for('react.provider');\nexport const REACT_CONTEXT_TYPE = usePolyfill\n  ? 0xeace\n  : Symbol.for('react.context');\nexport const REACT_SERVER_CONTEXT_TYPE = usePolyfill\n  ? 0xeae6\n  : Symbol.for('react.server_context');\nexport const REACT_FORWARD_REF_TYPE = usePolyfill\n  ? 0xead0\n  : Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE = usePolyfill\n  ? 0xead1\n  : Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE = usePolyfill\n  ? 0xead8\n  : Symbol.for('react.suspense_list');\nexport const REACT_MEMO_TYPE = usePolyfill ? 0xead3 : Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE = usePolyfill ? 0xead4 : Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE = usePolyfill\n  ? 0xead7\n  : Symbol.for('react.scope');\nexport const REACT_DEBUG_TRACING_MODE_TYPE = usePolyfill\n  ? 0xeae1\n  : Symbol.for('react.debug_trace_mode');\nexport const REACT_OFFSCREEN_TYPE = usePolyfill\n  ? 0xeae2\n  : Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE = usePolyfill\n  ? 0xeae3\n  : Symbol.for('react.legacy_hidden');\nexport const REACT_CACHE_TYPE = usePolyfill\n  ? 0xeae4\n  : Symbol.for('react.cache');\nexport const REACT_TRACING_MARKER_TYPE = usePolyfill\n  ? 0xeae5\n  : Symbol.for('react.tracing_marker');\nexport const REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED = usePolyfill\n  ? 0xeae7\n  : Symbol.for('react.default_value');\nconst MAYBE_ITERATOR_SYMBOL = usePolyfill\n  ? typeof Symbol === 'function' && Symbol.iterator\n  : Symbol.iterator;\n\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED} from 'shared/ReactSymbols';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport {createServerContext} from 'react';\n\nconst ContextRegistry = ReactSharedInternals.ContextRegistry;\n\nexport function getOrCreateServerContext(globalName: string) {\n  if (!ContextRegistry[globalName]) {\n    ContextRegistry[globalName] = createServerContext(\n      globalName,\n      REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED,\n    );\n  }\n  return ContextRegistry[globalName];\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Wakeable} from 'shared/ReactTypes';\nimport type {LazyComponent} from 'react/src/ReactLazy';\n\nimport type {\n  ModuleReference,\n  ModuleMetaData,\n  UninitializedModel,\n  Response,\n  BundlerConfig,\n} from './ReactFlightClientHostConfig';\n\nimport {\n  resolveModuleReference,\n  preloadModule,\n  requireModule,\n  parseModel,\n} from './ReactFlightClientHostConfig';\n\nimport {REACT_LAZY_TYPE, REACT_ELEMENT_TYPE} from 'shared/ReactSymbols';\n\nimport {getOrCreateServerContext} from 'shared/ReactServerContextRegistry';\n\nexport type JSONValue =\n  | number\n  | null\n  | boolean\n  | string\n  | {+[key: string]: JSONValue}\n  | $ReadOnlyArray<JSONValue>;\n\nconst PENDING = 0;\nconst RESOLVED_MODEL = 1;\nconst RESOLVED_MODULE = 2;\nconst INITIALIZED = 3;\nconst ERRORED = 4;\n\ntype PendingChunk = {\n  _status: 0,\n  _value: null | Array<() => mixed>,\n  _response: Response,\n  then(resolve: () => mixed): void,\n};\ntype ResolvedModelChunk = {\n  _status: 1,\n  _value: UninitializedModel,\n  _response: Response,\n  then(resolve: () => mixed): void,\n};\ntype ResolvedModuleChunk<T> = {\n  _status: 2,\n  _value: ModuleReference<T>,\n  _response: Response,\n  then(resolve: () => mixed): void,\n};\ntype InitializedChunk<T> = {\n  _status: 3,\n  _value: T,\n  _response: Response,\n  then(resolve: () => mixed): void,\n};\ntype ErroredChunk = {\n  _status: 4,\n  _value: Error,\n  _response: Response,\n  then(resolve: () => mixed): void,\n};\ntype SomeChunk<T> =\n  | PendingChunk\n  | ResolvedModelChunk\n  | ResolvedModuleChunk<T>\n  | InitializedChunk<T>\n  | ErroredChunk;\n\nfunction Chunk(status: any, value: any, response: Response) {\n  this._status = status;\n  this._value = value;\n  this._response = response;\n}\nChunk.prototype.then = function<T>(resolve: () => mixed) {\n  const chunk: SomeChunk<T> = this;\n  if (chunk._status === PENDING) {\n    if (chunk._value === null) {\n      chunk._value = [];\n    }\n    chunk._value.push(resolve);\n  } else {\n    resolve();\n  }\n};\n\nexport type ResponseBase = {\n  _bundlerConfig: BundlerConfig,\n  _chunks: Map<number, SomeChunk<any>>,\n  readRoot<T>(): T,\n  ...\n};\n\nexport type {Response};\n\nfunction readChunk<T>(chunk: SomeChunk<T>): T {\n  switch (chunk._status) {\n    case INITIALIZED:\n      return chunk._value;\n    case RESOLVED_MODEL:\n      return initializeModelChunk(chunk);\n    case RESOLVED_MODULE:\n      return initializeModuleChunk(chunk);\n    case PENDING:\n      // eslint-disable-next-line no-throw-literal\n      throw (chunk: Wakeable);\n    default:\n      throw chunk._value;\n  }\n}\n\nfunction readRoot<T>(): T {\n  const response: Response = this;\n  const chunk = getChunk(response, 0);\n  return readChunk(chunk);\n}\n\nfunction createPendingChunk(response: Response): PendingChunk {\n  return new Chunk(PENDING, null, response);\n}\n\nfunction createErrorChunk(response: Response, error: Error): ErroredChunk {\n  return new Chunk(ERRORED, error, response);\n}\n\nfunction createInitializedChunk<T>(\n  response: Response,\n  value: T,\n): InitializedChunk<T> {\n  return new Chunk(INITIALIZED, value, response);\n}\n\nfunction wakeChunk(listeners: null | Array<() => mixed>) {\n  if (listeners !== null) {\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener();\n    }\n  }\n}\n\nfunction triggerErrorOnChunk<T>(chunk: SomeChunk<T>, error: Error): void {\n  if (chunk._status !== PENDING) {\n    // We already resolved. We didn't expect to see this.\n    return;\n  }\n  const listeners = chunk._value;\n  const erroredChunk: ErroredChunk = (chunk: any);\n  erroredChunk._status = ERRORED;\n  erroredChunk._value = error;\n  wakeChunk(listeners);\n}\n\nfunction createResolvedModelChunk(\n  response: Response,\n  value: UninitializedModel,\n): ResolvedModelChunk {\n  return new Chunk(RESOLVED_MODEL, value, response);\n}\n\nfunction createResolvedModuleChunk<T>(\n  response: Response,\n  value: ModuleReference<T>,\n): ResolvedModuleChunk<T> {\n  return new Chunk(RESOLVED_MODULE, value, response);\n}\n\nfunction resolveModelChunk<T>(\n  chunk: SomeChunk<T>,\n  value: UninitializedModel,\n): void {\n  if (chunk._status !== PENDING) {\n    // We already resolved. We didn't expect to see this.\n    return;\n  }\n  const listeners = chunk._value;\n  const resolvedChunk: ResolvedModelChunk = (chunk: any);\n  resolvedChunk._status = RESOLVED_MODEL;\n  resolvedChunk._value = value;\n  wakeChunk(listeners);\n}\n\nfunction resolveModuleChunk<T>(\n  chunk: SomeChunk<T>,\n  value: ModuleReference<T>,\n): void {\n  if (chunk._status !== PENDING) {\n    // We already resolved. We didn't expect to see this.\n    return;\n  }\n  const listeners = chunk._value;\n  const resolvedChunk: ResolvedModuleChunk<T> = (chunk: any);\n  resolvedChunk._status = RESOLVED_MODULE;\n  resolvedChunk._value = value;\n  wakeChunk(listeners);\n}\n\nfunction initializeModelChunk<T>(chunk: ResolvedModelChunk): T {\n  const value: T = parseModel(chunk._response, chunk._value);\n  const initializedChunk: InitializedChunk<T> = (chunk: any);\n  initializedChunk._status = INITIALIZED;\n  initializedChunk._value = value;\n  return value;\n}\n\nfunction initializeModuleChunk<T>(chunk: ResolvedModuleChunk<T>): T {\n  const value: T = requireModule(chunk._value);\n  const initializedChunk: InitializedChunk<T> = (chunk: any);\n  initializedChunk._status = INITIALIZED;\n  initializedChunk._value = value;\n  return value;\n}\n\n// Report that any missing chunks in the model is now going to throw this\n// error upon read. Also notify any pending promises.\nexport function reportGlobalError(response: Response, error: Error): void {\n  response._chunks.forEach(chunk => {\n    // If this chunk was already resolved or errored, it won't\n    // trigger an error but if it wasn't then we need to\n    // because we won't be getting any new data to resolve it.\n    triggerErrorOnChunk(chunk, error);\n  });\n}\n\nfunction createElement(type, key, props): React$Element<any> {\n  const element: any = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: null,\n    props: props,\n\n    // Record the component responsible for creating this element.\n    _owner: null,\n  };\n  if (__DEV__) {\n    // We don't really need to add any of these but keeping them for good measure.\n    // Unfortunately, _store is enumerable in jest matchers so for equality to\n    // work, I need to keep it or make _store non-enumerable in the other file.\n    element._store = {};\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: true, // This element has already been validated on the server.\n    });\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: null,\n    });\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: null,\n    });\n  }\n  return element;\n}\n\nfunction createLazyChunkWrapper<T>(\n  chunk: SomeChunk<T>,\n): LazyComponent<T, SomeChunk<T>> {\n  const lazyType: LazyComponent<T, SomeChunk<T>> = {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: chunk,\n    _init: readChunk,\n  };\n  return lazyType;\n}\n\nfunction getChunk(response: Response, id: number): SomeChunk<any> {\n  const chunks = response._chunks;\n  let chunk = chunks.get(id);\n  if (!chunk) {\n    chunk = createPendingChunk(response);\n    chunks.set(id, chunk);\n  }\n  return chunk;\n}\n\nexport function parseModelString(\n  response: Response,\n  parentObject: Object,\n  value: string,\n): any {\n  switch (value[0]) {\n    case '$': {\n      if (value === '$') {\n        return REACT_ELEMENT_TYPE;\n      } else if (value[1] === '$' || value[1] === '@') {\n        // This was an escaped string value.\n        return value.substring(1);\n      } else {\n        const id = parseInt(value.substring(1), 16);\n        const chunk = getChunk(response, id);\n        return readChunk(chunk);\n      }\n    }\n    case '@': {\n      const id = parseInt(value.substring(1), 16);\n      const chunk = getChunk(response, id);\n      // We create a React.lazy wrapper around any lazy values.\n      // When passed into React, we'll know how to suspend on this.\n      return createLazyChunkWrapper(chunk);\n    }\n  }\n  return value;\n}\n\nexport function parseModelTuple(\n  response: Response,\n  value: {+[key: string]: JSONValue} | $ReadOnlyArray<JSONValue>,\n): any {\n  const tuple: [mixed, mixed, mixed, mixed] = (value: any);\n\n  if (tuple[0] === REACT_ELEMENT_TYPE) {\n    // TODO: Consider having React just directly accept these arrays as elements.\n    // Or even change the ReactElement type to be an array.\n    return createElement(tuple[1], tuple[2], tuple[3]);\n  }\n  return value;\n}\n\nexport function createResponse(bundlerConfig: BundlerConfig): ResponseBase {\n  const chunks: Map<number, SomeChunk<any>> = new Map();\n  const response = {\n    _bundlerConfig: bundlerConfig,\n    _chunks: chunks,\n    readRoot: readRoot,\n  };\n  return response;\n}\n\nexport function resolveModel(\n  response: Response,\n  id: number,\n  model: UninitializedModel,\n): void {\n  const chunks = response._chunks;\n  const chunk = chunks.get(id);\n  if (!chunk) {\n    chunks.set(id, createResolvedModelChunk(response, model));\n  } else {\n    resolveModelChunk(chunk, model);\n  }\n}\n\nexport function resolveProvider(\n  response: Response,\n  id: number,\n  contextName: string,\n): void {\n  const chunks = response._chunks;\n  chunks.set(\n    id,\n    createInitializedChunk(\n      response,\n      getOrCreateServerContext(contextName).Provider,\n    ),\n  );\n}\n\nexport function resolveModule(\n  response: Response,\n  id: number,\n  model: UninitializedModel,\n): void {\n  const chunks = response._chunks;\n  const chunk = chunks.get(id);\n  const moduleMetaData: ModuleMetaData = parseModel(response, model);\n  const moduleReference = resolveModuleReference(\n    response._bundlerConfig,\n    moduleMetaData,\n  );\n\n  // TODO: Add an option to encode modules that are lazy loaded.\n  // For now we preload all modules as early as possible since it's likely\n  // that we'll need them.\n  preloadModule(moduleReference);\n\n  if (!chunk) {\n    chunks.set(id, createResolvedModuleChunk(response, moduleReference));\n  } else {\n    resolveModuleChunk(chunk, moduleReference);\n  }\n}\n\nexport function resolveSymbol(\n  response: Response,\n  id: number,\n  name: string,\n): void {\n  const chunks = response._chunks;\n  // We assume that we'll always emit the symbol before anything references it\n  // to save a few bytes.\n  chunks.set(id, createInitializedChunk(response, Symbol.for(name)));\n}\n\nexport function resolveError(\n  response: Response,\n  id: number,\n  message: string,\n  stack: string,\n): void {\n  // eslint-disable-next-line react-internal/prod-error-codes\n  const error = new Error(message);\n  error.stack = stack;\n  const chunks = response._chunks;\n  const chunk = chunks.get(id);\n  if (!chunk) {\n    chunks.set(id, createErrorChunk(response, error));\n  } else {\n    triggerErrorOnChunk(chunk, error);\n  }\n}\n\nexport function close(response: Response): void {\n  // In case there are any remaining unresolved chunks, they won't\n  // be resolved now. So we need to issue an error to those.\n  // Ideally we should be able to early bail out if we kept a\n  // ref count of pending chunks.\n  reportGlobalError(response, new Error('Connection closed.'));\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {RowEncoding} from './ReactFlightDOMRelayProtocol';\n\nimport type {Response} from 'react-client/src/ReactFlightClient';\n\nimport {\n  createResponse,\n  resolveModel,\n  resolveModule,\n  resolveSymbol,\n  resolveError,\n  close,\n} from 'react-client/src/ReactFlightClient';\n\nexport {createResponse, close};\n\nexport function resolveRow(response: Response, chunk: RowEncoding): void {\n  if (chunk[0] === 'J') {\n    resolveModel(response, chunk[1], chunk[2]);\n  } else if (chunk[0] === 'M') {\n    resolveModule(response, chunk[1], chunk[2]);\n  } else if (chunk[0] === 'S') {\n    // $FlowFixMe: Flow doesn't support disjoint unions on tuples.\n    resolveSymbol(response, chunk[1], chunk[2]);\n  } else {\n    // $FlowFixMe: Flow doesn't support disjoint unions on tuples.\n    resolveError(response, chunk[1], chunk[2].message, chunk[2].stack);\n  }\n}\n"],"names":["isArrayImpl","Array","isArray","a","resolveModuleReference","bundlerConfig","moduleData","resolveModuleReferenceImpl","parseModelRecursively","response","parentObj","value","parseModelString","parsedValue","i","length","parseModelTuple","innerKey","dummy","parseModel","json","dynamicFeatureFlags","require","disableInputAttributeSyncing","enableTrustedTypesIntegration","disableSchedulerTimeoutBasedOnReactExpirationTime","warnAboutSpreadingKeyToJSX","replayFailedUnitOfWorkWithInvokeGuardedCallback","enableFilterEmptyStringAttributesDOM","enableLegacyFBSupport","deferRenderPhaseUpdateToNextBatch","enableDebugTracing","skipUnmountedBoundaries","createRootStrictEffectsByDefault","enableUseRefAccessWarning","disableNativeComponentFrames","disableSchedulerTimeoutInWorkLoop","enableLazyContextPropagation","enableSyncDefaultUpdates","enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay","enableClientRenderFallbackOnTextMismatch","enableStrictEffects","__DEV__","enableProfilerNestedUpdateScheduledHook","__PROFILE__","enableSchedulingProfiler","usePolyfill","enableSymbolFallbackForWWW","Symbol","for","REACT_ELEMENT_TYPE","REACT_LAZY_TYPE","ReactSharedInternals","React","ContextRegistry","PENDING","RESOLVED_MODEL","RESOLVED_MODULE","INITIALIZED","ERRORED","Chunk","status","_status","_value","_response","prototype","then","resolve","chunk","push","readChunk","initializeModelChunk","initializeModuleChunk","readRoot","getChunk","createPendingChunk","createErrorChunk","error","createInitializedChunk","wakeChunk","listeners","listener","triggerErrorOnChunk","erroredChunk","createResolvedModelChunk","createResolvedModuleChunk","resolveModelChunk","resolvedChunk","resolveModuleChunk","initializedChunk","requireModule","reportGlobalError","_chunks","forEach","createElement","type","key","props","element","$$typeof","ref","_owner","_store","Object","defineProperty","configurable","enumerable","writable","createLazyChunkWrapper","lazyType","_payload","_init","id","chunks","get","set","parentObject","substring","parseInt","tuple","createResponse","Map","_bundlerConfig","resolveModel","model","resolveModule","moduleMetaData","moduleReference","preloadModule","resolveSymbol","name","resolveError","message","stack","Error","close","resolveRow"],"mappings":"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"}