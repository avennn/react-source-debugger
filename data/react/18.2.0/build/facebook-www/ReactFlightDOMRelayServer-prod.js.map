{"version":3,"file":"ReactFlightDOMRelayServer-prod.js","sources":["../../packages/shared/hasOwnProperty.js","../../packages/shared/isArray.js","../../packages/react-server-dom-relay/src/ReactFlightDOMRelayServerHostConfig.js","../../packages/shared/forks/ReactFeatureFlags.www.js","../../packages/shared/ReactSymbols.www.js","../../packages/react-dom/src/shared/DOMProperty.js","../../packages/react-dom/src/shared/CSSProperty.js","../../packages/react-server/src/ReactFlightNewContext.js","../../packages/react-server/src/ReactFlightHooks.js","../../packages/shared/ReactSharedInternals.js","../../packages/shared/ReactServerContextRegistry.js","../../packages/react-server/src/ReactFlightServer.js","../../packages/react-server-dom-relay/src/ReactFlightDOMRelayServer.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport default hasOwnProperty;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\ndeclare function isArray(a: mixed): boolean %checks(Array.isArray(a));\n\nconst isArrayImpl = Array.isArray;\n\n// eslint-disable-next-line no-redeclare\nfunction isArray(a: mixed): boolean {\n  return isArrayImpl(a);\n}\n\nexport default isArray;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {RowEncoding, JSONValue} from './ReactFlightDOMRelayProtocol';\n\nimport type {Request, ReactModel} from 'react-server/src/ReactFlightServer';\n\nimport type {JSResourceReference} from 'JSResourceReference';\nimport JSResourceReferenceImpl from 'JSResourceReferenceImpl';\n\nimport hasOwnProperty from 'shared/hasOwnProperty';\nimport isArray from 'shared/isArray';\n\nexport type ModuleReference<T> = JSResourceReference<T>;\n\nimport type {\n  Destination,\n  BundlerConfig,\n  ModuleMetaData,\n} from 'ReactFlightDOMRelayServerIntegration';\n\nimport {resolveModelToJSON} from 'react-server/src/ReactFlightServer';\n\nimport {\n  emitRow,\n  resolveModuleMetaData as resolveModuleMetaDataImpl,\n  close,\n} from 'ReactFlightDOMRelayServerIntegration';\n\nexport type {\n  Destination,\n  BundlerConfig,\n  ModuleMetaData,\n} from 'ReactFlightDOMRelayServerIntegration';\n\nexport function isModuleReference(reference: Object): boolean {\n  return reference instanceof JSResourceReferenceImpl;\n}\n\nexport type ModuleKey = ModuleReference<any>;\n\nexport function getModuleKey(reference: ModuleReference<any>): ModuleKey {\n  // We use the reference object itself as the key because we assume the\n  // object will be cached by the bundler runtime.\n  return reference;\n}\n\nexport function resolveModuleMetaData<T>(\n  config: BundlerConfig,\n  resource: ModuleReference<T>,\n): ModuleMetaData {\n  return resolveModuleMetaDataImpl(config, resource);\n}\n\nexport type Chunk = RowEncoding;\n\nexport function processErrorChunk(\n  request: Request,\n  id: number,\n  message: string,\n  stack: string,\n): Chunk {\n  return [\n    'E',\n    id,\n    {\n      message,\n      stack,\n    },\n  ];\n}\n\nfunction convertModelToJSON(\n  request: Request,\n  parent: {+[key: string]: ReactModel} | $ReadOnlyArray<ReactModel>,\n  key: string,\n  model: ReactModel,\n): JSONValue {\n  const json = resolveModelToJSON(request, parent, key, model);\n  if (typeof json === 'object' && json !== null) {\n    if (isArray(json)) {\n      const jsonArray: Array<JSONValue> = [];\n      for (let i = 0; i < json.length; i++) {\n        jsonArray[i] = convertModelToJSON(request, json, '' + i, json[i]);\n      }\n      return jsonArray;\n    } else {\n      const jsonObj: {[key: string]: JSONValue} = {};\n      for (const nextKey in json) {\n        if (hasOwnProperty.call(json, nextKey)) {\n          jsonObj[nextKey] = convertModelToJSON(\n            request,\n            json,\n            nextKey,\n            json[nextKey],\n          );\n        }\n      }\n      return jsonObj;\n    }\n  }\n  return json;\n}\n\nexport function processModelChunk(\n  request: Request,\n  id: number,\n  model: ReactModel,\n): Chunk {\n  const json = convertModelToJSON(request, {}, '', model);\n  return ['J', id, json];\n}\n\nexport function processModuleChunk(\n  request: Request,\n  id: number,\n  moduleMetaData: ModuleMetaData,\n): Chunk {\n  // The moduleMetaData is already a JSON serializable value.\n  return ['M', id, moduleMetaData];\n}\n\nexport function processProviderChunk(\n  request: Request,\n  id: number,\n  contextName: string,\n): Chunk {\n  return ['P', id, contextName];\n}\n\nexport function processSymbolChunk(\n  request: Request,\n  id: number,\n  name: string,\n): Chunk {\n  return ['S', id, name];\n}\n\nexport function scheduleWork(callback: () => void) {\n  callback();\n}\n\nexport function flushBuffered(destination: Destination) {}\n\nexport function beginWriting(destination: Destination) {}\n\nexport function writeChunk(destination: Destination, chunk: Chunk): void {\n  emitRow(destination, chunk);\n}\n\nexport function writeChunkAndReturn(\n  destination: Destination,\n  chunk: Chunk,\n): boolean {\n  emitRow(destination, chunk);\n  return true;\n}\n\nexport function completeWriting(destination: Destination) {}\n\nexport {close};\n\nexport function closeWithError(destination: Destination, error: mixed): void {\n  close(destination);\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport typeof * as FeatureFlagsType from 'shared/ReactFeatureFlags';\nimport typeof * as ExportsType from './ReactFeatureFlags.www';\nimport typeof * as DynamicFeatureFlags from './ReactFeatureFlags.www-dynamic';\n\n// Re-export dynamic flags from the www version.\nconst dynamicFeatureFlags: DynamicFeatureFlags = require('ReactFeatureFlags');\n\nexport const {\n  disableInputAttributeSyncing,\n  enableTrustedTypesIntegration,\n  disableSchedulerTimeoutBasedOnReactExpirationTime,\n  warnAboutSpreadingKeyToJSX,\n  replayFailedUnitOfWorkWithInvokeGuardedCallback,\n  enableFilterEmptyStringAttributesDOM,\n  enableLegacyFBSupport,\n  deferRenderPhaseUpdateToNextBatch,\n  enableDebugTracing,\n  skipUnmountedBoundaries,\n  createRootStrictEffectsByDefault,\n  enableUseRefAccessWarning,\n  disableNativeComponentFrames,\n  disableSchedulerTimeoutInWorkLoop,\n  enableLazyContextPropagation,\n  enableSyncDefaultUpdates,\n  enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay,\n  enableClientRenderFallbackOnTextMismatch,\n} = dynamicFeatureFlags;\n\n// On WWW, __EXPERIMENTAL__ is used for a new modern build.\n// It's not used anywhere in production yet.\n\nexport const enableStrictEffects =\n  __DEV__ && dynamicFeatureFlags.enableStrictEffects;\nexport const debugRenderPhaseSideEffectsForStrictMode = __DEV__;\nexport const enableProfilerTimer = __PROFILE__;\nexport const enableProfilerCommitHooks = __PROFILE__;\nexport const enableProfilerNestedUpdatePhase = __PROFILE__;\nexport const enableProfilerNestedUpdateScheduledHook =\n  __PROFILE__ && dynamicFeatureFlags.enableProfilerNestedUpdateScheduledHook;\nexport const enableUpdaterTracking = __PROFILE__;\n\nexport const enableSuspenseLayoutEffectSemantics = true;\nexport const enableSuspenseAvoidThisFallback = true;\nexport const enableSuspenseAvoidThisFallbackFizz = false;\nexport const enableCPUSuspense = true;\n\n// Logs additional User Timing API marks for use with an experimental profiling tool.\nexport const enableSchedulingProfiler =\n  __PROFILE__ && dynamicFeatureFlags.enableSchedulingProfiler;\n\n// Note: we'll want to remove this when we to userland implementation.\n// For now, we'll turn it on for everyone because it's *already* on for everyone in practice.\n// At least this will let us stop shipping <Profiler> implementation to all users.\nexport const enableSchedulerDebugging = true;\nexport const warnAboutDeprecatedLifecycles = true;\nexport const disableLegacyContext = __EXPERIMENTAL__;\nexport const warnAboutStringRefs = false;\nexport const warnAboutDefaultPropsOnFunctionComponents = false;\nexport const enableGetInspectorDataForInstanceInProduction = false;\n\nexport const enableCache = true;\nexport const enableCacheElement = true;\n\nexport const disableJavaScriptURLs = true;\n\n// TODO: www currently relies on this feature. It's disabled in open source.\n// Need to remove it.\nexport const disableCommentsAsDOMContainers = false;\n\nexport const disableModulePatternComponents = true;\n\nexport const enableCreateEventHandleAPI = true;\n\nexport const enableScopeAPI = true;\n\nexport const enableSuspenseCallback = true;\n\nexport const enableLegacyHidden = true;\n\nexport const enableComponentStackLocations = true;\n\nexport const disableTextareaChildren = __EXPERIMENTAL__;\n\n// Enable forked reconciler. Piggy-backing on the \"variant\" global so that we\n// don't have to add another test dimension. The build system will compile this\n// to the correct value.\nexport const enableNewReconciler = __VARIANT__;\n\nexport const allowConcurrentByDefault = true;\n\nexport const deletedTreeCleanUpLevel = 3;\n\nexport const consoleManagedByDevToolsDuringStrictMode = true;\nexport const enableServerContext = true;\n\n// Some www surfaces are still using this. Remove once they have been migrated.\nexport const enableUseMutableSource = true;\n\nexport const enableCustomElementPropertySupport = __EXPERIMENTAL__;\n\nexport const enableTransitionTracing = false;\n\nexport const enableSymbolFallbackForWWW = true;\n// Flow magic to verify the exports of this file match the original version.\n// eslint-disable-next-line no-unused-vars\ntype Check<_X, Y: _X, X: Y = _X> = null;\n// eslint-disable-next-line no-unused-expressions\n(null: Check<ExportsType, FeatureFlagsType>);\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n\nimport {enableSymbolFallbackForWWW} from './ReactFeatureFlags';\n\nconst usePolyfill =\n  enableSymbolFallbackForWWW && (typeof Symbol !== 'function' || !Symbol.for);\n\n// The Symbol used to tag the ReactElement-like types.\nexport const REACT_ELEMENT_TYPE = usePolyfill\n  ? 0xeac7\n  : Symbol.for('react.element');\nexport const REACT_PORTAL_TYPE = usePolyfill\n  ? 0xeaca\n  : Symbol.for('react.portal');\nexport const REACT_FRAGMENT_TYPE = usePolyfill\n  ? 0xeacb\n  : Symbol.for('react.fragment');\nexport const REACT_STRICT_MODE_TYPE = usePolyfill\n  ? 0xeacc\n  : Symbol.for('react.strict_mode');\nexport const REACT_PROFILER_TYPE = usePolyfill\n  ? 0xead2\n  : Symbol.for('react.profiler');\nexport const REACT_PROVIDER_TYPE = usePolyfill\n  ? 0xeacd\n  : Symbol.for('react.provider');\nexport const REACT_CONTEXT_TYPE = usePolyfill\n  ? 0xeace\n  : Symbol.for('react.context');\nexport const REACT_SERVER_CONTEXT_TYPE = usePolyfill\n  ? 0xeae6\n  : Symbol.for('react.server_context');\nexport const REACT_FORWARD_REF_TYPE = usePolyfill\n  ? 0xead0\n  : Symbol.for('react.forward_ref');\nexport const REACT_SUSPENSE_TYPE = usePolyfill\n  ? 0xead1\n  : Symbol.for('react.suspense');\nexport const REACT_SUSPENSE_LIST_TYPE = usePolyfill\n  ? 0xead8\n  : Symbol.for('react.suspense_list');\nexport const REACT_MEMO_TYPE = usePolyfill ? 0xead3 : Symbol.for('react.memo');\nexport const REACT_LAZY_TYPE = usePolyfill ? 0xead4 : Symbol.for('react.lazy');\nexport const REACT_SCOPE_TYPE = usePolyfill\n  ? 0xead7\n  : Symbol.for('react.scope');\nexport const REACT_DEBUG_TRACING_MODE_TYPE = usePolyfill\n  ? 0xeae1\n  : Symbol.for('react.debug_trace_mode');\nexport const REACT_OFFSCREEN_TYPE = usePolyfill\n  ? 0xeae2\n  : Symbol.for('react.offscreen');\nexport const REACT_LEGACY_HIDDEN_TYPE = usePolyfill\n  ? 0xeae3\n  : Symbol.for('react.legacy_hidden');\nexport const REACT_CACHE_TYPE = usePolyfill\n  ? 0xeae4\n  : Symbol.for('react.cache');\nexport const REACT_TRACING_MARKER_TYPE = usePolyfill\n  ? 0xeae5\n  : Symbol.for('react.tracing_marker');\nexport const REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED = usePolyfill\n  ? 0xeae7\n  : Symbol.for('react.default_value');\nconst MAYBE_ITERATOR_SYMBOL = usePolyfill\n  ? typeof Symbol === 'function' && Symbol.iterator\n  : Symbol.iterator;\n\nconst FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nexport function getIteratorFn(maybeIterable: ?any): ?() => ?Iterator<*> {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n  const maybeIterator =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[FAUX_ITERATOR_SYMBOL];\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n  return null;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {\n  enableFilterEmptyStringAttributesDOM,\n  enableCustomElementPropertySupport,\n} from 'shared/ReactFeatureFlags';\nimport hasOwnProperty from 'shared/hasOwnProperty';\n\ntype PropertyType = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\n// A reserved attribute.\n// It is handled by React separately and shouldn't be written to the DOM.\nexport const RESERVED = 0;\n\n// A simple string attribute.\n// Attributes that aren't in the filter are presumed to have this type.\nexport const STRING = 1;\n\n// A string attribute that accepts booleans in React. In HTML, these are called\n// \"enumerated\" attributes with \"true\" and \"false\" as possible values.\n// When true, it should be set to a \"true\" string.\n// When false, it should be set to a \"false\" string.\nexport const BOOLEANISH_STRING = 2;\n\n// A real boolean attribute.\n// When true, it should be present (set either to an empty string or its name).\n// When false, it should be omitted.\nexport const BOOLEAN = 3;\n\n// An attribute that can be used as a flag as well as with a value.\n// When true, it should be present (set either to an empty string or its name).\n// When false, it should be omitted.\n// For any other value, should be present with that value.\nexport const OVERLOADED_BOOLEAN = 4;\n\n// An attribute that must be numeric or parse as a numeric.\n// When falsy, it should be removed.\nexport const NUMERIC = 5;\n\n// An attribute that must be positive numeric or parse as a positive numeric.\n// When falsy, it should be removed.\nexport const POSITIVE_NUMERIC = 6;\n\nexport type PropertyInfo = {|\n  +acceptsBooleans: boolean,\n  +attributeName: string,\n  +attributeNamespace: string | null,\n  +mustUseProperty: boolean,\n  +propertyName: string,\n  +type: PropertyType,\n  +sanitizeURL: boolean,\n  +removeEmptyString: boolean,\n|};\n\n/* eslint-disable max-len */\nexport const ATTRIBUTE_NAME_START_CHAR =\n  ':A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\n/* eslint-enable max-len */\nexport const ATTRIBUTE_NAME_CHAR =\n  ATTRIBUTE_NAME_START_CHAR + '\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\n\nexport const VALID_ATTRIBUTE_NAME_REGEX = new RegExp(\n  '^[' + ATTRIBUTE_NAME_START_CHAR + '][' + ATTRIBUTE_NAME_CHAR + ']*$',\n);\n\nconst illegalAttributeNameCache = {};\nconst validatedAttributeNameCache = {};\n\nexport function isAttributeNameSafe(attributeName: string): boolean {\n  if (hasOwnProperty.call(validatedAttributeNameCache, attributeName)) {\n    return true;\n  }\n  if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) {\n    return false;\n  }\n  if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)) {\n    validatedAttributeNameCache[attributeName] = true;\n    return true;\n  }\n  illegalAttributeNameCache[attributeName] = true;\n  if (__DEV__) {\n    console.error('Invalid attribute name: `%s`', attributeName);\n  }\n  return false;\n}\n\nexport function shouldIgnoreAttribute(\n  name: string,\n  propertyInfo: PropertyInfo | null,\n  isCustomComponentTag: boolean,\n): boolean {\n  if (propertyInfo !== null) {\n    return propertyInfo.type === RESERVED;\n  }\n  if (isCustomComponentTag) {\n    return false;\n  }\n  if (\n    name.length > 2 &&\n    (name[0] === 'o' || name[0] === 'O') &&\n    (name[1] === 'n' || name[1] === 'N')\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport function shouldRemoveAttributeWithWarning(\n  name: string,\n  value: mixed,\n  propertyInfo: PropertyInfo | null,\n  isCustomComponentTag: boolean,\n): boolean {\n  if (propertyInfo !== null && propertyInfo.type === RESERVED) {\n    return false;\n  }\n  switch (typeof value) {\n    case 'function':\n    // $FlowIssue symbol is perfectly valid here\n    case 'symbol': // eslint-disable-line\n      return true;\n    case 'boolean': {\n      if (isCustomComponentTag) {\n        return false;\n      }\n      if (propertyInfo !== null) {\n        return !propertyInfo.acceptsBooleans;\n      } else {\n        const prefix = name.toLowerCase().slice(0, 5);\n        return prefix !== 'data-' && prefix !== 'aria-';\n      }\n    }\n    default:\n      return false;\n  }\n}\n\nexport function shouldRemoveAttribute(\n  name: string,\n  value: mixed,\n  propertyInfo: PropertyInfo | null,\n  isCustomComponentTag: boolean,\n): boolean {\n  if (value === null || typeof value === 'undefined') {\n    return true;\n  }\n  if (\n    shouldRemoveAttributeWithWarning(\n      name,\n      value,\n      propertyInfo,\n      isCustomComponentTag,\n    )\n  ) {\n    return true;\n  }\n  if (isCustomComponentTag) {\n    if (enableCustomElementPropertySupport) {\n      if (value === false) {\n        return true;\n      }\n    }\n    return false;\n  }\n  if (propertyInfo !== null) {\n    if (enableFilterEmptyStringAttributesDOM) {\n      if (propertyInfo.removeEmptyString && value === '') {\n        if (__DEV__) {\n          if (name === 'src') {\n            console.error(\n              'An empty string (\"\") was passed to the %s attribute. ' +\n                'This may cause the browser to download the whole page again over the network. ' +\n                'To fix this, either do not render the element at all ' +\n                'or pass null to %s instead of an empty string.',\n              name,\n              name,\n            );\n          } else {\n            console.error(\n              'An empty string (\"\") was passed to the %s attribute. ' +\n                'To fix this, either do not render the element at all ' +\n                'or pass null to %s instead of an empty string.',\n              name,\n              name,\n            );\n          }\n        }\n        return true;\n      }\n    }\n\n    switch (propertyInfo.type) {\n      case BOOLEAN:\n        return !value;\n      case OVERLOADED_BOOLEAN:\n        return value === false;\n      case NUMERIC:\n        return isNaN(value);\n      case POSITIVE_NUMERIC:\n        return isNaN(value) || (value: any) < 1;\n    }\n  }\n  return false;\n}\n\nexport function getPropertyInfo(name: string): PropertyInfo | null {\n  return properties.hasOwnProperty(name) ? properties[name] : null;\n}\n\nfunction PropertyInfoRecord(\n  name: string,\n  type: PropertyType,\n  mustUseProperty: boolean,\n  attributeName: string,\n  attributeNamespace: string | null,\n  sanitizeURL: boolean,\n  removeEmptyString: boolean,\n) {\n  this.acceptsBooleans =\n    type === BOOLEANISH_STRING ||\n    type === BOOLEAN ||\n    type === OVERLOADED_BOOLEAN;\n  this.attributeName = attributeName;\n  this.attributeNamespace = attributeNamespace;\n  this.mustUseProperty = mustUseProperty;\n  this.propertyName = name;\n  this.type = type;\n  this.sanitizeURL = sanitizeURL;\n  this.removeEmptyString = removeEmptyString;\n}\n\n// When adding attributes to this list, be sure to also add them to\n// the `possibleStandardNames` module to ensure casing and incorrect\n// name warnings.\nconst properties = {};\n\n// These props are reserved by React. They shouldn't be written to the DOM.\nconst reservedProps = [\n  'children',\n  'dangerouslySetInnerHTML',\n  // TODO: This prevents the assignment of defaultValue to regular\n  // elements (not just inputs). Now that ReactDOMInput assigns to the\n  // defaultValue property -- do we need this?\n  'defaultValue',\n  'defaultChecked',\n  'innerHTML',\n  'suppressContentEditableWarning',\n  'suppressHydrationWarning',\n  'style',\n];\nif (enableCustomElementPropertySupport) {\n  reservedProps.push('innerText', 'textContent');\n}\n\nreservedProps.forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    RESERVED,\n    false, // mustUseProperty\n    name, // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// A few React string attributes have a different name.\n// This is a mapping from React prop names to the attribute names.\n[\n  ['acceptCharset', 'accept-charset'],\n  ['className', 'class'],\n  ['htmlFor', 'for'],\n  ['httpEquiv', 'http-equiv'],\n].forEach(([name, attributeName]) => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    STRING,\n    false, // mustUseProperty\n    attributeName, // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are \"enumerated\" HTML attributes that accept \"true\" and \"false\".\n// In React, we let users pass `true` and `false` even though technically\n// these aren't boolean attributes (they are coerced to strings).\n['contentEditable', 'draggable', 'spellCheck', 'value'].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    BOOLEANISH_STRING,\n    false, // mustUseProperty\n    name.toLowerCase(), // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are \"enumerated\" SVG attributes that accept \"true\" and \"false\".\n// In React, we let users pass `true` and `false` even though technically\n// these aren't boolean attributes (they are coerced to strings).\n// Since these are SVG attributes, their attribute names are case-sensitive.\n[\n  'autoReverse',\n  'externalResourcesRequired',\n  'focusable',\n  'preserveAlpha',\n].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    BOOLEANISH_STRING,\n    false, // mustUseProperty\n    name, // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are HTML boolean attributes.\n[\n  'allowFullScreen',\n  'async',\n  // Note: there is a special case that prevents it from being written to the DOM\n  // on the client side because the browsers are inconsistent. Instead we call focus().\n  'autoFocus',\n  'autoPlay',\n  'controls',\n  'default',\n  'defer',\n  'disabled',\n  'disablePictureInPicture',\n  'disableRemotePlayback',\n  'formNoValidate',\n  'hidden',\n  'loop',\n  'noModule',\n  'noValidate',\n  'open',\n  'playsInline',\n  'readOnly',\n  'required',\n  'reversed',\n  'scoped',\n  'seamless',\n  // Microdata\n  'itemScope',\n].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    BOOLEAN,\n    false, // mustUseProperty\n    name.toLowerCase(), // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are the few React props that we set as DOM properties\n// rather than attributes. These are all booleans.\n[\n  'checked',\n  // Note: `option.selected` is not updated if `select.multiple` is\n  // disabled with `removeAttribute`. We have special logic for handling this.\n  'multiple',\n  'muted',\n  'selected',\n\n  // NOTE: if you add a camelCased prop to this list,\n  // you'll need to set attributeName to name.toLowerCase()\n  // instead in the assignment below.\n].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    BOOLEAN,\n    true, // mustUseProperty\n    name, // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are HTML attributes that are \"overloaded booleans\": they behave like\n// booleans, but can also accept a string value.\n[\n  'capture',\n  'download',\n\n  // NOTE: if you add a camelCased prop to this list,\n  // you'll need to set attributeName to name.toLowerCase()\n  // instead in the assignment below.\n].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    OVERLOADED_BOOLEAN,\n    false, // mustUseProperty\n    name, // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are HTML attributes that must be positive numbers.\n[\n  'cols',\n  'rows',\n  'size',\n  'span',\n\n  // NOTE: if you add a camelCased prop to this list,\n  // you'll need to set attributeName to name.toLowerCase()\n  // instead in the assignment below.\n].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    POSITIVE_NUMERIC,\n    false, // mustUseProperty\n    name, // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These are HTML attributes that must be numbers.\n['rowSpan', 'start'].forEach(name => {\n  properties[name] = new PropertyInfoRecord(\n    name,\n    NUMERIC,\n    false, // mustUseProperty\n    name.toLowerCase(), // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\nconst CAMELIZE = /[\\-\\:]([a-z])/g;\nconst capitalize = token => token[1].toUpperCase();\n\n// This is a list of all SVG attributes that need special casing, namespacing,\n// or boolean value assignment. Regular attributes that just accept strings\n// and have the same names are omitted, just like in the HTML attribute filter.\n// Some of these attributes can be hard to find. This list was created by\n// scraping the MDN documentation.\n[\n  'accent-height',\n  'alignment-baseline',\n  'arabic-form',\n  'baseline-shift',\n  'cap-height',\n  'clip-path',\n  'clip-rule',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'dominant-baseline',\n  'enable-background',\n  'fill-opacity',\n  'fill-rule',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'glyph-name',\n  'glyph-orientation-horizontal',\n  'glyph-orientation-vertical',\n  'horiz-adv-x',\n  'horiz-origin-x',\n  'image-rendering',\n  'letter-spacing',\n  'lighting-color',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'overline-position',\n  'overline-thickness',\n  'paint-order',\n  'panose-1',\n  'pointer-events',\n  'rendering-intent',\n  'shape-rendering',\n  'stop-color',\n  'stop-opacity',\n  'strikethrough-position',\n  'strikethrough-thickness',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke-width',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'underline-position',\n  'underline-thickness',\n  'unicode-bidi',\n  'unicode-range',\n  'units-per-em',\n  'v-alphabetic',\n  'v-hanging',\n  'v-ideographic',\n  'v-mathematical',\n  'vector-effect',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'word-spacing',\n  'writing-mode',\n  'xmlns:xlink',\n  'x-height',\n\n  // NOTE: if you add a camelCased prop to this list,\n  // you'll need to set attributeName to name.toLowerCase()\n  // instead in the assignment below.\n].forEach(attributeName => {\n  const name = attributeName.replace(CAMELIZE, capitalize);\n  properties[name] = new PropertyInfoRecord(\n    name,\n    STRING,\n    false, // mustUseProperty\n    attributeName,\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// String SVG attributes with the xlink namespace.\n[\n  'xlink:actuate',\n  'xlink:arcrole',\n  'xlink:role',\n  'xlink:show',\n  'xlink:title',\n  'xlink:type',\n\n  // NOTE: if you add a camelCased prop to this list,\n  // you'll need to set attributeName to name.toLowerCase()\n  // instead in the assignment below.\n].forEach(attributeName => {\n  const name = attributeName.replace(CAMELIZE, capitalize);\n  properties[name] = new PropertyInfoRecord(\n    name,\n    STRING,\n    false, // mustUseProperty\n    attributeName,\n    'http://www.w3.org/1999/xlink',\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// String SVG attributes with the xml namespace.\n[\n  'xml:base',\n  'xml:lang',\n  'xml:space',\n\n  // NOTE: if you add a camelCased prop to this list,\n  // you'll need to set attributeName to name.toLowerCase()\n  // instead in the assignment below.\n].forEach(attributeName => {\n  const name = attributeName.replace(CAMELIZE, capitalize);\n  properties[name] = new PropertyInfoRecord(\n    name,\n    STRING,\n    false, // mustUseProperty\n    attributeName,\n    'http://www.w3.org/XML/1998/namespace',\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These attribute exists both in HTML and SVG.\n// The attribute name is case-sensitive in SVG so we can't just use\n// the React name like we do for attributes that exist only in HTML.\n['tabIndex', 'crossOrigin'].forEach(attributeName => {\n  properties[attributeName] = new PropertyInfoRecord(\n    attributeName,\n    STRING,\n    false, // mustUseProperty\n    attributeName.toLowerCase(), // attributeName\n    null, // attributeNamespace\n    false, // sanitizeURL\n    false, // removeEmptyString\n  );\n});\n\n// These attributes accept URLs. These must not allow javascript: URLS.\n// These will also need to accept Trusted Types object in the future.\nconst xlinkHref = 'xlinkHref';\nproperties[xlinkHref] = new PropertyInfoRecord(\n  'xlinkHref',\n  STRING,\n  false, // mustUseProperty\n  'xlink:href',\n  'http://www.w3.org/1999/xlink',\n  true, // sanitizeURL\n  false, // removeEmptyString\n);\n\n['src', 'href', 'action', 'formAction'].forEach(attributeName => {\n  properties[attributeName] = new PropertyInfoRecord(\n    attributeName,\n    STRING,\n    false, // mustUseProperty\n    attributeName.toLowerCase(), // attributeName\n    null, // attributeNamespace\n    true, // sanitizeURL\n    true, // removeEmptyString\n  );\n});\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/**\n * CSS properties which accept numbers but are not in units of \"px\".\n */\nexport const isUnitlessNumber = {\n  animationIterationCount: true,\n  aspectRatio: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridArea: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n\n  // SVG-related properties\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true,\n};\n\n/**\n * @param {string} prefix vendor-specific prefix, eg: Webkit\n * @param {string} key style name, eg: transitionDuration\n * @return {string} style name prefixed with `prefix`, properly camelCased, eg:\n * WebkitTransitionDuration\n */\nfunction prefixKey(prefix, key) {\n  return prefix + key.charAt(0).toUpperCase() + key.substring(1);\n}\n\n/**\n * Support style names that may come passed in prefixed by adding permutations\n * of vendor prefixes.\n */\nconst prefixes = ['Webkit', 'ms', 'Moz', 'O'];\n\n// Using Object.keys here, or else the vanilla for-in loop makes IE8 go into an\n// infinite loop, because it iterates over the newly added props too.\nObject.keys(isUnitlessNumber).forEach(function(prop) {\n  prefixes.forEach(function(prefix) {\n    isUnitlessNumber[prefixKey(prefix, prop)] = isUnitlessNumber[prop];\n  });\n});\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {\n  ReactServerContext,\n  ServerContextJSONValue,\n} from 'shared/ReactTypes';\n\nimport {REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED} from 'shared/ReactSymbols';\nimport {isPrimaryRenderer} from './ReactServerFormatConfig';\n\nlet rendererSigil;\nif (__DEV__) {\n  // Use this to detect multiple renderers using the same context\n  rendererSigil = {};\n}\n\n// Used to store the parent path of all context overrides in a shared linked list.\n// Forming a reverse tree.\ntype ContextNode<T: ServerContextJSONValue> = {\n  parent: null | ContextNode<any>,\n  depth: number, // Short hand to compute the depth of the tree at this node.\n  context: ReactServerContext<T>,\n  parentValue: T,\n  value: T,\n};\n\n// The structure of a context snapshot is an implementation of this file.\n// Currently, it's implemented as tracking the current active node.\nexport opaque type ContextSnapshot = null | ContextNode<any>;\n\nexport const rootContextSnapshot: ContextSnapshot = null;\n\n// We assume that this runtime owns the \"current\" field on all ReactContext instances.\n// This global (actually thread local) state represents what state all those \"current\",\n// fields are currently in.\nlet currentActiveSnapshot: ContextSnapshot = null;\n\nfunction popNode(prev: ContextNode<any>): void {\n  if (isPrimaryRenderer) {\n    prev.context._currentValue = prev.parentValue;\n  } else {\n    prev.context._currentValue2 = prev.parentValue;\n  }\n}\n\nfunction pushNode(next: ContextNode<any>): void {\n  if (isPrimaryRenderer) {\n    next.context._currentValue = next.value;\n  } else {\n    next.context._currentValue2 = next.value;\n  }\n}\n\nfunction popToNearestCommonAncestor(\n  prev: ContextNode<any>,\n  next: ContextNode<any>,\n): void {\n  if (prev === next) {\n    // We've found a shared ancestor. We don't need to pop nor reapply this one or anything above.\n  } else {\n    popNode(prev);\n    const parentPrev = prev.parent;\n    const parentNext = next.parent;\n    if (parentPrev === null) {\n      if (parentNext !== null) {\n        throw new Error(\n          'The stacks must reach the root at the same time. This is a bug in React.',\n        );\n      }\n    } else {\n      if (parentNext === null) {\n        throw new Error(\n          'The stacks must reach the root at the same time. This is a bug in React.',\n        );\n      }\n\n      popToNearestCommonAncestor(parentPrev, parentNext);\n      // On the way back, we push the new ones that weren't common.\n      pushNode(next);\n    }\n  }\n}\n\nfunction popAllPrevious(prev: ContextNode<any>): void {\n  popNode(prev);\n  const parentPrev = prev.parent;\n  if (parentPrev !== null) {\n    popAllPrevious(parentPrev);\n  }\n}\n\nfunction pushAllNext(next: ContextNode<any>): void {\n  const parentNext = next.parent;\n  if (parentNext !== null) {\n    pushAllNext(parentNext);\n  }\n  pushNode(next);\n}\n\nfunction popPreviousToCommonLevel(\n  prev: ContextNode<any>,\n  next: ContextNode<any>,\n): void {\n  popNode(prev);\n  const parentPrev = prev.parent;\n\n  if (parentPrev === null) {\n    throw new Error(\n      'The depth must equal at least at zero before reaching the root. This is a bug in React.',\n    );\n  }\n\n  if (parentPrev.depth === next.depth) {\n    // We found the same level. Now we just need to find a shared ancestor.\n    popToNearestCommonAncestor(parentPrev, next);\n  } else {\n    // We must still be deeper.\n    popPreviousToCommonLevel(parentPrev, next);\n  }\n}\n\nfunction popNextToCommonLevel(\n  prev: ContextNode<any>,\n  next: ContextNode<any>,\n): void {\n  const parentNext = next.parent;\n\n  if (parentNext === null) {\n    throw new Error(\n      'The depth must equal at least at zero before reaching the root. This is a bug in React.',\n    );\n  }\n\n  if (prev.depth === parentNext.depth) {\n    // We found the same level. Now we just need to find a shared ancestor.\n    popToNearestCommonAncestor(prev, parentNext);\n  } else {\n    // We must still be deeper.\n    popNextToCommonLevel(prev, parentNext);\n  }\n  pushNode(next);\n}\n\n// Perform context switching to the new snapshot.\n// To make it cheap to read many contexts, while not suspending, we make the switch eagerly by\n// updating all the context's current values. That way reads, always just read the current value.\n// At the cost of updating contexts even if they're never read by this subtree.\nexport function switchContext(newSnapshot: ContextSnapshot): void {\n  // The basic algorithm we need to do is to pop back any contexts that are no longer on the stack.\n  // We also need to update any new contexts that are now on the stack with the deepest value.\n  // The easiest way to update new contexts is to just reapply them in reverse order from the\n  // perspective of the backpointers. To avoid allocating a lot when switching, we use the stack\n  // for that. Therefore this algorithm is recursive.\n  // 1) First we pop which ever snapshot tree was deepest. Popping old contexts as we go.\n  // 2) Then we find the nearest common ancestor from there. Popping old contexts as we go.\n  // 3) Then we reapply new contexts on the way back up the stack.\n  const prev = currentActiveSnapshot;\n  const next = newSnapshot;\n  if (prev !== next) {\n    if (prev === null) {\n      // $FlowFixMe: This has to be non-null since it's not equal to prev.\n      pushAllNext(next);\n    } else if (next === null) {\n      popAllPrevious(prev);\n    } else if (prev.depth === next.depth) {\n      popToNearestCommonAncestor(prev, next);\n    } else if (prev.depth > next.depth) {\n      popPreviousToCommonLevel(prev, next);\n    } else {\n      popNextToCommonLevel(prev, next);\n    }\n    currentActiveSnapshot = next;\n  }\n}\n\nexport function pushProvider<T: ServerContextJSONValue>(\n  context: ReactServerContext<T>,\n  nextValue: T,\n): ContextSnapshot {\n  let prevValue;\n  if (isPrimaryRenderer) {\n    prevValue = context._currentValue;\n    context._currentValue = nextValue;\n    if (__DEV__) {\n      if (\n        context._currentRenderer !== undefined &&\n        context._currentRenderer !== null &&\n        context._currentRenderer !== rendererSigil\n      ) {\n        console.error(\n          'Detected multiple renderers concurrently rendering the ' +\n            'same context provider. This is currently unsupported.',\n        );\n      }\n      context._currentRenderer = rendererSigil;\n    }\n  } else {\n    prevValue = context._currentValue2;\n    context._currentValue2 = nextValue;\n    if (__DEV__) {\n      if (\n        context._currentRenderer2 !== undefined &&\n        context._currentRenderer2 !== null &&\n        context._currentRenderer2 !== rendererSigil\n      ) {\n        console.error(\n          'Detected multiple renderers concurrently rendering the ' +\n            'same context provider. This is currently unsupported.',\n        );\n      }\n      context._currentRenderer2 = rendererSigil;\n    }\n  }\n  const prevNode = currentActiveSnapshot;\n  const newNode: ContextNode<T> = {\n    parent: prevNode,\n    depth: prevNode === null ? 0 : prevNode.depth + 1,\n    context: context,\n    parentValue: prevValue,\n    value: nextValue,\n  };\n  currentActiveSnapshot = newNode;\n  return newNode;\n}\n\nexport function popProvider(): ContextSnapshot {\n  const prevSnapshot = currentActiveSnapshot;\n\n  if (prevSnapshot === null) {\n    throw new Error(\n      'Tried to pop a Context at the root of the app. This is a bug in React.',\n    );\n  }\n\n  if (isPrimaryRenderer) {\n    const value = prevSnapshot.parentValue;\n    if (value === REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED) {\n      prevSnapshot.context._currentValue = prevSnapshot.context._defaultValue;\n    } else {\n      prevSnapshot.context._currentValue = value;\n    }\n  } else {\n    const value = prevSnapshot.parentValue;\n    if (value === REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED) {\n      prevSnapshot.context._currentValue2 = prevSnapshot.context._defaultValue;\n    } else {\n      prevSnapshot.context._currentValue2 = value;\n    }\n  }\n  return (currentActiveSnapshot = prevSnapshot.parent);\n}\n\nexport function getActiveContext(): ContextSnapshot {\n  return currentActiveSnapshot;\n}\n\nexport function readContext<T>(context: ReactServerContext<T>): T {\n  const value = isPrimaryRenderer\n    ? context._currentValue\n    : context._currentValue2;\n  return value;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {Dispatcher as DispatcherType} from 'react-reconciler/src/ReactInternalTypes';\nimport type {Request} from './ReactFlightServer';\nimport type {ReactServerContext} from 'shared/ReactTypes';\nimport {REACT_SERVER_CONTEXT_TYPE} from 'shared/ReactSymbols';\nimport {readContext as readContextImpl} from './ReactFlightNewContext';\n\nlet currentRequest = null;\n\nexport function prepareToUseHooksForRequest(request: Request) {\n  currentRequest = request;\n}\n\nexport function resetHooksForRequest() {\n  currentRequest = null;\n}\n\nfunction readContext<T>(context: ReactServerContext<T>): T {\n  if (__DEV__) {\n    if (context.$$typeof !== REACT_SERVER_CONTEXT_TYPE) {\n      console.error('Only ServerContext is supported in Flight');\n    }\n    if (currentCache === null) {\n      console.error(\n        'Context can only be read while React is rendering. ' +\n          'In classes, you can read it in the render method or getDerivedStateFromProps. ' +\n          'In function components, you can read it directly in the function body, but not ' +\n          'inside Hooks like useReducer() or useMemo().',\n      );\n    }\n  }\n  return readContextImpl(context);\n}\n\nexport const Dispatcher: DispatcherType = {\n  useMemo<T>(nextCreate: () => T): T {\n    return nextCreate();\n  },\n  useCallback<T>(callback: T): T {\n    return callback;\n  },\n  useDebugValue(): void {},\n  useDeferredValue: (unsupportedHook: any),\n  useTransition: (unsupportedHook: any),\n  getCacheForType<T>(resourceType: () => T): T {\n    if (!currentCache) {\n      throw new Error('Reading the cache is only supported while rendering.');\n    }\n\n    let entry: T | void = (currentCache.get(resourceType): any);\n    if (entry === undefined) {\n      entry = resourceType();\n      // TODO: Warn if undefined?\n      currentCache.set(resourceType, entry);\n    }\n    return entry;\n  },\n  readContext,\n  useContext: readContext,\n  useReducer: (unsupportedHook: any),\n  useRef: (unsupportedHook: any),\n  useState: (unsupportedHook: any),\n  useInsertionEffect: (unsupportedHook: any),\n  useLayoutEffect: (unsupportedHook: any),\n  useImperativeHandle: (unsupportedHook: any),\n  useEffect: (unsupportedHook: any),\n  useId,\n  useMutableSource: (unsupportedHook: any),\n  useSyncExternalStore: (unsupportedHook: any),\n  useCacheRefresh(): <T>(?() => T, ?T) => void {\n    return unsupportedRefresh;\n  },\n};\n\nfunction unsupportedHook(): void {\n  throw new Error('This Hook is not supported in Server Components.');\n}\n\nfunction unsupportedRefresh(): void {\n  if (!currentCache) {\n    throw new Error(\n      'Refreshing the cache is not supported in Server Components.',\n    );\n  }\n}\n\nlet currentCache: Map<Function, mixed> | null = null;\n\nexport function setCurrentCache(cache: Map<Function, mixed> | null) {\n  currentCache = cache;\n  return currentCache;\n}\n\nexport function getCurrentCache() {\n  return currentCache;\n}\n\nfunction useId(): string {\n  if (currentRequest === null) {\n    throw new Error('useId can only be used while React is rendering');\n  }\n  const id = currentRequest.identifierCount++;\n  // use 'S' for Flight components to distinguish from 'R' and 'r' in Fizz/Client\n  return ':' + currentRequest.identifierPrefix + 'S' + id.toString(32) + ':';\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport * as React from 'react';\n\nconst ReactSharedInternals =\n  React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nexport default ReactSharedInternals;\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport {REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED} from 'shared/ReactSymbols';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport {createServerContext} from 'react';\n\nconst ContextRegistry = ReactSharedInternals.ContextRegistry;\n\nexport function getOrCreateServerContext(globalName: string) {\n  if (!ContextRegistry[globalName]) {\n    ContextRegistry[globalName] = createServerContext(\n      globalName,\n      REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED,\n    );\n  }\n  return ContextRegistry[globalName];\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {\n  Destination,\n  Chunk,\n  BundlerConfig,\n  ModuleMetaData,\n  ModuleReference,\n  ModuleKey,\n} from './ReactFlightServerConfig';\nimport type {ContextSnapshot} from './ReactFlightNewContext';\nimport type {\n  ReactProviderType,\n  ServerContextJSONValue,\n} from 'shared/ReactTypes';\n\nimport {\n  scheduleWork,\n  beginWriting,\n  writeChunkAndReturn,\n  completeWriting,\n  flushBuffered,\n  close,\n  closeWithError,\n  processModelChunk,\n  processModuleChunk,\n  processProviderChunk,\n  processSymbolChunk,\n  processErrorChunk,\n  resolveModuleMetaData,\n  getModuleKey,\n  isModuleReference,\n} from './ReactFlightServerConfig';\n\nimport {\n  Dispatcher,\n  getCurrentCache,\n  prepareToUseHooksForRequest,\n  resetHooksForRequest,\n  setCurrentCache,\n} from './ReactFlightHooks';\nimport {\n  pushProvider,\n  popProvider,\n  switchContext,\n  getActiveContext,\n  rootContextSnapshot,\n} from './ReactFlightNewContext';\n\nimport {\n  REACT_ELEMENT_TYPE,\n  REACT_FORWARD_REF_TYPE,\n  REACT_FRAGMENT_TYPE,\n  REACT_LAZY_TYPE,\n  REACT_MEMO_TYPE,\n  REACT_PROVIDER_TYPE,\n} from 'shared/ReactSymbols';\n\nimport {getOrCreateServerContext} from 'shared/ReactServerContextRegistry';\nimport ReactSharedInternals from 'shared/ReactSharedInternals';\nimport isArray from 'shared/isArray';\n\ntype ReactJSONValue =\n  | string\n  | boolean\n  | number\n  | null\n  | $ReadOnlyArray<ReactJSONValue>\n  | ReactModelObject;\n\nexport type ReactModel =\n  | React$Element<any>\n  | string\n  | boolean\n  | number\n  | null\n  | Iterable<ReactModel>\n  | ReactModelObject;\n\ntype ReactModelObject = {+[key: string]: ReactModel};\n\ntype Segment = {\n  id: number,\n  model: ReactModel,\n  ping: () => void,\n  context: ContextSnapshot,\n};\n\nexport type Request = {\n  status: 0 | 1 | 2,\n  fatalError: mixed,\n  destination: null | Destination,\n  bundlerConfig: BundlerConfig,\n  cache: Map<Function, mixed>,\n  nextChunkId: number,\n  pendingChunks: number,\n  pingedSegments: Array<Segment>,\n  completedModuleChunks: Array<Chunk>,\n  completedJSONChunks: Array<Chunk>,\n  completedErrorChunks: Array<Chunk>,\n  writtenSymbols: Map<Symbol, number>,\n  writtenModules: Map<ModuleKey, number>,\n  writtenProviders: Map<string, number>,\n  identifierPrefix: string,\n  identifierCount: number,\n  onError: (error: mixed) => void,\n  toJSON: (key: string, value: ReactModel) => ReactJSONValue,\n};\n\nconst ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\n\nfunction defaultErrorHandler(error: mixed) {\n  console['error'](error);\n  // Don't transform to our wrapper\n}\n\nconst OPEN = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\nexport function createRequest(\n  model: ReactModel,\n  bundlerConfig: BundlerConfig,\n  onError: void | ((error: mixed) => void),\n  context?: Array<[string, ServerContextJSONValue]>,\n  identifierPrefix?: string,\n): Request {\n  const pingedSegments = [];\n  const request = {\n    status: OPEN,\n    fatalError: null,\n    destination: null,\n    bundlerConfig,\n    cache: new Map(),\n    nextChunkId: 0,\n    pendingChunks: 0,\n    pingedSegments: pingedSegments,\n    completedModuleChunks: [],\n    completedJSONChunks: [],\n    completedErrorChunks: [],\n    writtenSymbols: new Map(),\n    writtenModules: new Map(),\n    writtenProviders: new Map(),\n    identifierPrefix: identifierPrefix || '',\n    identifierCount: 1,\n    onError: onError === undefined ? defaultErrorHandler : onError,\n    toJSON: function(key: string, value: ReactModel): ReactJSONValue {\n      return resolveModelToJSON(request, this, key, value);\n    },\n  };\n  request.pendingChunks++;\n  const rootContext = createRootContext(context);\n  const rootSegment = createSegment(request, model, rootContext);\n  pingedSegments.push(rootSegment);\n  return request;\n}\n\nfunction createRootContext(\n  reqContext?: Array<[string, ServerContextJSONValue]>,\n) {\n  return importServerContexts(reqContext);\n}\n\nconst POP = {};\n\nfunction attemptResolveElement(\n  type: any,\n  key: null | React$Key,\n  ref: mixed,\n  props: any,\n): ReactModel {\n  if (ref !== null && ref !== undefined) {\n    // When the ref moves to the regular props object this will implicitly\n    // throw for functions. We could probably relax it to a DEV warning for other\n    // cases.\n    throw new Error(\n      'Refs cannot be used in server components, nor passed to client components.',\n    );\n  }\n  if (typeof type === 'function') {\n    // This is a server-side component.\n    return type(props);\n  } else if (typeof type === 'string') {\n    // This is a host element. E.g. HTML.\n    return [REACT_ELEMENT_TYPE, type, key, props];\n  } else if (typeof type === 'symbol') {\n    if (type === REACT_FRAGMENT_TYPE) {\n      // For key-less fragments, we add a small optimization to avoid serializing\n      // it as a wrapper.\n      // TODO: If a key is specified, we should propagate its key to any children.\n      // Same as if a server component has a key.\n      return props.children;\n    }\n    // This might be a built-in React component. We'll let the client decide.\n    // Any built-in works as long as its props are serializable.\n    return [REACT_ELEMENT_TYPE, type, key, props];\n  } else if (type != null && typeof type === 'object') {\n    if (isModuleReference(type)) {\n      // This is a reference to a client component.\n      return [REACT_ELEMENT_TYPE, type, key, props];\n    }\n    switch (type.$$typeof) {\n      case REACT_LAZY_TYPE: {\n        const payload = type._payload;\n        const init = type._init;\n        const wrappedType = init(payload);\n        return attemptResolveElement(wrappedType, key, ref, props);\n      }\n      case REACT_FORWARD_REF_TYPE: {\n        const render = type.render;\n        return render(props, undefined);\n      }\n      case REACT_MEMO_TYPE: {\n        return attemptResolveElement(type.type, key, ref, props);\n      }\n      case REACT_PROVIDER_TYPE: {\n        pushProvider(type._context, props.value);\n        if (__DEV__) {\n          const extraKeys = Object.keys(props).filter(value => {\n            if (value === 'children' || value === 'value') {\n              return false;\n            }\n            return true;\n          });\n          if (extraKeys.length !== 0) {\n            console.error(\n              'ServerContext can only have a value prop and children. Found: %s',\n              JSON.stringify(extraKeys),\n            );\n          }\n        }\n        return [\n          REACT_ELEMENT_TYPE,\n          type,\n          key,\n          // Rely on __popProvider being serialized last to pop the provider.\n          {value: props.value, children: props.children, __pop: POP},\n        ];\n      }\n    }\n  }\n  throw new Error(\n    `Unsupported server component type: ${describeValueForErrorMessage(type)}`,\n  );\n}\n\nfunction pingSegment(request: Request, segment: Segment): void {\n  const pingedSegments = request.pingedSegments;\n  pingedSegments.push(segment);\n  if (pingedSegments.length === 1) {\n    scheduleWork(() => performWork(request));\n  }\n}\n\nfunction createSegment(\n  request: Request,\n  model: ReactModel,\n  context: ContextSnapshot,\n): Segment {\n  const id = request.nextChunkId++;\n  const segment = {\n    id,\n    model,\n    context,\n    ping: () => pingSegment(request, segment),\n  };\n  return segment;\n}\n\nfunction serializeByValueID(id: number): string {\n  return '$' + id.toString(16);\n}\n\nfunction serializeByRefID(id: number): string {\n  return '@' + id.toString(16);\n}\n\nfunction escapeStringValue(value: string): string {\n  if (value[0] === '$' || value[0] === '@') {\n    // We need to escape $ or @ prefixed strings since we use those to encode\n    // references to IDs and as special symbol values.\n    return '$' + value;\n  } else {\n    return value;\n  }\n}\n\nfunction isObjectPrototype(object): boolean {\n  if (!object) {\n    return false;\n  }\n  const ObjectPrototype = Object.prototype;\n  if (object === ObjectPrototype) {\n    return true;\n  }\n  // It might be an object from a different Realm which is\n  // still just a plain simple object.\n  if (Object.getPrototypeOf(object)) {\n    return false;\n  }\n  const names = Object.getOwnPropertyNames(object);\n  for (let i = 0; i < names.length; i++) {\n    if (!(names[i] in ObjectPrototype)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction isSimpleObject(object): boolean {\n  if (!isObjectPrototype(Object.getPrototypeOf(object))) {\n    return false;\n  }\n  const names = Object.getOwnPropertyNames(object);\n  for (let i = 0; i < names.length; i++) {\n    const descriptor = Object.getOwnPropertyDescriptor(object, names[i]);\n    if (!descriptor) {\n      return false;\n    }\n    if (!descriptor.enumerable) {\n      if (\n        (names[i] === 'key' || names[i] === 'ref') &&\n        typeof descriptor.get === 'function'\n      ) {\n        // React adds key and ref getters to props objects to issue warnings.\n        // Those getters will not be transferred to the client, but that's ok,\n        // so we'll special case them.\n        continue;\n      }\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction objectName(object): string {\n  const name = Object.prototype.toString.call(object);\n  return name.replace(/^\\[object (.*)\\]$/, function(m, p0) {\n    return p0;\n  });\n}\n\nfunction describeKeyForErrorMessage(key: string): string {\n  const encodedKey = JSON.stringify(key);\n  return '\"' + key + '\"' === encodedKey ? key : encodedKey;\n}\n\nfunction describeValueForErrorMessage(value: ReactModel): string {\n  switch (typeof value) {\n    case 'string': {\n      return JSON.stringify(\n        value.length <= 10 ? value : value.substr(0, 10) + '...',\n      );\n    }\n    case 'object': {\n      if (isArray(value)) {\n        return '[...]';\n      }\n      const name = objectName(value);\n      if (name === 'Object') {\n        return '{...}';\n      }\n      return name;\n    }\n    case 'function':\n      return 'function';\n    default:\n      // eslint-disable-next-line react-internal/safe-string-coercion\n      return String(value);\n  }\n}\n\nfunction describeObjectForErrorMessage(\n  objectOrArray:\n    | {+[key: string | number]: ReactModel}\n    | $ReadOnlyArray<ReactModel>,\n  expandedName?: string,\n): string {\n  if (isArray(objectOrArray)) {\n    let str = '[';\n    const array: $ReadOnlyArray<ReactModel> = objectOrArray;\n    for (let i = 0; i < array.length; i++) {\n      if (i > 0) {\n        str += ', ';\n      }\n      if (i > 6) {\n        str += '...';\n        break;\n      }\n      const value = array[i];\n      if (\n        '' + i === expandedName &&\n        typeof value === 'object' &&\n        value !== null\n      ) {\n        str += describeObjectForErrorMessage(value);\n      } else {\n        str += describeValueForErrorMessage(value);\n      }\n    }\n    str += ']';\n    return str;\n  } else {\n    let str = '{';\n    const object: {+[key: string | number]: ReactModel} = objectOrArray;\n    const names = Object.keys(object);\n    for (let i = 0; i < names.length; i++) {\n      if (i > 0) {\n        str += ', ';\n      }\n      if (i > 6) {\n        str += '...';\n        break;\n      }\n      const name = names[i];\n      str += describeKeyForErrorMessage(name) + ': ';\n      const value = object[name];\n      if (\n        name === expandedName &&\n        typeof value === 'object' &&\n        value !== null\n      ) {\n        str += describeObjectForErrorMessage(value);\n      } else {\n        str += describeValueForErrorMessage(value);\n      }\n    }\n    str += '}';\n    return str;\n  }\n}\n\nlet insideContextProps = null;\nlet isInsideContextValue = false;\n\nexport function resolveModelToJSON(\n  request: Request,\n  parent: {+[key: string | number]: ReactModel} | $ReadOnlyArray<ReactModel>,\n  key: string,\n  value: ReactModel,\n): ReactJSONValue {\n  if (__DEV__) {\n    // $FlowFixMe\n    const originalValue = parent[key];\n    if (typeof originalValue === 'object' && originalValue !== value) {\n      console.error(\n        'Only plain objects can be passed to client components from server components. ' +\n          'Objects with toJSON methods are not supported. Convert it manually ' +\n          'to a simple value before passing it to props. ' +\n          'Remove %s from these props: %s',\n        describeKeyForErrorMessage(key),\n        describeObjectForErrorMessage(parent),\n      );\n    }\n  }\n\n  // Special Symbols\n  switch (value) {\n    case REACT_ELEMENT_TYPE:\n      return '$';\n  }\n\n  if (__DEV__) {\n    if (\n      parent[0] === REACT_ELEMENT_TYPE &&\n      parent[1] &&\n      parent[1].$$typeof === REACT_PROVIDER_TYPE &&\n      key === '3'\n    ) {\n      insideContextProps = value;\n    } else if (insideContextProps === parent && key === 'value') {\n      isInsideContextValue = true;\n    } else if (insideContextProps === parent && key === 'children') {\n      isInsideContextValue = false;\n    }\n  }\n\n  // Resolve server components.\n  while (\n    typeof value === 'object' &&\n    value !== null &&\n    ((value: any).$$typeof === REACT_ELEMENT_TYPE ||\n      (value: any).$$typeof === REACT_LAZY_TYPE)\n  ) {\n    if (__DEV__) {\n      if (isInsideContextValue) {\n        console.error('React elements are not allowed in ServerContext');\n      }\n    }\n\n    try {\n      switch ((value: any).$$typeof) {\n        case REACT_ELEMENT_TYPE: {\n          // TODO: Concatenate keys of parents onto children.\n          const element: React$Element<any> = (value: any);\n          // Attempt to render the server component.\n          value = attemptResolveElement(\n            element.type,\n            element.key,\n            element.ref,\n            element.props,\n          );\n          break;\n        }\n        case REACT_LAZY_TYPE: {\n          const payload = (value: any)._payload;\n          const init = (value: any)._init;\n          value = init(payload);\n          break;\n        }\n      }\n    } catch (x) {\n      if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n        // Something suspended, we'll need to create a new segment and resolve it later.\n        request.pendingChunks++;\n        const newSegment = createSegment(request, value, getActiveContext());\n        const ping = newSegment.ping;\n        x.then(ping, ping);\n        return serializeByRefID(newSegment.id);\n      } else {\n        logRecoverableError(request, x);\n        // Something errored. We'll still send everything we have up until this point.\n        // We'll replace this element with a lazy reference that throws on the client\n        // once it gets rendered.\n        request.pendingChunks++;\n        const errorId = request.nextChunkId++;\n        emitErrorChunk(request, errorId, x);\n        return serializeByRefID(errorId);\n      }\n    }\n  }\n\n  if (value === null) {\n    return null;\n  }\n\n  if (typeof value === 'object') {\n    if (isModuleReference(value)) {\n      const moduleReference: ModuleReference<any> = (value: any);\n      const moduleKey: ModuleKey = getModuleKey(moduleReference);\n      const writtenModules = request.writtenModules;\n      const existingId = writtenModules.get(moduleKey);\n      if (existingId !== undefined) {\n        if (parent[0] === REACT_ELEMENT_TYPE && key === '1') {\n          // If we're encoding the \"type\" of an element, we can refer\n          // to that by a lazy reference instead of directly since React\n          // knows how to deal with lazy values. This lets us suspend\n          // on this component rather than its parent until the code has\n          // loaded.\n          return serializeByRefID(existingId);\n        }\n        return serializeByValueID(existingId);\n      }\n      try {\n        const moduleMetaData: ModuleMetaData = resolveModuleMetaData(\n          request.bundlerConfig,\n          moduleReference,\n        );\n        request.pendingChunks++;\n        const moduleId = request.nextChunkId++;\n        emitModuleChunk(request, moduleId, moduleMetaData);\n        writtenModules.set(moduleKey, moduleId);\n        if (parent[0] === REACT_ELEMENT_TYPE && key === '1') {\n          // If we're encoding the \"type\" of an element, we can refer\n          // to that by a lazy reference instead of directly since React\n          // knows how to deal with lazy values. This lets us suspend\n          // on this component rather than its parent until the code has\n          // loaded.\n          return serializeByRefID(moduleId);\n        }\n        return serializeByValueID(moduleId);\n      } catch (x) {\n        request.pendingChunks++;\n        const errorId = request.nextChunkId++;\n        emitErrorChunk(request, errorId, x);\n        return serializeByValueID(errorId);\n      }\n    } else if ((value: any).$$typeof === REACT_PROVIDER_TYPE) {\n      const providerKey = ((value: any): ReactProviderType<any>)._context\n        ._globalName;\n      const writtenProviders = request.writtenProviders;\n      let providerId = writtenProviders.get(key);\n      if (providerId === undefined) {\n        request.pendingChunks++;\n        providerId = request.nextChunkId++;\n        writtenProviders.set(providerKey, providerId);\n        emitProviderChunk(request, providerId, providerKey);\n      }\n      return serializeByValueID(providerId);\n    } else if (value === POP) {\n      popProvider();\n      if (__DEV__) {\n        insideContextProps = null;\n        isInsideContextValue = false;\n      }\n      return (undefined: any);\n    }\n\n    if (__DEV__) {\n      if (value !== null && !isArray(value)) {\n        // Verify that this is a simple plain object.\n        if (objectName(value) !== 'Object') {\n          console.error(\n            'Only plain objects can be passed to client components from server components. ' +\n              'Built-ins like %s are not supported. ' +\n              'Remove %s from these props: %s',\n            objectName(value),\n            describeKeyForErrorMessage(key),\n            describeObjectForErrorMessage(parent),\n          );\n        } else if (!isSimpleObject(value)) {\n          console.error(\n            'Only plain objects can be passed to client components from server components. ' +\n              'Classes or other objects with methods are not supported. ' +\n              'Remove %s from these props: %s',\n            describeKeyForErrorMessage(key),\n            describeObjectForErrorMessage(parent, key),\n          );\n        } else if (Object.getOwnPropertySymbols) {\n          const symbols = Object.getOwnPropertySymbols(value);\n          if (symbols.length > 0) {\n            console.error(\n              'Only plain objects can be passed to client components from server components. ' +\n                'Objects with symbol properties like %s are not supported. ' +\n                'Remove %s from these props: %s',\n              symbols[0].description,\n              describeKeyForErrorMessage(key),\n              describeObjectForErrorMessage(parent, key),\n            );\n          }\n        }\n      }\n    }\n\n    return value;\n  }\n\n  if (typeof value === 'string') {\n    return escapeStringValue(value);\n  }\n\n  if (\n    typeof value === 'boolean' ||\n    typeof value === 'number' ||\n    typeof value === 'undefined'\n  ) {\n    return value;\n  }\n\n  if (typeof value === 'function') {\n    if (/^on[A-Z]/.test(key)) {\n      throw new Error(\n        'Event handlers cannot be passed to client component props. ' +\n          `Remove ${describeKeyForErrorMessage(\n            key,\n          )} from these props if possible: ${describeObjectForErrorMessage(\n            parent,\n          )}\n` +\n          'If you need interactivity, consider converting part of this to a client component.',\n      );\n    } else {\n      throw new Error(\n        'Functions cannot be passed directly to client components ' +\n          \"because they're not serializable. \" +\n          `Remove ${describeKeyForErrorMessage(key)} (${value.displayName ||\n            value.name ||\n            'function'}) from this object, or avoid the entire object: ${describeObjectForErrorMessage(\n            parent,\n          )}`,\n      );\n    }\n  }\n\n  if (typeof value === 'symbol') {\n    const writtenSymbols = request.writtenSymbols;\n    const existingId = writtenSymbols.get(value);\n    if (existingId !== undefined) {\n      return serializeByValueID(existingId);\n    }\n    const name = value.description;\n\n    if (Symbol.for(name) !== value) {\n      throw new Error(\n        'Only global symbols received from Symbol.for(...) can be passed to client components. ' +\n          `The symbol Symbol.for(${value.description}) cannot be found among global symbols. ` +\n          `Remove ${describeKeyForErrorMessage(\n            key,\n          )} from this object, or avoid the entire object: ${describeObjectForErrorMessage(\n            parent,\n          )}`,\n      );\n    }\n\n    request.pendingChunks++;\n    const symbolId = request.nextChunkId++;\n    emitSymbolChunk(request, symbolId, name);\n    writtenSymbols.set(value, symbolId);\n    return serializeByValueID(symbolId);\n  }\n\n  // $FlowFixMe: bigint isn't added to Flow yet.\n  if (typeof value === 'bigint') {\n    throw new Error(\n      `BigInt (${value}) is not yet supported in client component props. ` +\n        `Remove ${describeKeyForErrorMessage(\n          key,\n        )} from this object or use a plain number instead: ${describeObjectForErrorMessage(\n          parent,\n        )}`,\n    );\n  }\n\n  throw new Error(\n    `Type ${typeof value} is not supported in client component props. ` +\n      `Remove ${describeKeyForErrorMessage(\n        key,\n      )} from this object, or avoid the entire object: ${describeObjectForErrorMessage(\n        parent,\n      )}`,\n  );\n}\n\nfunction logRecoverableError(request: Request, error: mixed): void {\n  const onError = request.onError;\n  onError(error);\n}\n\nfunction fatalError(request: Request, error: mixed): void {\n  // This is called outside error handling code such as if an error happens in React internals.\n  if (request.destination !== null) {\n    request.status = CLOSED;\n    closeWithError(request.destination, error);\n  } else {\n    request.status = CLOSING;\n    request.fatalError = error;\n  }\n}\n\nfunction emitErrorChunk(request: Request, id: number, error: mixed): void {\n  // TODO: We should not leak error messages to the client in prod.\n  // Give this an error code instead and log on the server.\n  // We can serialize the error in DEV as a convenience.\n  let message;\n  let stack = '';\n  try {\n    if (error instanceof Error) {\n      // eslint-disable-next-line react-internal/safe-string-coercion\n      message = String(error.message);\n      // eslint-disable-next-line react-internal/safe-string-coercion\n      stack = String(error.stack);\n    } else {\n      message = 'Error: ' + (error: any);\n    }\n  } catch (x) {\n    message = 'An error occurred but serializing the error message failed.';\n  }\n\n  const processedChunk = processErrorChunk(request, id, message, stack);\n  request.completedErrorChunks.push(processedChunk);\n}\n\nfunction emitModuleChunk(\n  request: Request,\n  id: number,\n  moduleMetaData: ModuleMetaData,\n): void {\n  const processedChunk = processModuleChunk(request, id, moduleMetaData);\n  request.completedModuleChunks.push(processedChunk);\n}\n\nfunction emitSymbolChunk(request: Request, id: number, name: string): void {\n  const processedChunk = processSymbolChunk(request, id, name);\n  request.completedModuleChunks.push(processedChunk);\n}\n\nfunction emitProviderChunk(\n  request: Request,\n  id: number,\n  contextName: string,\n): void {\n  const processedChunk = processProviderChunk(request, id, contextName);\n  request.completedJSONChunks.push(processedChunk);\n}\n\nfunction retrySegment(request: Request, segment: Segment): void {\n  switchContext(segment.context);\n  try {\n    let value = segment.model;\n    while (\n      typeof value === 'object' &&\n      value !== null &&\n      (value: any).$$typeof === REACT_ELEMENT_TYPE\n    ) {\n      // TODO: Concatenate keys of parents onto children.\n      const element: React$Element<any> = (value: any);\n      // Attempt to render the server component.\n      // Doing this here lets us reuse this same segment if the next component\n      // also suspends.\n      segment.model = value;\n      value = attemptResolveElement(\n        element.type,\n        element.key,\n        element.ref,\n        element.props,\n      );\n    }\n    const processedChunk = processModelChunk(request, segment.id, value);\n    request.completedJSONChunks.push(processedChunk);\n  } catch (x) {\n    if (typeof x === 'object' && x !== null && typeof x.then === 'function') {\n      // Something suspended again, let's pick it back up later.\n      const ping = segment.ping;\n      x.then(ping, ping);\n      return;\n    } else {\n      logRecoverableError(request, x);\n      // This errored, we need to serialize this error to the\n      emitErrorChunk(request, segment.id, x);\n    }\n  }\n}\n\nfunction performWork(request: Request): void {\n  const prevDispatcher = ReactCurrentDispatcher.current;\n  const prevCache = getCurrentCache();\n  ReactCurrentDispatcher.current = Dispatcher;\n  setCurrentCache(request.cache);\n  prepareToUseHooksForRequest(request);\n\n  try {\n    const pingedSegments = request.pingedSegments;\n    request.pingedSegments = [];\n    for (let i = 0; i < pingedSegments.length; i++) {\n      const segment = pingedSegments[i];\n      retrySegment(request, segment);\n    }\n    if (request.destination !== null) {\n      flushCompletedChunks(request, request.destination);\n    }\n  } catch (error) {\n    logRecoverableError(request, error);\n    fatalError(request, error);\n  } finally {\n    ReactCurrentDispatcher.current = prevDispatcher;\n    setCurrentCache(prevCache);\n    resetHooksForRequest();\n  }\n}\n\nfunction flushCompletedChunks(\n  request: Request,\n  destination: Destination,\n): void {\n  beginWriting(destination);\n  try {\n    // We emit module chunks first in the stream so that\n    // they can be preloaded as early as possible.\n    const moduleChunks = request.completedModuleChunks;\n    let i = 0;\n    for (; i < moduleChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = moduleChunks[i];\n      const keepWriting: boolean = writeChunkAndReturn(destination, chunk);\n      if (!keepWriting) {\n        request.destination = null;\n        i++;\n        break;\n      }\n    }\n    moduleChunks.splice(0, i);\n    // Next comes model data.\n    const jsonChunks = request.completedJSONChunks;\n    i = 0;\n    for (; i < jsonChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = jsonChunks[i];\n      const keepWriting: boolean = writeChunkAndReturn(destination, chunk);\n      if (!keepWriting) {\n        request.destination = null;\n        i++;\n        break;\n      }\n    }\n    jsonChunks.splice(0, i);\n    // Finally, errors are sent. The idea is that it's ok to delay\n    // any error messages and prioritize display of other parts of\n    // the page.\n    const errorChunks = request.completedErrorChunks;\n    i = 0;\n    for (; i < errorChunks.length; i++) {\n      request.pendingChunks--;\n      const chunk = errorChunks[i];\n      const keepWriting: boolean = writeChunkAndReturn(destination, chunk);\n      if (!keepWriting) {\n        request.destination = null;\n        i++;\n        break;\n      }\n    }\n    errorChunks.splice(0, i);\n  } finally {\n    completeWriting(destination);\n  }\n  flushBuffered(destination);\n  if (request.pendingChunks === 0) {\n    // We're done.\n    close(destination);\n  }\n}\n\nexport function startWork(request: Request): void {\n  scheduleWork(() => performWork(request));\n}\n\nexport function startFlowing(request: Request, destination: Destination): void {\n  if (request.status === CLOSING) {\n    request.status = CLOSED;\n    closeWithError(destination, request.fatalError);\n    return;\n  }\n  if (request.status === CLOSED) {\n    return;\n  }\n  if (request.destination !== null) {\n    // We're already flowing.\n    return;\n  }\n  request.destination = destination;\n  try {\n    flushCompletedChunks(request, destination);\n  } catch (error) {\n    logRecoverableError(request, error);\n    fatalError(request, error);\n  }\n}\n\nfunction importServerContexts(\n  contexts?: Array<[string, ServerContextJSONValue]>,\n) {\n  if (contexts) {\n    const prevContext = getActiveContext();\n    switchContext(rootContextSnapshot);\n    for (let i = 0; i < contexts.length; i++) {\n      const [name, value] = contexts[i];\n      const context = getOrCreateServerContext(name);\n      pushProvider(context, value);\n    }\n    const importedContext = getActiveContext();\n    switchContext(prevContext);\n    return importedContext;\n  }\n  return rootContextSnapshot;\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n */\n\nimport type {ReactModel} from 'react-server/src/ReactFlightServer';\nimport type {\n  BundlerConfig,\n  Destination,\n} from './ReactFlightDOMRelayServerHostConfig';\n\nimport {\n  createRequest,\n  startWork,\n  startFlowing,\n} from 'react-server/src/ReactFlightServer';\n\ntype Options = {\n  onError?: (error: mixed) => void,\n  identifierPrefix?: string,\n};\n\nfunction render(\n  model: ReactModel,\n  destination: Destination,\n  config: BundlerConfig,\n  options?: Options,\n): void {\n  const request = createRequest(\n    model,\n    config,\n    options ? options.onError : undefined,\n    undefined, // not currently set up to supply context overrides\n    options ? options.identifierPrefix : undefined,\n  );\n  startWork(request);\n  startFlowing(request, destination);\n}\n\nexport {render};\n"],"names":["hasOwnProperty","Object","prototype","isArrayImpl","Array","isArray","a","isModuleReference","reference","JSResourceReferenceImpl","getModuleKey","resolveModuleMetaData","config","resource","resolveModuleMetaDataImpl","processErrorChunk","request","id","message","stack","convertModelToJSON","parent","key","model","json","resolveModelToJSON","jsonArray","i","length","jsonObj","nextKey","call","processModelChunk","processModuleChunk","moduleMetaData","processProviderChunk","contextName","processSymbolChunk","name","scheduleWork","callback","writeChunkAndReturn","destination","chunk","emitRow","closeWithError","error","close","dynamicFeatureFlags","require","disableInputAttributeSyncing","enableTrustedTypesIntegration","disableSchedulerTimeoutBasedOnReactExpirationTime","warnAboutSpreadingKeyToJSX","replayFailedUnitOfWorkWithInvokeGuardedCallback","enableFilterEmptyStringAttributesDOM","enableLegacyFBSupport","deferRenderPhaseUpdateToNextBatch","enableDebugTracing","skipUnmountedBoundaries","createRootStrictEffectsByDefault","enableUseRefAccessWarning","disableNativeComponentFrames","disableSchedulerTimeoutInWorkLoop","enableLazyContextPropagation","enableSyncDefaultUpdates","enableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay","enableClientRenderFallbackOnTextMismatch","usePolyfill","enableSymbolFallbackForWWW","Symbol","for","REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","REACT_PROVIDER_TYPE","REACT_FORWARD_REF_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_SERVER_CONTEXT_DEFAULT_VALUE_NOT_LOADED","RESERVED","STRING","BOOLEANISH_STRING","BOOLEAN","OVERLOADED_BOOLEAN","NUMERIC","POSITIVE_NUMERIC","PropertyInfoRecord","type","mustUseProperty","attributeName","attributeNamespace","sanitizeURL","removeEmptyString","acceptsBooleans","propertyName","properties","reservedProps","push","forEach","toLowerCase","CAMELIZE","capitalize","token","toUpperCase","replace","xlinkHref","isUnitlessNumber","animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","prefixKey","prefix","charAt","substring","prefixes","keys","prop","rootContextSnapshot","currentActiveSnapshot","popNode","prev","context","_currentValue","parentValue","pushNode","next","value","popToNearestCommonAncestor","parentPrev","parentNext","Error","popAllPrevious","pushAllNext","popPreviousToCommonLevel","depth","popNextToCommonLevel","switchContext","newSnapshot","pushProvider","nextValue","prevValue","prevNode","newNode","popProvider","prevSnapshot","_defaultValue","getActiveContext","readContext","isPrimaryRenderer","currentRequest","prepareToUseHooksForRequest","resetHooksForRequest","readContextImpl","Dispatcher","useMemo","nextCreate","useCallback","useDebugValue","useDeferredValue","unsupportedHook","useTransition","getCacheForType","resourceType","currentCache","entry","get","undefined","set","useContext","useReducer","useRef","useState","useInsertionEffect","useLayoutEffect","useImperativeHandle","useEffect","useId","useMutableSource","useSyncExternalStore","useCacheRefresh","unsupportedRefresh","setCurrentCache","cache","getCurrentCache","identifierCount","identifierPrefix","toString","ReactSharedInternals","React","ContextRegistry","getOrCreateServerContext","globalName","createServerContext","ReactCurrentDispatcher","defaultErrorHandler","console","OPEN","CLOSING","CLOSED","createRequest","bundlerConfig","onError","pingedSegments","status","fatalError","Map","nextChunkId","pendingChunks","completedModuleChunks","completedJSONChunks","completedErrorChunks","writtenSymbols","writtenModules","writtenProviders","toJSON","rootContext","createRootContext","rootSegment","createSegment","reqContext","importServerContexts","POP","attemptResolveElement","ref","props","children","$$typeof","payload","_payload","init","_init","wrappedType","render","_context","__pop","describeValueForErrorMessage","pingSegment","segment","performWork","ping","serializeByValueID","serializeByRefID","escapeStringValue","objectName","object","m","p0","describeKeyForErrorMessage","encodedKey","JSON","stringify","substr","String","describeObjectForErrorMessage","objectOrArray","expandedName","str","array","names","element","x","then","newSegment","logRecoverableError","errorId","emitErrorChunk","moduleReference","moduleKey","existingId","moduleId","emitModuleChunk","providerKey","_globalName","providerId","emitProviderChunk","test","displayName","description","symbolId","emitSymbolChunk","processedChunk","retrySegment","prevDispatcher","current","prevCache","flushCompletedChunks","beginWriting","moduleChunks","keepWriting","splice","jsonChunks","errorChunks","completeWriting","startWork","startFlowing","contexts","prevContext","importedContext","options"],"mappings":"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"}